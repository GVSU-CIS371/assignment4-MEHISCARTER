(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();/**
* @vue/shared v3.5.24
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Ga(e){const t=Object.create(null);for(const n of e.split(","))t[n]=1;return n=>n in t}const At={},Ar=[],Fe=()=>{},Mh=()=>!1,ao=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),Qa=e=>e.startsWith("onUpdate:"),ue=Object.assign,Xa=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},pm=Object.prototype.hasOwnProperty,vt=(e,t)=>pm.call(e,t),nt=Array.isArray,br=e=>Bs(e)==="[object Map]",Fh=e=>Bs(e)==="[object Set]",$u=e=>Bs(e)==="[object Date]",at=e=>typeof e=="function",jt=e=>typeof e=="string",Pe=e=>typeof e=="symbol",Rt=e=>e!==null&&typeof e=="object",Lh=e=>(Rt(e)||at(e))&&at(e.then)&&at(e.catch),Uh=Object.prototype.toString,Bs=e=>Uh.call(e),mm=e=>Bs(e).slice(8,-1),Bh=e=>Bs(e)==="[object Object]",Ja=e=>jt(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,ds=Ga(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),lo=e=>{const t=Object.create(null);return(n=>t[n]||(t[n]=e(n)))},gm=/-\w/g,An=lo(e=>e.replace(gm,t=>t.slice(1).toUpperCase())),_m=/\B([A-Z])/g,tr=lo(e=>e.replace(_m,"-$1").toLowerCase()),jh=lo(e=>e.charAt(0).toUpperCase()+e.slice(1)),Go=lo(e=>e?`on${jh(e)}`:""),gn=(e,t)=>!Object.is(e,t),wi=(e,...t)=>{for(let n=0;n<e.length;n++)e[n](...t)},$h=(e,t,n,r=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:r,value:n})},Ya=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let qu;const uo=()=>qu||(qu=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Fr(e){if(nt(e)){const t={};for(let n=0;n<e.length;n++){const r=e[n],s=jt(r)?Tm(r):Fr(r);if(s)for(const i in s)t[i]=s[i]}return t}else if(jt(e)||Rt(e))return e}const ym=/;(?![^(]*\))/g,vm=/:([^]+)/,Em=/\/\*[^]*?\*\//g;function Tm(e){const t={};return e.replace(Em,"").split(ym).forEach(n=>{if(n){const r=n.split(vm);r.length>1&&(t[r[0].trim()]=r[1].trim())}}),t}function Za(e){let t="";if(jt(e))t=e;else if(nt(e))for(let n=0;n<e.length;n++){const r=Za(e[n]);r&&(t+=r+" ")}else if(Rt(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const Im="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",wm=Ga(Im);function qh(e){return!!e||e===""}function Am(e,t){if(e.length!==t.length)return!1;let n=!0;for(let r=0;n&&r<e.length;r++)n=Oi(e[r],t[r]);return n}function Oi(e,t){if(e===t)return!0;let n=$u(e),r=$u(t);if(n||r)return n&&r?e.getTime()===t.getTime():!1;if(n=Pe(e),r=Pe(t),n||r)return e===t;if(n=nt(e),r=nt(t),n||r)return n&&r?Am(e,t):!1;if(n=Rt(e),r=Rt(t),n||r){if(!n||!r)return!1;const s=Object.keys(e).length,i=Object.keys(t).length;if(s!==i)return!1;for(const a in e){const l=e.hasOwnProperty(a),c=t.hasOwnProperty(a);if(l&&!c||!l&&c||!Oi(e[a],t[a]))return!1}}return String(e)===String(t)}const Hh=e=>!!(e&&e.__v_isRef===!0),_r=e=>jt(e)?e:e==null?"":nt(e)||Rt(e)&&(e.toString===Uh||!at(e.toString))?Hh(e)?_r(e.value):JSON.stringify(e,zh,2):String(e),zh=(e,t)=>Hh(t)?zh(e,t.value):br(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[r,s],i)=>(n[Qo(r,i)+" =>"]=s,n),{})}:Fh(t)?{[`Set(${t.size})`]:[...t.values()].map(n=>Qo(n))}:Pe(t)?Qo(t):Rt(t)&&!nt(t)&&!Bh(t)?String(t):t,Qo=(e,t="")=>{var n;return Pe(e)?`Symbol(${(n=e.description)!=null?n:t})`:e};/**
* @vue/reactivity v3.5.24
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let se;class Kh{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=se,!t&&se&&(this.index=(se.scopes||(se.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].pause();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].resume();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].resume()}}run(t){if(this._active){const n=se;try{return se=this,t()}finally{se=n}}}on(){++this._on===1&&(this.prevScope=se,se=this)}off(){this._on>0&&--this._on===0&&(se=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(this.effects.length=0,n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0}}}function Wh(e){return new Kh(e)}function Gh(){return se}function bm(e,t=!1){se&&se.cleanups.push(e)}let bt;const Xo=new WeakSet;class Qh{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,se&&se.active&&se.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Xo.has(this)&&(Xo.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Jh(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Hu(this),Yh(this);const t=bt,n=Ce;bt=this,Ce=!0;try{return this.fn()}finally{Zh(this),bt=t,Ce=n,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)nl(t);this.deps=this.depsTail=void 0,Hu(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Xo.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){da(this)&&this.run()}get dirty(){return da(this)}}let Xh=0,ps,ms;function Jh(e,t=!1){if(e.flags|=8,t){e.next=ms,ms=e;return}e.next=ps,ps=e}function tl(){Xh++}function el(){if(--Xh>0)return;if(ms){let t=ms;for(ms=void 0;t;){const n=t.next;t.next=void 0,t.flags&=-9,t=n}}let e;for(;ps;){let t=ps;for(ps=void 0;t;){const n=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(r){e||(e=r)}t=n}}if(e)throw e}function Yh(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function Zh(e){let t,n=e.depsTail,r=n;for(;r;){const s=r.prevDep;r.version===-1?(r===n&&(n=s),nl(r),Sm(r)):t=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=s}e.deps=t,e.depsTail=n}function da(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(tf(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function tf(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===Ss)||(e.globalVersion=Ss,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!da(e))))return;e.flags|=2;const t=e.dep,n=bt,r=Ce;bt=e,Ce=!0;try{Yh(e);const s=e.fn(e._value);(t.version===0||gn(s,e._value))&&(e.flags|=128,e._value=s,t.version++)}catch(s){throw t.version++,s}finally{bt=n,Ce=r,Zh(e),e.flags&=-3}}function nl(e,t=!1){const{dep:n,prevSub:r,nextSub:s}=e;if(r&&(r.nextSub=s,e.prevSub=void 0),s&&(s.prevSub=r,e.nextSub=void 0),n.subs===e&&(n.subs=r,!r&&n.computed)){n.computed.flags&=-5;for(let i=n.computed.deps;i;i=i.nextDep)nl(i,!0)}!t&&!--n.sc&&n.map&&n.map.delete(n.key)}function Sm(e){const{prevDep:t,nextDep:n}=e;t&&(t.nextDep=n,e.prevDep=void 0),n&&(n.prevDep=t,e.nextDep=void 0)}let Ce=!0;const ef=[];function Ze(){ef.push(Ce),Ce=!1}function tn(){const e=ef.pop();Ce=e===void 0?!0:e}function Hu(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const n=bt;bt=void 0;try{t()}finally{bt=n}}}let Ss=0;class Rm{constructor(t,n){this.sub=t,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class rl{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!bt||!Ce||bt===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==bt)n=this.activeLink=new Rm(bt,this),bt.deps?(n.prevDep=bt.depsTail,bt.depsTail.nextDep=n,bt.depsTail=n):bt.deps=bt.depsTail=n,nf(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const r=n.nextDep;r.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=r),n.prevDep=bt.depsTail,n.nextDep=void 0,bt.depsTail.nextDep=n,bt.depsTail=n,bt.deps===n&&(bt.deps=r)}return n}trigger(t){this.version++,Ss++,this.notify(t)}notify(t){tl();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{el()}}}function nf(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let r=t.deps;r;r=r.nextDep)nf(r)}const n=e.dep.subs;n!==e&&(e.prevSub=n,n&&(n.nextSub=e)),e.dep.subs=e}}const ki=new WeakMap,Kn=Symbol(""),pa=Symbol(""),Rs=Symbol("");function oe(e,t,n){if(Ce&&bt){let r=ki.get(e);r||ki.set(e,r=new Map);let s=r.get(n);s||(r.set(n,s=new rl),s.map=r,s.key=n),s.track()}}function Xe(e,t,n,r,s,i){const a=ki.get(e);if(!a){Ss++;return}const l=c=>{c&&c.trigger()};if(tl(),t==="clear")a.forEach(l);else{const c=nt(e),f=c&&Ja(n);if(c&&n==="length"){const d=Number(r);a.forEach((p,_)=>{(_==="length"||_===Rs||!Pe(_)&&_>=d)&&l(p)})}else switch((n!==void 0||a.has(void 0))&&l(a.get(n)),f&&l(a.get(Rs)),t){case"add":c?f&&l(a.get("length")):(l(a.get(Kn)),br(e)&&l(a.get(pa)));break;case"delete":c||(l(a.get(Kn)),br(e)&&l(a.get(pa)));break;case"set":br(e)&&l(a.get(Kn));break}}el()}function Cm(e,t){const n=ki.get(e);return n&&n.get(t)}function fr(e){const t=gt(e);return t===e?t:(oe(t,"iterate",Rs),Ae(e)?t:t.map(Jt))}function co(e){return oe(e=gt(e),"iterate",Rs),e}const Pm={__proto__:null,[Symbol.iterator](){return Jo(this,Symbol.iterator,Jt)},concat(...e){return fr(this).concat(...e.map(t=>nt(t)?fr(t):t))},entries(){return Jo(this,"entries",e=>(e[1]=Jt(e[1]),e))},every(e,t){return Ge(this,"every",e,t,void 0,arguments)},filter(e,t){return Ge(this,"filter",e,t,n=>n.map(Jt),arguments)},find(e,t){return Ge(this,"find",e,t,Jt,arguments)},findIndex(e,t){return Ge(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return Ge(this,"findLast",e,t,Jt,arguments)},findLastIndex(e,t){return Ge(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return Ge(this,"forEach",e,t,void 0,arguments)},includes(...e){return Yo(this,"includes",e)},indexOf(...e){return Yo(this,"indexOf",e)},join(e){return fr(this).join(e)},lastIndexOf(...e){return Yo(this,"lastIndexOf",e)},map(e,t){return Ge(this,"map",e,t,void 0,arguments)},pop(){return ss(this,"pop")},push(...e){return ss(this,"push",e)},reduce(e,...t){return zu(this,"reduce",e,t)},reduceRight(e,...t){return zu(this,"reduceRight",e,t)},shift(){return ss(this,"shift")},some(e,t){return Ge(this,"some",e,t,void 0,arguments)},splice(...e){return ss(this,"splice",e)},toReversed(){return fr(this).toReversed()},toSorted(e){return fr(this).toSorted(e)},toSpliced(...e){return fr(this).toSpliced(...e)},unshift(...e){return ss(this,"unshift",e)},values(){return Jo(this,"values",Jt)}};function Jo(e,t,n){const r=co(e),s=r[t]();return r!==e&&!Ae(e)&&(s._next=s.next,s.next=()=>{const i=s._next();return i.done||(i.value=n(i.value)),i}),s}const Vm=Array.prototype;function Ge(e,t,n,r,s,i){const a=co(e),l=a!==e&&!Ae(e),c=a[t];if(c!==Vm[t]){const p=c.apply(e,i);return l?Jt(p):p}let f=n;a!==e&&(l?f=function(p,_){return n.call(this,Jt(p),_,e)}:n.length>2&&(f=function(p,_){return n.call(this,p,_,e)}));const d=c.call(a,f,r);return l&&s?s(d):d}function zu(e,t,n,r){const s=co(e);let i=n;return s!==e&&(Ae(e)?n.length>3&&(i=function(a,l,c){return n.call(this,a,l,c,e)}):i=function(a,l,c){return n.call(this,a,Jt(l),c,e)}),s[t](i,...r)}function Yo(e,t,n){const r=gt(e);oe(r,"iterate",Rs);const s=r[t](...n);return(s===-1||s===!1)&&ol(n[0])?(n[0]=gt(n[0]),r[t](...n)):s}function ss(e,t,n=[]){Ze(),tl();const r=gt(e)[t].apply(e,n);return el(),tn(),r}const Dm=Ga("__proto__,__v_isRef,__isVue"),rf=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Pe));function xm(e){Pe(e)||(e=String(e));const t=gt(this);return oe(t,"has",e),t.hasOwnProperty(e)}class sf{constructor(t=!1,n=!1){this._isReadonly=t,this._isShallow=n}get(t,n,r){if(n==="__v_skip")return t.__v_skip;const s=this._isReadonly,i=this._isShallow;if(n==="__v_isReactive")return!s;if(n==="__v_isReadonly")return s;if(n==="__v_isShallow")return i;if(n==="__v_raw")return r===(s?i?$m:uf:i?lf:af).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(r)?t:void 0;const a=nt(t);if(!s){let c;if(a&&(c=Pm[n]))return c;if(n==="hasOwnProperty")return xm}const l=Reflect.get(t,n,Mt(t)?t:r);if((Pe(n)?rf.has(n):Dm(n))||(s||oe(t,"get",n),i))return l;if(Mt(l)){const c=a&&Ja(n)?l:l.value;return s&&Rt(c)?ga(c):c}return Rt(l)?s?ga(l):ho(l):l}}class of extends sf{constructor(t=!1){super(!1,t)}set(t,n,r,s){let i=t[n];if(!this._isShallow){const c=bn(i);if(!Ae(r)&&!bn(r)&&(i=gt(i),r=gt(r)),!nt(t)&&Mt(i)&&!Mt(r))return c||(i.value=r),!0}const a=nt(t)&&Ja(n)?Number(n)<t.length:vt(t,n),l=Reflect.set(t,n,r,Mt(t)?t:s);return t===gt(s)&&(a?gn(r,i)&&Xe(t,"set",n,r):Xe(t,"add",n,r)),l}deleteProperty(t,n){const r=vt(t,n);t[n];const s=Reflect.deleteProperty(t,n);return s&&r&&Xe(t,"delete",n,void 0),s}has(t,n){const r=Reflect.has(t,n);return(!Pe(n)||!rf.has(n))&&oe(t,"has",n),r}ownKeys(t){return oe(t,"iterate",nt(t)?"length":Kn),Reflect.ownKeys(t)}}class Nm extends sf{constructor(t=!1){super(!0,t)}set(t,n){return!0}deleteProperty(t,n){return!0}}const Om=new of,km=new Nm,Mm=new of(!0);const ma=e=>e,pi=e=>Reflect.getPrototypeOf(e);function Fm(e,t,n){return function(...r){const s=this.__v_raw,i=gt(s),a=br(i),l=e==="entries"||e===Symbol.iterator&&a,c=e==="keys"&&a,f=s[e](...r),d=n?ma:t?Mi:Jt;return!t&&oe(i,"iterate",c?pa:Kn),{next(){const{value:p,done:_}=f.next();return _?{value:p,done:_}:{value:l?[d(p[0]),d(p[1])]:d(p),done:_}},[Symbol.iterator](){return this}}}}function mi(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function Lm(e,t){const n={get(s){const i=this.__v_raw,a=gt(i),l=gt(s);e||(gn(s,l)&&oe(a,"get",s),oe(a,"get",l));const{has:c}=pi(a),f=t?ma:e?Mi:Jt;if(c.call(a,s))return f(i.get(s));if(c.call(a,l))return f(i.get(l));i!==a&&i.get(s)},get size(){const s=this.__v_raw;return!e&&oe(gt(s),"iterate",Kn),s.size},has(s){const i=this.__v_raw,a=gt(i),l=gt(s);return e||(gn(s,l)&&oe(a,"has",s),oe(a,"has",l)),s===l?i.has(s):i.has(s)||i.has(l)},forEach(s,i){const a=this,l=a.__v_raw,c=gt(l),f=t?ma:e?Mi:Jt;return!e&&oe(c,"iterate",Kn),l.forEach((d,p)=>s.call(i,f(d),f(p),a))}};return ue(n,e?{add:mi("add"),set:mi("set"),delete:mi("delete"),clear:mi("clear")}:{add(s){!t&&!Ae(s)&&!bn(s)&&(s=gt(s));const i=gt(this);return pi(i).has.call(i,s)||(i.add(s),Xe(i,"add",s,s)),this},set(s,i){!t&&!Ae(i)&&!bn(i)&&(i=gt(i));const a=gt(this),{has:l,get:c}=pi(a);let f=l.call(a,s);f||(s=gt(s),f=l.call(a,s));const d=c.call(a,s);return a.set(s,i),f?gn(i,d)&&Xe(a,"set",s,i):Xe(a,"add",s,i),this},delete(s){const i=gt(this),{has:a,get:l}=pi(i);let c=a.call(i,s);c||(s=gt(s),c=a.call(i,s)),l&&l.call(i,s);const f=i.delete(s);return c&&Xe(i,"delete",s,void 0),f},clear(){const s=gt(this),i=s.size!==0,a=s.clear();return i&&Xe(s,"clear",void 0,void 0),a}}),["keys","values","entries",Symbol.iterator].forEach(s=>{n[s]=Fm(s,e,t)}),n}function sl(e,t){const n=Lm(e,t);return(r,s,i)=>s==="__v_isReactive"?!e:s==="__v_isReadonly"?e:s==="__v_raw"?r:Reflect.get(vt(n,s)&&s in r?n:r,s,i)}const Um={get:sl(!1,!1)},Bm={get:sl(!1,!0)},jm={get:sl(!0,!1)};const af=new WeakMap,lf=new WeakMap,uf=new WeakMap,$m=new WeakMap;function qm(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Hm(e){return e.__v_skip||!Object.isExtensible(e)?0:qm(mm(e))}function ho(e){return bn(e)?e:il(e,!1,Om,Um,af)}function zm(e){return il(e,!1,Mm,Bm,lf)}function ga(e){return il(e,!0,km,jm,uf)}function il(e,t,n,r,s){if(!Rt(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const i=Hm(e);if(i===0)return e;const a=s.get(e);if(a)return a;const l=new Proxy(e,i===2?r:n);return s.set(e,l),l}function _n(e){return bn(e)?_n(e.__v_raw):!!(e&&e.__v_isReactive)}function bn(e){return!!(e&&e.__v_isReadonly)}function Ae(e){return!!(e&&e.__v_isShallow)}function ol(e){return e?!!e.__v_raw:!1}function gt(e){const t=e&&e.__v_raw;return t?gt(t):e}function al(e){return!vt(e,"__v_skip")&&Object.isExtensible(e)&&$h(e,"__v_skip",!0),e}const Jt=e=>Rt(e)?ho(e):e,Mi=e=>Rt(e)?ga(e):e;function Mt(e){return e?e.__v_isRef===!0:!1}function Fi(e){return Km(e,!1)}function Km(e,t){return Mt(e)?e:new Wm(e,t)}class Wm{constructor(t,n){this.dep=new rl,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?t:gt(t),this._value=n?t:Jt(t),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(t){const n=this._rawValue,r=this.__v_isShallow||Ae(t)||bn(t);t=r?t:gt(t),gn(t,n)&&(this._rawValue=t,this._value=r?t:Jt(t),this.dep.trigger())}}function Tt(e){return Mt(e)?e.value:e}const Gm={get:(e,t,n)=>t==="__v_raw"?e:Tt(Reflect.get(e,t,n)),set:(e,t,n,r)=>{const s=e[t];return Mt(s)&&!Mt(n)?(s.value=n,!0):Reflect.set(e,t,n,r)}};function cf(e){return _n(e)?e:new Proxy(e,Gm)}function Qm(e){const t=nt(e)?new Array(e.length):{};for(const n in e)t[n]=Jm(e,n);return t}class Xm{constructor(t,n,r){this._object=t,this._key=n,this._defaultValue=r,this.__v_isRef=!0,this._value=void 0}get value(){const t=this._object[this._key];return this._value=t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}get dep(){return Cm(gt(this._object),this._key)}}function Jm(e,t,n){const r=e[t];return Mt(r)?r:new Xm(e,t,n)}class Ym{constructor(t,n,r){this.fn=t,this.setter=n,this._value=void 0,this.dep=new rl(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Ss-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&bt!==this)return Jh(this,!0),!0}get value(){const t=this.dep.track();return tf(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function Zm(e,t,n=!1){let r,s;return at(e)?r=e:(r=e.get,s=e.set),new Ym(r,s,n)}const gi={},Li=new WeakMap;let $n;function tg(e,t=!1,n=$n){if(n){let r=Li.get(n);r||Li.set(n,r=[]),r.push(e)}}function eg(e,t,n=At){const{immediate:r,deep:s,once:i,scheduler:a,augmentJob:l,call:c}=n,f=z=>s?z:Ae(z)||s===!1||s===0?Je(z,1):Je(z);let d,p,_,b,V=!1,M=!1;if(Mt(e)?(p=()=>e.value,V=Ae(e)):_n(e)?(p=()=>f(e),V=!0):nt(e)?(M=!0,V=e.some(z=>_n(z)||Ae(z)),p=()=>e.map(z=>{if(Mt(z))return z.value;if(_n(z))return f(z);if(at(z))return c?c(z,2):z()})):at(e)?t?p=c?()=>c(e,2):e:p=()=>{if(_){Ze();try{_()}finally{tn()}}const z=$n;$n=d;try{return c?c(e,3,[b]):e(b)}finally{$n=z}}:p=Fe,t&&s){const z=p,lt=s===!0?1/0:s;p=()=>Je(z(),lt)}const L=Gh(),W=()=>{d.stop(),L&&L.active&&Xa(L.effects,d)};if(i&&t){const z=t;t=(...lt)=>{z(...lt),W()}}let G=M?new Array(e.length).fill(gi):gi;const Q=z=>{if(!(!(d.flags&1)||!d.dirty&&!z))if(t){const lt=d.run();if(s||V||(M?lt.some((It,I)=>gn(It,G[I])):gn(lt,G))){_&&_();const It=$n;$n=d;try{const I=[lt,G===gi?void 0:M&&G[0]===gi?[]:G,b];G=lt,c?c(t,3,I):t(...I)}finally{$n=It}}}else d.run()};return l&&l(Q),d=new Qh(p),d.scheduler=a?()=>a(Q,!1):Q,b=z=>tg(z,!1,d),_=d.onStop=()=>{const z=Li.get(d);if(z){if(c)c(z,4);else for(const lt of z)lt();Li.delete(d)}},t?r?Q(!0):G=d.run():a?a(Q.bind(null,!0),!0):d.run(),W.pause=d.pause.bind(d),W.resume=d.resume.bind(d),W.stop=W,W}function Je(e,t=1/0,n){if(t<=0||!Rt(e)||e.__v_skip||(n=n||new Map,(n.get(e)||0)>=t))return e;if(n.set(e,t),t--,Mt(e))Je(e.value,t,n);else if(nt(e))for(let r=0;r<e.length;r++)Je(e[r],t,n);else if(Fh(e)||br(e))e.forEach(r=>{Je(r,t,n)});else if(Bh(e)){for(const r in e)Je(e[r],t,n);for(const r of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,r)&&Je(e[r],t,n)}return e}/**
* @vue/runtime-core v3.5.24
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function js(e,t,n,r){try{return r?e(...r):e()}catch(s){fo(s,t,n)}}function $e(e,t,n,r){if(at(e)){const s=js(e,t,n,r);return s&&Lh(s)&&s.catch(i=>{fo(i,t,n)}),s}if(nt(e)){const s=[];for(let i=0;i<e.length;i++)s.push($e(e[i],t,n,r));return s}}function fo(e,t,n,r=!0){const s=t?t.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:a}=t&&t.appContext.config||At;if(t){let l=t.parent;const c=t.proxy,f=`https://vuejs.org/error-reference/#runtime-${n}`;for(;l;){const d=l.ec;if(d){for(let p=0;p<d.length;p++)if(d[p](e,c,f)===!1)return}l=l.parent}if(i){Ze(),js(i,null,10,[e,c,f]),tn();return}}ng(e,n,s,r,a)}function ng(e,t,n,r=!0,s=!1){if(s)throw e;console.error(e)}const de=[];let Oe=-1;const Sr=[];let fn=null,yr=0;const hf=Promise.resolve();let Ui=null;function ff(e){const t=Ui||hf;return e?t.then(this?e.bind(this):e):t}function rg(e){let t=Oe+1,n=de.length;for(;t<n;){const r=t+n>>>1,s=de[r],i=Cs(s);i<e||i===e&&s.flags&2?t=r+1:n=r}return t}function ll(e){if(!(e.flags&1)){const t=Cs(e),n=de[de.length-1];!n||!(e.flags&2)&&t>=Cs(n)?de.push(e):de.splice(rg(t),0,e),e.flags|=1,df()}}function df(){Ui||(Ui=hf.then(mf))}function sg(e){nt(e)?Sr.push(...e):fn&&e.id===-1?fn.splice(yr+1,0,e):e.flags&1||(Sr.push(e),e.flags|=1),df()}function Ku(e,t,n=Oe+1){for(;n<de.length;n++){const r=de[n];if(r&&r.flags&2){if(e&&r.id!==e.uid)continue;de.splice(n,1),n--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function pf(e){if(Sr.length){const t=[...new Set(Sr)].sort((n,r)=>Cs(n)-Cs(r));if(Sr.length=0,fn){fn.push(...t);return}for(fn=t,yr=0;yr<fn.length;yr++){const n=fn[yr];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}fn=null,yr=0}}const Cs=e=>e.id==null?e.flags&2?-1:1/0:e.id;function mf(e){try{for(Oe=0;Oe<de.length;Oe++){const t=de[Oe];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),js(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;Oe<de.length;Oe++){const t=de[Oe];t&&(t.flags&=-2)}Oe=-1,de.length=0,pf(),Ui=null,(de.length||Sr.length)&&mf()}}let le=null,gf=null;function Bi(e){const t=le;return le=e,gf=e&&e.type.__scopeId||null,t}function as(e,t=le,n){if(!t||e._n)return e;const r=(...s)=>{r._d&&nc(-1);const i=Bi(t);let a;try{a=e(...s)}finally{Bi(i),r._d&&nc(1)}return a};return r._n=!0,r._c=!0,r._d=!0,r}function dr(e,t){if(le===null)return e;const n=_o(le),r=e.dirs||(e.dirs=[]);for(let s=0;s<t.length;s++){let[i,a,l,c=At]=t[s];i&&(at(i)&&(i={mounted:i,updated:i}),i.deep&&Je(a),r.push({dir:i,instance:n,value:a,oldValue:void 0,arg:l,modifiers:c}))}return e}function Bn(e,t,n,r){const s=e.dirs,i=t&&t.dirs;for(let a=0;a<s.length;a++){const l=s[a];i&&(l.oldValue=i[a].value);let c=l.dir[r];c&&(Ze(),$e(c,n,8,[e.el,l,e,t]),tn())}}const ig=Symbol("_vte"),og=e=>e.__isTeleport,ag=Symbol("_leaveCb");function ul(e,t){e.shapeFlag&6&&e.component?(e.transition=t,ul(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function $s(e,t){return at(e)?ue({name:e.name},t,{setup:e}):e}function _f(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}const ji=new WeakMap;function gs(e,t,n,r,s=!1){if(nt(e)){e.forEach((V,M)=>gs(V,t&&(nt(t)?t[M]:t),n,r,s));return}if(Rr(r)&&!s){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&gs(e,t,n,r.component.subTree);return}const i=r.shapeFlag&4?_o(r.component):r.el,a=s?null:i,{i:l,r:c}=e,f=t&&t.r,d=l.refs===At?l.refs={}:l.refs,p=l.setupState,_=gt(p),b=p===At?Mh:V=>vt(_,V);if(f!=null&&f!==c){if(Wu(t),jt(f))d[f]=null,b(f)&&(p[f]=null);else if(Mt(f)){f.value=null;const V=t;V.k&&(d[V.k]=null)}}if(at(c))js(c,l,12,[a,d]);else{const V=jt(c),M=Mt(c);if(V||M){const L=()=>{if(e.f){const W=V?b(c)?p[c]:d[c]:c.value;if(s)nt(W)&&Xa(W,i);else if(nt(W))W.includes(i)||W.push(i);else if(V)d[c]=[i],b(c)&&(p[c]=d[c]);else{const G=[i];c.value=G,e.k&&(d[e.k]=G)}}else V?(d[c]=a,b(c)&&(p[c]=a)):M&&(c.value=a,e.k&&(d[e.k]=a))};if(a){const W=()=>{L(),ji.delete(e)};W.id=-1,ji.set(e,W),ye(W,n)}else Wu(e),L()}}}function Wu(e){const t=ji.get(e);t&&(t.flags|=8,ji.delete(e))}uo().requestIdleCallback;uo().cancelIdleCallback;const Rr=e=>!!e.type.__asyncLoader,yf=e=>e.type.__isKeepAlive;function lg(e,t){vf(e,"a",t)}function ug(e,t){vf(e,"da",t)}function vf(e,t,n=pe){const r=e.__wdc||(e.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return e()});if(po(t,r,n),n){let s=n.parent;for(;s&&s.parent;)yf(s.parent.vnode)&&cg(r,t,n,s),s=s.parent}}function cg(e,t,n,r){const s=po(t,e,r,!0);Ef(()=>{Xa(r[t],s)},n)}function po(e,t,n=pe,r=!1){if(n){const s=n[e]||(n[e]=[]),i=t.__weh||(t.__weh=(...a)=>{Ze();const l=qs(n),c=$e(t,n,e,a);return l(),tn(),c});return r?s.unshift(i):s.push(i),i}}const on=e=>(t,n=pe)=>{(!Vs||e==="sp")&&po(e,(...r)=>t(...r),n)},hg=on("bm"),fg=on("m"),dg=on("bu"),pg=on("u"),mg=on("bum"),Ef=on("um"),gg=on("sp"),_g=on("rtg"),yg=on("rtc");function vg(e,t=pe){po("ec",e,t)}const Eg=Symbol.for("v-ndc");function pn(e,t,n,r){let s;const i=n,a=nt(e);if(a||jt(e)){const l=a&&_n(e);let c=!1,f=!1;l&&(c=!Ae(e),f=bn(e),e=co(e)),s=new Array(e.length);for(let d=0,p=e.length;d<p;d++)s[d]=t(c?f?Mi(Jt(e[d])):Jt(e[d]):e[d],d,void 0,i)}else if(typeof e=="number"){s=new Array(e);for(let l=0;l<e;l++)s[l]=t(l+1,l,void 0,i)}else if(Rt(e))if(e[Symbol.iterator])s=Array.from(e,(l,c)=>t(l,c,void 0,i));else{const l=Object.keys(e);s=new Array(l.length);for(let c=0,f=l.length;c<f;c++){const d=l[c];s[c]=t(e[d],d,c,i)}}else s=[];return s}function Ai(e,t,n={},r,s){if(le.ce||le.parent&&Rr(le.parent)&&le.parent.ce){const f=Object.keys(n).length>0;return t!=="default"&&(n.name=t),yt(),Gn(kt,null,[ge("slot",n,r)],f?-2:64)}let i=e[t];i&&i._c&&(i._d=!1),yt();const a=i&&Tf(i(n)),l=n.key||a&&a.key,c=Gn(kt,{key:(l&&!Pe(l)?l:`_${t}`)+(!a&&r?"_fb":"")},a||[],a&&e._===1?64:-2);return!s&&c.scopeId&&(c.slotScopeIds=[c.scopeId+"-s"]),i&&i._c&&(i._d=!0),c}function Tf(e){return e.some(t=>fl(t)?!(t.type===en||t.type===kt&&!Tf(t.children)):!0)?e:null}const _a=e=>e?$f(e)?_o(e):_a(e.parent):null,_s=ue(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>_a(e.parent),$root:e=>_a(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>wf(e),$forceUpdate:e=>e.f||(e.f=()=>{ll(e.update)}),$nextTick:e=>e.n||(e.n=ff.bind(e.proxy)),$watch:e=>qg.bind(e)}),Zo=(e,t)=>e!==At&&!e.__isScriptSetup&&vt(e,t),Tg={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:n,setupState:r,data:s,props:i,accessCache:a,type:l,appContext:c}=e;let f;if(t[0]!=="$"){const b=a[t];if(b!==void 0)switch(b){case 1:return r[t];case 2:return s[t];case 4:return n[t];case 3:return i[t]}else{if(Zo(r,t))return a[t]=1,r[t];if(s!==At&&vt(s,t))return a[t]=2,s[t];if((f=e.propsOptions[0])&&vt(f,t))return a[t]=3,i[t];if(n!==At&&vt(n,t))return a[t]=4,n[t];ya&&(a[t]=0)}}const d=_s[t];let p,_;if(d)return t==="$attrs"&&oe(e.attrs,"get",""),d(e);if((p=l.__cssModules)&&(p=p[t]))return p;if(n!==At&&vt(n,t))return a[t]=4,n[t];if(_=c.config.globalProperties,vt(_,t))return _[t]},set({_:e},t,n){const{data:r,setupState:s,ctx:i}=e;return Zo(s,t)?(s[t]=n,!0):r!==At&&vt(r,t)?(r[t]=n,!0):vt(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(i[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:r,appContext:s,propsOptions:i,type:a}},l){let c,f;return!!(n[l]||e!==At&&l[0]!=="$"&&vt(e,l)||Zo(t,l)||(c=i[0])&&vt(c,l)||vt(r,l)||vt(_s,l)||vt(s.config.globalProperties,l)||(f=a.__cssModules)&&f[l])},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:vt(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function Gu(e){return nt(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}let ya=!0;function Ig(e){const t=wf(e),n=e.proxy,r=e.ctx;ya=!1,t.beforeCreate&&Qu(t.beforeCreate,e,"bc");const{data:s,computed:i,methods:a,watch:l,provide:c,inject:f,created:d,beforeMount:p,mounted:_,beforeUpdate:b,updated:V,activated:M,deactivated:L,beforeDestroy:W,beforeUnmount:G,destroyed:Q,unmounted:z,render:lt,renderTracked:It,renderTriggered:I,errorCaptured:g,serverPrefetch:y,expose:T,inheritAttrs:w,components:S,directives:E,filters:ce}=t;if(f&&wg(f,r,null),a)for(const it in a){const pt=a[it];at(pt)&&(r[it]=pt.bind(n))}if(s){const it=s.call(n,n);Rt(it)&&(e.data=ho(it))}if(ya=!0,i)for(const it in i){const pt=i[it],be=at(pt)?pt.bind(n,n):at(pt.get)?pt.get.bind(n,n):Fe,Nn=!at(pt)&&at(pt.set)?pt.set.bind(n):Fe,He=Hf({get:be,set:Nn});Object.defineProperty(r,it,{enumerable:!0,configurable:!0,get:()=>He.value,set:$t=>He.value=$t})}if(l)for(const it in l)If(l[it],r,n,it);if(c){const it=at(c)?c.call(n):c;Reflect.ownKeys(it).forEach(pt=>{Pg(pt,it[pt])})}d&&Qu(d,e,"c");function Vt(it,pt){nt(pt)?pt.forEach(be=>it(be.bind(n))):pt&&it(pt.bind(n))}if(Vt(hg,p),Vt(fg,_),Vt(dg,b),Vt(pg,V),Vt(lg,M),Vt(ug,L),Vt(vg,g),Vt(yg,It),Vt(_g,I),Vt(mg,G),Vt(Ef,z),Vt(gg,y),nt(T))if(T.length){const it=e.exposed||(e.exposed={});T.forEach(pt=>{Object.defineProperty(it,pt,{get:()=>n[pt],set:be=>n[pt]=be,enumerable:!0})})}else e.exposed||(e.exposed={});lt&&e.render===Fe&&(e.render=lt),w!=null&&(e.inheritAttrs=w),S&&(e.components=S),E&&(e.directives=E),y&&_f(e)}function wg(e,t,n=Fe){nt(e)&&(e=va(e));for(const r in e){const s=e[r];let i;Rt(s)?"default"in s?i=ys(s.from||r,s.default,!0):i=ys(s.from||r):i=ys(s),Mt(i)?Object.defineProperty(t,r,{enumerable:!0,configurable:!0,get:()=>i.value,set:a=>i.value=a}):t[r]=i}}function Qu(e,t,n){$e(nt(e)?e.map(r=>r.bind(t.proxy)):e.bind(t.proxy),t,n)}function If(e,t,n,r){let s=r.includes(".")?Mf(n,r):()=>n[r];if(jt(e)){const i=t[e];at(i)&&bi(s,i)}else if(at(e))bi(s,e.bind(n));else if(Rt(e))if(nt(e))e.forEach(i=>If(i,t,n,r));else{const i=at(e.handler)?e.handler.bind(n):t[e.handler];at(i)&&bi(s,i,e)}}function wf(e){const t=e.type,{mixins:n,extends:r}=t,{mixins:s,optionsCache:i,config:{optionMergeStrategies:a}}=e.appContext,l=i.get(t);let c;return l?c=l:!s.length&&!n&&!r?c=t:(c={},s.length&&s.forEach(f=>$i(c,f,a,!0)),$i(c,t,a)),Rt(t)&&i.set(t,c),c}function $i(e,t,n,r=!1){const{mixins:s,extends:i}=t;i&&$i(e,i,n,!0),s&&s.forEach(a=>$i(e,a,n,!0));for(const a in t)if(!(r&&a==="expose")){const l=Ag[a]||n&&n[a];e[a]=l?l(e[a],t[a]):t[a]}return e}const Ag={data:Xu,props:Ju,emits:Ju,methods:ls,computed:ls,beforeCreate:fe,created:fe,beforeMount:fe,mounted:fe,beforeUpdate:fe,updated:fe,beforeDestroy:fe,beforeUnmount:fe,destroyed:fe,unmounted:fe,activated:fe,deactivated:fe,errorCaptured:fe,serverPrefetch:fe,components:ls,directives:ls,watch:Sg,provide:Xu,inject:bg};function Xu(e,t){return t?e?function(){return ue(at(e)?e.call(this,this):e,at(t)?t.call(this,this):t)}:t:e}function bg(e,t){return ls(va(e),va(t))}function va(e){if(nt(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function fe(e,t){return e?[...new Set([].concat(e,t))]:t}function ls(e,t){return e?ue(Object.create(null),e,t):t}function Ju(e,t){return e?nt(e)&&nt(t)?[...new Set([...e,...t])]:ue(Object.create(null),Gu(e),Gu(t??{})):t}function Sg(e,t){if(!e)return t;if(!t)return e;const n=ue(Object.create(null),e);for(const r in t)n[r]=fe(e[r],t[r]);return n}function Af(){return{app:null,config:{isNativeTag:Mh,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Rg=0;function Cg(e,t){return function(r,s=null){at(r)||(r=ue({},r)),s!=null&&!Rt(s)&&(s=null);const i=Af(),a=new WeakSet,l=[];let c=!1;const f=i.app={_uid:Rg++,_component:r,_props:s,_container:null,_context:i,_instance:null,version:h_,get config(){return i.config},set config(d){},use(d,...p){return a.has(d)||(d&&at(d.install)?(a.add(d),d.install(f,...p)):at(d)&&(a.add(d),d(f,...p))),f},mixin(d){return i.mixins.includes(d)||i.mixins.push(d),f},component(d,p){return p?(i.components[d]=p,f):i.components[d]},directive(d,p){return p?(i.directives[d]=p,f):i.directives[d]},mount(d,p,_){if(!c){const b=f._ceVNode||ge(r,s);return b.appContext=i,_===!0?_="svg":_===!1&&(_=void 0),e(b,d,_),c=!0,f._container=d,d.__vue_app__=f,_o(b.component)}},onUnmount(d){l.push(d)},unmount(){c&&($e(l,f._instance,16),e(null,f._container),delete f._container.__vue_app__)},provide(d,p){return i.provides[d]=p,f},runWithContext(d){const p=Wn;Wn=f;try{return d()}finally{Wn=p}}};return f}}let Wn=null;function Pg(e,t){if(pe){let n=pe.provides;const r=pe.parent&&pe.parent.provides;r===n&&(n=pe.provides=Object.create(r)),n[e]=t}}function ys(e,t,n=!1){const r=jf();if(r||Wn){let s=Wn?Wn._context.provides:r?r.parent==null||r.ce?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(s&&e in s)return s[e];if(arguments.length>1)return n&&at(t)?t.call(r&&r.proxy):t}}function Vg(){return!!(jf()||Wn)}const bf={},Sf=()=>Object.create(bf),Rf=e=>Object.getPrototypeOf(e)===bf;function Dg(e,t,n,r=!1){const s={},i=Sf();e.propsDefaults=Object.create(null),Cf(e,t,s,i);for(const a in e.propsOptions[0])a in s||(s[a]=void 0);n?e.props=r?s:zm(s):e.type.props?e.props=s:e.props=i,e.attrs=i}function xg(e,t,n,r){const{props:s,attrs:i,vnode:{patchFlag:a}}=e,l=gt(s),[c]=e.propsOptions;let f=!1;if((r||a>0)&&!(a&16)){if(a&8){const d=e.vnode.dynamicProps;for(let p=0;p<d.length;p++){let _=d[p];if(mo(e.emitsOptions,_))continue;const b=t[_];if(c)if(vt(i,_))b!==i[_]&&(i[_]=b,f=!0);else{const V=An(_);s[V]=Ea(c,l,V,b,e,!1)}else b!==i[_]&&(i[_]=b,f=!0)}}}else{Cf(e,t,s,i)&&(f=!0);let d;for(const p in l)(!t||!vt(t,p)&&((d=tr(p))===p||!vt(t,d)))&&(c?n&&(n[p]!==void 0||n[d]!==void 0)&&(s[p]=Ea(c,l,p,void 0,e,!0)):delete s[p]);if(i!==l)for(const p in i)(!t||!vt(t,p))&&(delete i[p],f=!0)}f&&Xe(e.attrs,"set","")}function Cf(e,t,n,r){const[s,i]=e.propsOptions;let a=!1,l;if(t)for(let c in t){if(ds(c))continue;const f=t[c];let d;s&&vt(s,d=An(c))?!i||!i.includes(d)?n[d]=f:(l||(l={}))[d]=f:mo(e.emitsOptions,c)||(!(c in r)||f!==r[c])&&(r[c]=f,a=!0)}if(i){const c=gt(n),f=l||At;for(let d=0;d<i.length;d++){const p=i[d];n[p]=Ea(s,c,p,f[p],e,!vt(f,p))}}return a}function Ea(e,t,n,r,s,i){const a=e[n];if(a!=null){const l=vt(a,"default");if(l&&r===void 0){const c=a.default;if(a.type!==Function&&!a.skipFactory&&at(c)){const{propsDefaults:f}=s;if(n in f)r=f[n];else{const d=qs(s);r=f[n]=c.call(null,t),d()}}else r=c;s.ce&&s.ce._setProp(n,r)}a[0]&&(i&&!l?r=!1:a[1]&&(r===""||r===tr(n))&&(r=!0))}return r}const Ng=new WeakMap;function Pf(e,t,n=!1){const r=n?Ng:t.propsCache,s=r.get(e);if(s)return s;const i=e.props,a={},l=[];let c=!1;if(!at(e)){const d=p=>{c=!0;const[_,b]=Pf(p,t,!0);ue(a,_),b&&l.push(...b)};!n&&t.mixins.length&&t.mixins.forEach(d),e.extends&&d(e.extends),e.mixins&&e.mixins.forEach(d)}if(!i&&!c)return Rt(e)&&r.set(e,Ar),Ar;if(nt(i))for(let d=0;d<i.length;d++){const p=An(i[d]);Yu(p)&&(a[p]=At)}else if(i)for(const d in i){const p=An(d);if(Yu(p)){const _=i[d],b=a[p]=nt(_)||at(_)?{type:_}:ue({},_),V=b.type;let M=!1,L=!0;if(nt(V))for(let W=0;W<V.length;++W){const G=V[W],Q=at(G)&&G.name;if(Q==="Boolean"){M=!0;break}else Q==="String"&&(L=!1)}else M=at(V)&&V.name==="Boolean";b[0]=M,b[1]=L,(M||vt(b,"default"))&&l.push(p)}}const f=[a,l];return Rt(e)&&r.set(e,f),f}function Yu(e){return e[0]!=="$"&&!ds(e)}const cl=e=>e==="_"||e==="_ctx"||e==="$stable",hl=e=>nt(e)?e.map(Me):[Me(e)],Og=(e,t,n)=>{if(t._n)return t;const r=as((...s)=>hl(t(...s)),n);return r._c=!1,r},Vf=(e,t,n)=>{const r=e._ctx;for(const s in e){if(cl(s))continue;const i=e[s];if(at(i))t[s]=Og(s,i,r);else if(i!=null){const a=hl(i);t[s]=()=>a}}},Df=(e,t)=>{const n=hl(t);e.slots.default=()=>n},xf=(e,t,n)=>{for(const r in t)(n||!cl(r))&&(e[r]=t[r])},kg=(e,t,n)=>{const r=e.slots=Sf();if(e.vnode.shapeFlag&32){const s=t._;s?(xf(r,t,n),n&&$h(r,"_",s,!0)):Vf(t,r)}else t&&Df(e,t)},Mg=(e,t,n)=>{const{vnode:r,slots:s}=e;let i=!0,a=At;if(r.shapeFlag&32){const l=t._;l?n&&l===1?i=!1:xf(s,t,n):(i=!t.$stable,Vf(t,s)),a=t}else t&&(Df(e,t),a={default:1});if(i)for(const l in s)!cl(l)&&a[l]==null&&delete s[l]},ye=Jg;function Fg(e){return Lg(e)}function Lg(e,t){const n=uo();n.__VUE__=!0;const{insert:r,remove:s,patchProp:i,createElement:a,createText:l,createComment:c,setText:f,setElementText:d,parentNode:p,nextSibling:_,setScopeId:b=Fe,insertStaticContent:V}=e,M=(v,A,P,F=null,N=null,O=null,$=void 0,B=null,U=!!A.dynamicChildren)=>{if(v===A)return;v&&!is(v,A)&&(F=ze(v),$t(v,N,O,!0),v=null),A.patchFlag===-2&&(U=!1,A.dynamicChildren=null);const{type:k,ref:Y,shapeFlag:q}=A;switch(k){case go:L(v,A,P,F);break;case en:W(v,A,P,F);break;case ea:v==null&&G(A,P,F,$);break;case kt:S(v,A,P,F,N,O,$,B,U);break;default:q&1?lt(v,A,P,F,N,O,$,B,U):q&6?E(v,A,P,F,N,O,$,B,U):(q&64||q&128)&&k.process(v,A,P,F,N,O,$,B,U,xe)}Y!=null&&N?gs(Y,v&&v.ref,O,A||v,!A):Y==null&&v&&v.ref!=null&&gs(v.ref,null,O,v,!0)},L=(v,A,P,F)=>{if(v==null)r(A.el=l(A.children),P,F);else{const N=A.el=v.el;A.children!==v.children&&f(N,A.children)}},W=(v,A,P,F)=>{v==null?r(A.el=c(A.children||""),P,F):A.el=v.el},G=(v,A,P,F)=>{[v.el,v.anchor]=V(v.children,A,P,F,v.el,v.anchor)},Q=({el:v,anchor:A},P,F)=>{let N;for(;v&&v!==A;)N=_(v),r(v,P,F),v=N;r(A,P,F)},z=({el:v,anchor:A})=>{let P;for(;v&&v!==A;)P=_(v),s(v),v=P;s(A)},lt=(v,A,P,F,N,O,$,B,U)=>{if(A.type==="svg"?$="svg":A.type==="math"&&($="mathml"),v==null)It(A,P,F,N,O,$,B,U);else{const k=v.el&&v.el._isVueCE?v.el:null;try{k&&k._beginPatch(),y(v,A,N,O,$,B,U)}finally{k&&k._endPatch()}}},It=(v,A,P,F,N,O,$,B)=>{let U,k;const{props:Y,shapeFlag:q,transition:X,dirs:et}=v;if(U=v.el=a(v.type,O,Y&&Y.is,Y),q&8?d(U,v.children):q&16&&g(v.children,U,null,F,N,ta(v,O),$,B),et&&Bn(v,null,F,"created"),I(U,v,v.scopeId,$,F),Y){for(const ot in Y)ot!=="value"&&!ds(ot)&&i(U,ot,null,Y[ot],O,F);"value"in Y&&i(U,"value",null,Y.value,O),(k=Y.onVnodeBeforeMount)&&Ne(k,F,v)}et&&Bn(v,null,F,"beforeMount");const Z=Ug(N,X);Z&&X.beforeEnter(U),r(U,A,P),((k=Y&&Y.onVnodeMounted)||Z||et)&&ye(()=>{k&&Ne(k,F,v),Z&&X.enter(U),et&&Bn(v,null,F,"mounted")},N)},I=(v,A,P,F,N)=>{if(P&&b(v,P),F)for(let O=0;O<F.length;O++)b(v,F[O]);if(N){let O=N.subTree;if(A===O||Lf(O.type)&&(O.ssContent===A||O.ssFallback===A)){const $=N.vnode;I(v,$,$.scopeId,$.slotScopeIds,N.parent)}}},g=(v,A,P,F,N,O,$,B,U=0)=>{for(let k=U;k<v.length;k++){const Y=v[k]=B?dn(v[k]):Me(v[k]);M(null,Y,A,P,F,N,O,$,B)}},y=(v,A,P,F,N,O,$)=>{const B=A.el=v.el;let{patchFlag:U,dynamicChildren:k,dirs:Y}=A;U|=v.patchFlag&16;const q=v.props||At,X=A.props||At;let et;if(P&&jn(P,!1),(et=X.onVnodeBeforeUpdate)&&Ne(et,P,A,v),Y&&Bn(A,v,P,"beforeUpdate"),P&&jn(P,!0),(q.innerHTML&&X.innerHTML==null||q.textContent&&X.textContent==null)&&d(B,""),k?T(v.dynamicChildren,k,B,P,F,ta(A,N),O):$||pt(v,A,B,null,P,F,ta(A,N),O,!1),U>0){if(U&16)w(B,q,X,P,N);else if(U&2&&q.class!==X.class&&i(B,"class",null,X.class,N),U&4&&i(B,"style",q.style,X.style,N),U&8){const Z=A.dynamicProps;for(let ot=0;ot<Z.length;ot++){const ht=Z[ot],Kt=q[ht],Wt=X[ht];(Wt!==Kt||ht==="value")&&i(B,ht,Kt,Wt,N,P)}}U&1&&v.children!==A.children&&d(B,A.children)}else!$&&k==null&&w(B,q,X,P,N);((et=X.onVnodeUpdated)||Y)&&ye(()=>{et&&Ne(et,P,A,v),Y&&Bn(A,v,P,"updated")},F)},T=(v,A,P,F,N,O,$)=>{for(let B=0;B<A.length;B++){const U=v[B],k=A[B],Y=U.el&&(U.type===kt||!is(U,k)||U.shapeFlag&198)?p(U.el):P;M(U,k,Y,null,F,N,O,$,!0)}},w=(v,A,P,F,N)=>{if(A!==P){if(A!==At)for(const O in A)!ds(O)&&!(O in P)&&i(v,O,A[O],null,N,F);for(const O in P){if(ds(O))continue;const $=P[O],B=A[O];$!==B&&O!=="value"&&i(v,O,B,$,N,F)}"value"in P&&i(v,"value",A.value,P.value,N)}},S=(v,A,P,F,N,O,$,B,U)=>{const k=A.el=v?v.el:l(""),Y=A.anchor=v?v.anchor:l("");let{patchFlag:q,dynamicChildren:X,slotScopeIds:et}=A;et&&(B=B?B.concat(et):et),v==null?(r(k,P,F),r(Y,P,F),g(A.children||[],P,Y,N,O,$,B,U)):q>0&&q&64&&X&&v.dynamicChildren?(T(v.dynamicChildren,X,P,N,O,$,B),(A.key!=null||N&&A===N.subTree)&&Nf(v,A,!0)):pt(v,A,P,Y,N,O,$,B,U)},E=(v,A,P,F,N,O,$,B,U)=>{A.slotScopeIds=B,v==null?A.shapeFlag&512?N.ctx.activate(A,P,F,$,U):ce(A,P,F,N,O,$,U):De(v,A,U)},ce=(v,A,P,F,N,O,$)=>{const B=v.component=i_(v,F,N);if(yf(v)&&(B.ctx.renderer=xe),o_(B,!1,$),B.asyncDep){if(N&&N.registerDep(B,Vt,$),!v.el){const U=B.subTree=ge(en);W(null,U,A,P),v.placeholder=U.el}}else Vt(B,v,A,P,N,O,$)},De=(v,A,P)=>{const F=A.component=v.component;if(Qg(v,A,P))if(F.asyncDep&&!F.asyncResolved){it(F,A,P);return}else F.next=A,F.update();else A.el=v.el,F.vnode=A},Vt=(v,A,P,F,N,O,$)=>{const B=()=>{if(v.isMounted){let{next:q,bu:X,u:et,parent:Z,vnode:ot}=v;{const te=Of(v);if(te){q&&(q.el=ot.el,it(v,q,$)),te.asyncDep.then(()=>{v.isUnmounted||B()});return}}let ht=q,Kt;jn(v,!1),q?(q.el=ot.el,it(v,q,$)):q=ot,X&&wi(X),(Kt=q.props&&q.props.onVnodeBeforeUpdate)&&Ne(Kt,Z,q,ot),jn(v,!0);const Wt=tc(v),Ee=v.subTree;v.subTree=Wt,M(Ee,Wt,p(Ee.el),ze(Ee),v,N,O),q.el=Wt.el,ht===null&&Xg(v,Wt.el),et&&ye(et,N),(Kt=q.props&&q.props.onVnodeUpdated)&&ye(()=>Ne(Kt,Z,q,ot),N)}else{let q;const{el:X,props:et}=A,{bm:Z,m:ot,parent:ht,root:Kt,type:Wt}=v,Ee=Rr(A);jn(v,!1),Z&&wi(Z),!Ee&&(q=et&&et.onVnodeBeforeMount)&&Ne(q,ht,A),jn(v,!0);{Kt.ce&&Kt.ce._def.shadowRoot!==!1&&Kt.ce._injectChildStyle(Wt);const te=v.subTree=tc(v);M(null,te,P,F,v,N,O),A.el=te.el}if(ot&&ye(ot,N),!Ee&&(q=et&&et.onVnodeMounted)){const te=A;ye(()=>Ne(q,ht,te),N)}(A.shapeFlag&256||ht&&Rr(ht.vnode)&&ht.vnode.shapeFlag&256)&&v.a&&ye(v.a,N),v.isMounted=!0,A=P=F=null}};v.scope.on();const U=v.effect=new Qh(B);v.scope.off();const k=v.update=U.run.bind(U),Y=v.job=U.runIfDirty.bind(U);Y.i=v,Y.id=v.uid,U.scheduler=()=>ll(Y),jn(v,!0),k()},it=(v,A,P)=>{A.component=v;const F=v.vnode.props;v.vnode=A,v.next=null,xg(v,A.props,F,P),Mg(v,A.children,P),Ze(),Ku(v),tn()},pt=(v,A,P,F,N,O,$,B,U=!1)=>{const k=v&&v.children,Y=v?v.shapeFlag:0,q=A.children,{patchFlag:X,shapeFlag:et}=A;if(X>0){if(X&128){Nn(k,q,P,F,N,O,$,B,U);return}else if(X&256){be(k,q,P,F,N,O,$,B,U);return}}et&8?(Y&16&&kn(k,N,O),q!==k&&d(P,q)):Y&16?et&16?Nn(k,q,P,F,N,O,$,B,U):kn(k,N,O,!0):(Y&8&&d(P,""),et&16&&g(q,P,F,N,O,$,B,U))},be=(v,A,P,F,N,O,$,B,U)=>{v=v||Ar,A=A||Ar;const k=v.length,Y=A.length,q=Math.min(k,Y);let X;for(X=0;X<q;X++){const et=A[X]=U?dn(A[X]):Me(A[X]);M(v[X],et,P,null,N,O,$,B,U)}k>Y?kn(v,N,O,!0,!1,q):g(A,P,F,N,O,$,B,U,q)},Nn=(v,A,P,F,N,O,$,B,U)=>{let k=0;const Y=A.length;let q=v.length-1,X=Y-1;for(;k<=q&&k<=X;){const et=v[k],Z=A[k]=U?dn(A[k]):Me(A[k]);if(is(et,Z))M(et,Z,P,null,N,O,$,B,U);else break;k++}for(;k<=q&&k<=X;){const et=v[q],Z=A[X]=U?dn(A[X]):Me(A[X]);if(is(et,Z))M(et,Z,P,null,N,O,$,B,U);else break;q--,X--}if(k>q){if(k<=X){const et=X+1,Z=et<Y?A[et].el:F;for(;k<=X;)M(null,A[k]=U?dn(A[k]):Me(A[k]),P,Z,N,O,$,B,U),k++}}else if(k>X)for(;k<=q;)$t(v[k],N,O,!0),k++;else{const et=k,Z=k,ot=new Map;for(k=Z;k<=X;k++){const Gt=A[k]=U?dn(A[k]):Me(A[k]);Gt.key!=null&&ot.set(Gt.key,k)}let ht,Kt=0;const Wt=X-Z+1;let Ee=!1,te=0;const an=new Array(Wt);for(k=0;k<Wt;k++)an[k]=0;for(k=et;k<=q;k++){const Gt=v[k];if(Kt>=Wt){$t(Gt,N,O,!0);continue}let Te;if(Gt.key!=null)Te=ot.get(Gt.key);else for(ht=Z;ht<=X;ht++)if(an[ht-Z]===0&&is(Gt,A[ht])){Te=ht;break}Te===void 0?$t(Gt,N,O,!0):(an[Te-Z]=k+1,Te>=te?te=Te:Ee=!0,M(Gt,A[Te],P,null,N,O,$,B,U),Kt++)}const zr=Ee?Bg(an):Ar;for(ht=zr.length-1,k=Wt-1;k>=0;k--){const Gt=Z+k,Te=A[Gt],Ys=A[Gt+1],ar=Gt+1<Y?Ys.el||Ys.placeholder:F;an[k]===0?M(null,Te,P,ar,N,O,$,B,U):Ee&&(ht<0||k!==zr[ht]?He(Te,P,ar,2):ht--)}}},He=(v,A,P,F,N=null)=>{const{el:O,type:$,transition:B,children:U,shapeFlag:k}=v;if(k&6){He(v.component.subTree,A,P,F);return}if(k&128){v.suspense.move(A,P,F);return}if(k&64){$.move(v,A,P,xe);return}if($===kt){r(O,A,P);for(let q=0;q<U.length;q++)He(U[q],A,P,F);r(v.anchor,A,P);return}if($===ea){Q(v,A,P);return}if(F!==2&&k&1&&B)if(F===0)B.beforeEnter(O),r(O,A,P),ye(()=>B.enter(O),N);else{const{leave:q,delayLeave:X,afterLeave:et}=B,Z=()=>{v.ctx.isUnmounted?s(O):r(O,A,P)},ot=()=>{O._isLeaving&&O[ag](!0),q(O,()=>{Z(),et&&et()})};X?X(O,Z,ot):ot()}else r(O,A,P)},$t=(v,A,P,F=!1,N=!1)=>{const{type:O,props:$,ref:B,children:U,dynamicChildren:k,shapeFlag:Y,patchFlag:q,dirs:X,cacheIndex:et}=v;if(q===-2&&(N=!1),B!=null&&(Ze(),gs(B,null,P,v,!0),tn()),et!=null&&(A.renderCache[et]=void 0),Y&256){A.ctx.deactivate(v);return}const Z=Y&1&&X,ot=!Rr(v);let ht;if(ot&&(ht=$&&$.onVnodeBeforeUnmount)&&Ne(ht,A,v),Y&6)On(v.component,P,F);else{if(Y&128){v.suspense.unmount(P,F);return}Z&&Bn(v,null,A,"beforeUnmount"),Y&64?v.type.remove(v,A,P,xe,F):k&&!k.hasOnce&&(O!==kt||q>0&&q&64)?kn(k,A,P,!1,!0):(O===kt&&q&384||!N&&Y&16)&&kn(U,A,P),F&&qt(v)}(ot&&(ht=$&&$.onVnodeUnmounted)||Z)&&ye(()=>{ht&&Ne(ht,A,v),Z&&Bn(v,null,A,"unmounted")},P)},qt=v=>{const{type:A,el:P,anchor:F,transition:N}=v;if(A===kt){No(P,F);return}if(A===ea){z(v);return}const O=()=>{s(P),N&&!N.persisted&&N.afterLeave&&N.afterLeave()};if(v.shapeFlag&1&&N&&!N.persisted){const{leave:$,delayLeave:B}=N,U=()=>$(P,O);B?B(v.el,O,U):U()}else O()},No=(v,A)=>{let P;for(;v!==A;)P=_(v),s(v),v=P;s(A)},On=(v,A,P)=>{const{bum:F,scope:N,job:O,subTree:$,um:B,m:U,a:k}=v;Zu(U),Zu(k),F&&wi(F),N.stop(),O&&(O.flags|=8,$t($,v,A,P)),B&&ye(B,A),ye(()=>{v.isUnmounted=!0},A)},kn=(v,A,P,F=!1,N=!1,O=0)=>{for(let $=O;$<v.length;$++)$t(v[$],A,P,F,N)},ze=v=>{if(v.shapeFlag&6)return ze(v.component.subTree);if(v.shapeFlag&128)return v.suspense.next();const A=_(v.anchor||v.el),P=A&&A[ig];return P?_(P):A};let qr=!1;const Js=(v,A,P)=>{v==null?A._vnode&&$t(A._vnode,null,null,!0):M(A._vnode||null,v,A,null,null,null,P),A._vnode=v,qr||(qr=!0,Ku(),pf(),qr=!1)},xe={p:M,um:$t,m:He,r:qt,mt:ce,mc:g,pc:pt,pbc:T,n:ze,o:e};return{render:Js,hydrate:void 0,createApp:Cg(Js)}}function ta({type:e,props:t},n){return n==="svg"&&e==="foreignObject"||n==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function jn({effect:e,job:t},n){n?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function Ug(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function Nf(e,t,n=!1){const r=e.children,s=t.children;if(nt(r)&&nt(s))for(let i=0;i<r.length;i++){const a=r[i];let l=s[i];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=s[i]=dn(s[i]),l.el=a.el),!n&&l.patchFlag!==-2&&Nf(a,l)),l.type===go&&l.patchFlag!==-1&&(l.el=a.el),l.type===en&&!l.el&&(l.el=a.el)}}function Bg(e){const t=e.slice(),n=[0];let r,s,i,a,l;const c=e.length;for(r=0;r<c;r++){const f=e[r];if(f!==0){if(s=n[n.length-1],e[s]<f){t[r]=s,n.push(r);continue}for(i=0,a=n.length-1;i<a;)l=i+a>>1,e[n[l]]<f?i=l+1:a=l;f<e[n[i]]&&(i>0&&(t[r]=n[i-1]),n[i]=r)}}for(i=n.length,a=n[i-1];i-- >0;)n[i]=a,a=t[a];return n}function Of(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:Of(t)}function Zu(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const jg=Symbol.for("v-scx"),$g=()=>ys(jg);function bi(e,t,n){return kf(e,t,n)}function kf(e,t,n=At){const{immediate:r,deep:s,flush:i,once:a}=n,l=ue({},n),c=t&&r||!t&&i!=="post";let f;if(Vs){if(i==="sync"){const b=$g();f=b.__watcherHandles||(b.__watcherHandles=[])}else if(!c){const b=()=>{};return b.stop=Fe,b.resume=Fe,b.pause=Fe,b}}const d=pe;l.call=(b,V,M)=>$e(b,d,V,M);let p=!1;i==="post"?l.scheduler=b=>{ye(b,d&&d.suspense)}:i!=="sync"&&(p=!0,l.scheduler=(b,V)=>{V?b():ll(b)}),l.augmentJob=b=>{t&&(b.flags|=4),p&&(b.flags|=2,d&&(b.id=d.uid,b.i=d))};const _=eg(e,t,l);return Vs&&(f?f.push(_):c&&_()),_}function qg(e,t,n){const r=this.proxy,s=jt(e)?e.includes(".")?Mf(r,e):()=>r[e]:e.bind(r,r);let i;at(t)?i=t:(i=t.handler,n=t);const a=qs(this),l=kf(s,i.bind(r),n);return a(),l}function Mf(e,t){const n=t.split(".");return()=>{let r=e;for(let s=0;s<n.length&&r;s++)r=r[n[s]];return r}}const Hg=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${An(t)}Modifiers`]||e[`${tr(t)}Modifiers`];function zg(e,t,...n){if(e.isUnmounted)return;const r=e.vnode.props||At;let s=n;const i=t.startsWith("update:"),a=i&&Hg(r,t.slice(7));a&&(a.trim&&(s=n.map(d=>jt(d)?d.trim():d)),a.number&&(s=n.map(Ya)));let l,c=r[l=Go(t)]||r[l=Go(An(t))];!c&&i&&(c=r[l=Go(tr(t))]),c&&$e(c,e,6,s);const f=r[l+"Once"];if(f){if(!e.emitted)e.emitted={};else if(e.emitted[l])return;e.emitted[l]=!0,$e(f,e,6,s)}}const Kg=new WeakMap;function Ff(e,t,n=!1){const r=n?Kg:t.emitsCache,s=r.get(e);if(s!==void 0)return s;const i=e.emits;let a={},l=!1;if(!at(e)){const c=f=>{const d=Ff(f,t,!0);d&&(l=!0,ue(a,d))};!n&&t.mixins.length&&t.mixins.forEach(c),e.extends&&c(e.extends),e.mixins&&e.mixins.forEach(c)}return!i&&!l?(Rt(e)&&r.set(e,null),null):(nt(i)?i.forEach(c=>a[c]=null):ue(a,i),Rt(e)&&r.set(e,a),a)}function mo(e,t){return!e||!ao(t)?!1:(t=t.slice(2).replace(/Once$/,""),vt(e,t[0].toLowerCase()+t.slice(1))||vt(e,tr(t))||vt(e,t))}function tc(e){const{type:t,vnode:n,proxy:r,withProxy:s,propsOptions:[i],slots:a,attrs:l,emit:c,render:f,renderCache:d,props:p,data:_,setupState:b,ctx:V,inheritAttrs:M}=e,L=Bi(e);let W,G;try{if(n.shapeFlag&4){const z=s||r,lt=z;W=Me(f.call(lt,z,d,p,b,_,V)),G=l}else{const z=t;W=Me(z.length>1?z(p,{attrs:l,slots:a,emit:c}):z(p,null)),G=t.props?l:Wg(l)}}catch(z){vs.length=0,fo(z,e,1),W=ge(en)}let Q=W;if(G&&M!==!1){const z=Object.keys(G),{shapeFlag:lt}=Q;z.length&&lt&7&&(i&&z.some(Qa)&&(G=Gg(G,i)),Q=Dr(Q,G,!1,!0))}return n.dirs&&(Q=Dr(Q,null,!1,!0),Q.dirs=Q.dirs?Q.dirs.concat(n.dirs):n.dirs),n.transition&&ul(Q,n.transition),W=Q,Bi(L),W}const Wg=e=>{let t;for(const n in e)(n==="class"||n==="style"||ao(n))&&((t||(t={}))[n]=e[n]);return t},Gg=(e,t)=>{const n={};for(const r in e)(!Qa(r)||!(r.slice(9)in t))&&(n[r]=e[r]);return n};function Qg(e,t,n){const{props:r,children:s,component:i}=e,{props:a,children:l,patchFlag:c}=t,f=i.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&c>=0){if(c&1024)return!0;if(c&16)return r?ec(r,a,f):!!a;if(c&8){const d=t.dynamicProps;for(let p=0;p<d.length;p++){const _=d[p];if(a[_]!==r[_]&&!mo(f,_))return!0}}}else return(s||l)&&(!l||!l.$stable)?!0:r===a?!1:r?a?ec(r,a,f):!0:!!a;return!1}function ec(e,t,n){const r=Object.keys(t);if(r.length!==Object.keys(e).length)return!0;for(let s=0;s<r.length;s++){const i=r[s];if(t[i]!==e[i]&&!mo(n,i))return!0}return!1}function Xg({vnode:e,parent:t},n){for(;t;){const r=t.subTree;if(r.suspense&&r.suspense.activeBranch===e&&(r.el=e.el),r===e)(e=t.vnode).el=n,t=t.parent;else break}}const Lf=e=>e.__isSuspense;function Jg(e,t){t&&t.pendingBranch?nt(e)?t.effects.push(...e):t.effects.push(e):sg(e)}const kt=Symbol.for("v-fgt"),go=Symbol.for("v-txt"),en=Symbol.for("v-cmt"),ea=Symbol.for("v-stc"),vs=[];let ve=null;function yt(e=!1){vs.push(ve=e?null:[])}function Yg(){vs.pop(),ve=vs[vs.length-1]||null}let Ps=1;function nc(e,t=!1){Ps+=e,e<0&&ve&&t&&(ve.hasOnce=!0)}function Uf(e){return e.dynamicChildren=Ps>0?ve||Ar:null,Yg(),Ps>0&&ve&&ve.push(e),e}function Dt(e,t,n,r,s,i){return Uf(_t(e,t,n,r,s,i,!0))}function Gn(e,t,n,r,s){return Uf(ge(e,t,n,r,s,!0))}function fl(e){return e?e.__v_isVNode===!0:!1}function is(e,t){return e.type===t.type&&e.key===t.key}const Bf=({key:e})=>e??null,Si=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?jt(e)||Mt(e)||at(e)?{i:le,r:e,k:t,f:!!n}:e:null);function _t(e,t=null,n=null,r=0,s=null,i=e===kt?0:1,a=!1,l=!1){const c={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Bf(t),ref:t&&Si(t),scopeId:gf,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:r,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:le};return l?(dl(c,n),i&128&&e.normalize(c)):n&&(c.shapeFlag|=jt(n)?8:16),Ps>0&&!a&&ve&&(c.patchFlag>0||i&6)&&c.patchFlag!==32&&ve.push(c),c}const ge=Zg;function Zg(e,t=null,n=null,r=0,s=null,i=!1){if((!e||e===Eg)&&(e=en),fl(e)){const l=Dr(e,t,!0);return n&&dl(l,n),Ps>0&&!i&&ve&&(l.shapeFlag&6?ve[ve.indexOf(e)]=l:ve.push(l)),l.patchFlag=-2,l}if(c_(e)&&(e=e.__vccOpts),t){t=t_(t);let{class:l,style:c}=t;l&&!jt(l)&&(t.class=Za(l)),Rt(c)&&(ol(c)&&!nt(c)&&(c=ue({},c)),t.style=Fr(c))}const a=jt(e)?1:Lf(e)?128:og(e)?64:Rt(e)?4:at(e)?2:0;return _t(e,t,n,r,s,a,i,!0)}function t_(e){return e?ol(e)||Rf(e)?ue({},e):e:null}function Dr(e,t,n=!1,r=!1){const{props:s,ref:i,patchFlag:a,children:l,transition:c}=e,f=t?n_(s||{},t):s,d={__v_isVNode:!0,__v_skip:!0,type:e.type,props:f,key:f&&Bf(f),ref:t&&t.ref?n&&i?nt(i)?i.concat(Si(t)):[i,Si(t)]:Si(t):i,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:l,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==kt?a===-1?16:a|16:a,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:c,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Dr(e.ssContent),ssFallback:e.ssFallback&&Dr(e.ssFallback),placeholder:e.placeholder,el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return c&&r&&ul(d,c.clone(d)),d}function vr(e=" ",t=0){return ge(go,null,e,t)}function e_(e="",t=!1){return t?(yt(),Gn(en,null,e)):ge(en,null,e)}function Me(e){return e==null||typeof e=="boolean"?ge(en):nt(e)?ge(kt,null,e.slice()):fl(e)?dn(e):ge(go,null,String(e))}function dn(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Dr(e)}function dl(e,t){let n=0;const{shapeFlag:r}=e;if(t==null)t=null;else if(nt(t))n=16;else if(typeof t=="object")if(r&65){const s=t.default;s&&(s._c&&(s._d=!1),dl(e,s()),s._c&&(s._d=!0));return}else{n=32;const s=t._;!s&&!Rf(t)?t._ctx=le:s===3&&le&&(le.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else at(t)?(t={default:t,_ctx:le},n=32):(t=String(t),r&64?(n=16,t=[vr(t)]):n=8);e.children=t,e.shapeFlag|=n}function n_(...e){const t={};for(let n=0;n<e.length;n++){const r=e[n];for(const s in r)if(s==="class")t.class!==r.class&&(t.class=Za([t.class,r.class]));else if(s==="style")t.style=Fr([t.style,r.style]);else if(ao(s)){const i=t[s],a=r[s];a&&i!==a&&!(nt(i)&&i.includes(a))&&(t[s]=i?[].concat(i,a):a)}else s!==""&&(t[s]=r[s])}return t}function Ne(e,t,n,r=null){$e(e,t,7,[n,r])}const r_=Af();let s_=0;function i_(e,t,n){const r=e.type,s=(t?t.appContext:e.appContext)||r_,i={uid:s_++,vnode:e,type:r,parent:t,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Kh(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(s.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Pf(r,s),emitsOptions:Ff(r,s),emit:null,emitted:null,propsDefaults:At,inheritAttrs:r.inheritAttrs,ctx:At,data:At,props:At,attrs:At,slots:At,refs:At,setupState:At,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=t?t.root:i,i.emit=zg.bind(null,i),e.ce&&e.ce(i),i}let pe=null;const jf=()=>pe||le;let qi,Ta;{const e=uo(),t=(n,r)=>{let s;return(s=e[n])||(s=e[n]=[]),s.push(r),i=>{s.length>1?s.forEach(a=>a(i)):s[0](i)}};qi=t("__VUE_INSTANCE_SETTERS__",n=>pe=n),Ta=t("__VUE_SSR_SETTERS__",n=>Vs=n)}const qs=e=>{const t=pe;return qi(e),e.scope.on(),()=>{e.scope.off(),qi(t)}},rc=()=>{pe&&pe.scope.off(),qi(null)};function $f(e){return e.vnode.shapeFlag&4}let Vs=!1;function o_(e,t=!1,n=!1){t&&Ta(t);const{props:r,children:s}=e.vnode,i=$f(e);Dg(e,r,i,t),kg(e,s,n||t);const a=i?a_(e,t):void 0;return t&&Ta(!1),a}function a_(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,Tg);const{setup:r}=n;if(r){Ze();const s=e.setupContext=r.length>1?u_(e):null,i=qs(e),a=js(r,e,0,[e.props,s]),l=Lh(a);if(tn(),i(),(l||e.sp)&&!Rr(e)&&_f(e),l){if(a.then(rc,rc),t)return a.then(c=>{sc(e,c)}).catch(c=>{fo(c,e,0)});e.asyncDep=a}else sc(e,a)}else qf(e)}function sc(e,t,n){at(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Rt(t)&&(e.setupState=cf(t)),qf(e)}function qf(e,t,n){const r=e.type;e.render||(e.render=r.render||Fe);{const s=qs(e);Ze();try{Ig(e)}finally{tn(),s()}}}const l_={get(e,t){return oe(e,"get",""),e[t]}};function u_(e){const t=n=>{e.exposed=n||{}};return{attrs:new Proxy(e.attrs,l_),slots:e.slots,emit:e.emit,expose:t}}function _o(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(cf(al(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in _s)return _s[n](e)},has(t,n){return n in t||n in _s}})):e.proxy}function c_(e){return at(e)&&"__vccOpts"in e}const Hf=(e,t)=>Zm(e,t,Vs),h_="3.5.24";/**
* @vue/runtime-dom v3.5.24
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Ia;const ic=typeof window<"u"&&window.trustedTypes;if(ic)try{Ia=ic.createPolicy("vue",{createHTML:e=>e})}catch{}const zf=Ia?e=>Ia.createHTML(e):e=>e,f_="http://www.w3.org/2000/svg",d_="http://www.w3.org/1998/Math/MathML",Qe=typeof document<"u"?document:null,oc=Qe&&Qe.createElement("template"),p_={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,r)=>{const s=t==="svg"?Qe.createElementNS(f_,e):t==="mathml"?Qe.createElementNS(d_,e):n?Qe.createElement(e,{is:n}):Qe.createElement(e);return e==="select"&&r&&r.multiple!=null&&s.setAttribute("multiple",r.multiple),s},createText:e=>Qe.createTextNode(e),createComment:e=>Qe.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Qe.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,r,s,i){const a=n?n.previousSibling:t.lastChild;if(s&&(s===i||s.nextSibling))for(;t.insertBefore(s.cloneNode(!0),n),!(s===i||!(s=s.nextSibling)););else{oc.innerHTML=zf(r==="svg"?`<svg>${e}</svg>`:r==="mathml"?`<math>${e}</math>`:e);const l=oc.content;if(r==="svg"||r==="mathml"){const c=l.firstChild;for(;c.firstChild;)l.appendChild(c.firstChild);l.removeChild(c)}t.insertBefore(l,n)}return[a?a.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},m_=Symbol("_vtc");function g_(e,t,n){const r=e[m_];r&&(t=(t?[t,...r]:[...r]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const ac=Symbol("_vod"),__=Symbol("_vsh"),y_=Symbol(""),v_=/(?:^|;)\s*display\s*:/;function E_(e,t,n){const r=e.style,s=jt(n);let i=!1;if(n&&!s){if(t)if(jt(t))for(const a of t.split(";")){const l=a.slice(0,a.indexOf(":")).trim();n[l]==null&&Ri(r,l,"")}else for(const a in t)n[a]==null&&Ri(r,a,"");for(const a in n)a==="display"&&(i=!0),Ri(r,a,n[a])}else if(s){if(t!==n){const a=r[y_];a&&(n+=";"+a),r.cssText=n,i=v_.test(n)}}else t&&e.removeAttribute("style");ac in e&&(e[ac]=i?r.display:"",e[__]&&(r.display="none"))}const lc=/\s*!important$/;function Ri(e,t,n){if(nt(n))n.forEach(r=>Ri(e,t,r));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const r=T_(e,t);lc.test(n)?e.setProperty(tr(r),n.replace(lc,""),"important"):e[r]=n}}const uc=["Webkit","Moz","ms"],na={};function T_(e,t){const n=na[t];if(n)return n;let r=An(t);if(r!=="filter"&&r in e)return na[t]=r;r=jh(r);for(let s=0;s<uc.length;s++){const i=uc[s]+r;if(i in e)return na[t]=i}return t}const cc="http://www.w3.org/1999/xlink";function hc(e,t,n,r,s,i=wm(t)){r&&t.startsWith("xlink:")?n==null?e.removeAttributeNS(cc,t.slice(6,t.length)):e.setAttributeNS(cc,t,n):n==null||i&&!qh(n)?e.removeAttribute(t):e.setAttribute(t,i?"":Pe(n)?String(n):n)}function fc(e,t,n,r,s){if(t==="innerHTML"||t==="textContent"){n!=null&&(e[t]=t==="innerHTML"?zf(n):n);return}const i=e.tagName;if(t==="value"&&i!=="PROGRESS"&&!i.includes("-")){const l=i==="OPTION"?e.getAttribute("value")||"":e.value,c=n==null?e.type==="checkbox"?"on":"":String(n);(l!==c||!("_value"in e))&&(e.value=c),n==null&&e.removeAttribute(t),e._value=n;return}let a=!1;if(n===""||n==null){const l=typeof e[t];l==="boolean"?n=qh(n):n==null&&l==="string"?(n="",a=!0):l==="number"&&(n=0,a=!0)}try{e[t]=n}catch{}a&&e.removeAttribute(s||t)}function Hn(e,t,n,r){e.addEventListener(t,n,r)}function I_(e,t,n,r){e.removeEventListener(t,n,r)}const dc=Symbol("_vei");function w_(e,t,n,r,s=null){const i=e[dc]||(e[dc]={}),a=i[t];if(r&&a)a.value=r;else{const[l,c]=A_(t);if(r){const f=i[t]=R_(r,s);Hn(e,l,f,c)}else a&&(I_(e,l,a,c),i[t]=void 0)}}const pc=/(?:Once|Passive|Capture)$/;function A_(e){let t;if(pc.test(e)){t={};let r;for(;r=e.match(pc);)e=e.slice(0,e.length-r[0].length),t[r[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):tr(e.slice(2)),t]}let ra=0;const b_=Promise.resolve(),S_=()=>ra||(b_.then(()=>ra=0),ra=Date.now());function R_(e,t){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;$e(C_(r,n.value),t,5,[r])};return n.value=e,n.attached=S_(),n}function C_(e,t){if(nt(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(r=>s=>!s._stopped&&r&&r(s))}else return t}const mc=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,P_=(e,t,n,r,s,i)=>{const a=s==="svg";t==="class"?g_(e,r,a):t==="style"?E_(e,n,r):ao(t)?Qa(t)||w_(e,t,n,r,i):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):V_(e,t,r,a))?(fc(e,t,r),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&hc(e,t,r,a,i,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!jt(r))?fc(e,An(t),r,i,t):(t==="true-value"?e._trueValue=r:t==="false-value"&&(e._falseValue=r),hc(e,t,r,a))};function V_(e,t,n,r){if(r)return!!(t==="innerHTML"||t==="textContent"||t in e&&mc(t)&&at(n));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="sandbox"&&e.tagName==="IFRAME"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const s=e.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return mc(t)&&jt(n)?!1:t in e}const Hi=e=>{const t=e.props["onUpdate:modelValue"]||!1;return nt(t)?n=>wi(t,n):t};function D_(e){e.target.composing=!0}function gc(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const Cr=Symbol("_assign");function _c(e,t,n){return t&&(e=e.trim()),n&&(e=Ya(e)),e}const x_={created(e,{modifiers:{lazy:t,trim:n,number:r}},s){e[Cr]=Hi(s);const i=r||s.props&&s.props.type==="number";Hn(e,t?"change":"input",a=>{a.target.composing||e[Cr](_c(e.value,n,i))}),(n||i)&&Hn(e,"change",()=>{e.value=_c(e.value,n,i)}),t||(Hn(e,"compositionstart",D_),Hn(e,"compositionend",gc),Hn(e,"change",gc))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:n,modifiers:{lazy:r,trim:s,number:i}},a){if(e[Cr]=Hi(a),e.composing)return;const l=(i||e.type==="number")&&!/^0\d/.test(e.value)?Ya(e.value):e.value,c=t??"";l!==c&&(document.activeElement===e&&e.type!=="range"&&(r&&t===n||s&&e.value.trim()===c)||(e.value=c))}},os={created(e,{value:t},n){e.checked=Oi(t,n.props.value),e[Cr]=Hi(n),Hn(e,"change",()=>{e[Cr](N_(e))})},beforeUpdate(e,{value:t,oldValue:n},r){e[Cr]=Hi(r),t!==n&&(e.checked=Oi(t,r.props.value))}};function N_(e){return"_value"in e?e._value:e.value}const O_=ue({patchProp:P_},p_);let yc;function k_(){return yc||(yc=Fg(O_))}const M_=((...e)=>{const t=k_().createApp(...e),{mount:n}=t;return t.mount=r=>{const s=L_(r);if(!s)return;const i=t._component;!at(i)&&!i.render&&!i.template&&(i.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const a=n(s,!1,F_(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),a},t});function F_(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function L_(e){return jt(e)?document.querySelector(e):e}/*!
 * pinia v3.0.4
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let Kf;const yo=e=>Kf=e,Wf=Symbol();function wa(e){return e&&typeof e=="object"&&Object.prototype.toString.call(e)==="[object Object]"&&typeof e.toJSON!="function"}var Es;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(Es||(Es={}));function U_(){const e=Wh(!0),t=e.run(()=>Fi({}));let n=[],r=[];const s=al({install(i){yo(s),s._a=i,i.provide(Wf,s),i.config.globalProperties.$pinia=s,r.forEach(a=>n.push(a)),r=[]},use(i){return this._a?n.push(i):r.push(i),this},_p:n,_a:null,_e:e,_s:new Map,state:t});return s}const Gf=()=>{};function vc(e,t,n,r=Gf){e.add(t);const s=()=>{e.delete(t)&&r()};return!n&&Gh()&&bm(s),s}function pr(e,...t){e.forEach(n=>{n(...t)})}const B_=e=>e(),Ec=Symbol(),sa=Symbol();function Aa(e,t){e instanceof Map&&t instanceof Map?t.forEach((n,r)=>e.set(r,n)):e instanceof Set&&t instanceof Set&&t.forEach(e.add,e);for(const n in t){if(!t.hasOwnProperty(n))continue;const r=t[n],s=e[n];wa(s)&&wa(r)&&e.hasOwnProperty(n)&&!Mt(r)&&!_n(r)?e[n]=Aa(s,r):e[n]=r}return e}const j_=Symbol();function $_(e){return!wa(e)||!Object.prototype.hasOwnProperty.call(e,j_)}const{assign:hn}=Object;function q_(e){return!!(Mt(e)&&e.effect)}function H_(e,t,n,r){const{state:s,actions:i,getters:a}=t,l=n.state.value[e];let c;function f(){l||(n.state.value[e]=s?s():{});const d=Qm(n.state.value[e]);return hn(d,i,Object.keys(a||{}).reduce((p,_)=>(p[_]=al(Hf(()=>{yo(n);const b=n._s.get(e);return a[_].call(b,b)})),p),{}))}return c=Qf(e,f,t,n,r,!0),c}function Qf(e,t,n={},r,s,i){let a;const l=hn({actions:{}},n),c={deep:!0};let f,d,p=new Set,_=new Set,b;const V=r.state.value[e];!i&&!V&&(r.state.value[e]={}),Fi({});let M;function L(g){let y;f=d=!1,typeof g=="function"?(g(r.state.value[e]),y={type:Es.patchFunction,storeId:e,events:b}):(Aa(r.state.value[e],g),y={type:Es.patchObject,payload:g,storeId:e,events:b});const T=M=Symbol();ff().then(()=>{M===T&&(f=!0)}),d=!0,pr(p,y,r.state.value[e])}const W=i?function(){const{state:y}=n,T=y?y():{};this.$patch(w=>{hn(w,T)})}:Gf;function G(){a.stop(),p.clear(),_.clear(),r._s.delete(e)}const Q=(g,y="")=>{if(Ec in g)return g[sa]=y,g;const T=function(){yo(r);const w=Array.from(arguments),S=new Set,E=new Set;function ce(it){S.add(it)}function De(it){E.add(it)}pr(_,{args:w,name:T[sa],store:lt,after:ce,onError:De});let Vt;try{Vt=g.apply(this&&this.$id===e?this:lt,w)}catch(it){throw pr(E,it),it}return Vt instanceof Promise?Vt.then(it=>(pr(S,it),it)).catch(it=>(pr(E,it),Promise.reject(it))):(pr(S,Vt),Vt)};return T[Ec]=!0,T[sa]=y,T},z={_p:r,$id:e,$onAction:vc.bind(null,_),$patch:L,$reset:W,$subscribe(g,y={}){const T=vc(p,g,y.detached,()=>w()),w=a.run(()=>bi(()=>r.state.value[e],S=>{(y.flush==="sync"?d:f)&&g({storeId:e,type:Es.direct,events:b},S)},hn({},c,y)));return T},$dispose:G},lt=ho(z);r._s.set(e,lt);const I=(r._a&&r._a.runWithContext||B_)(()=>r._e.run(()=>(a=Wh()).run(()=>t({action:Q}))));for(const g in I){const y=I[g];if(Mt(y)&&!q_(y)||_n(y))i||(V&&$_(y)&&(Mt(y)?y.value=V[g]:Aa(y,V[g])),r.state.value[e][g]=y);else if(typeof y=="function"){const T=Q(y,g);I[g]=T,l.actions[g]=y}}return hn(lt,I),hn(gt(lt),I),Object.defineProperty(lt,"$state",{get:()=>r.state.value[e],set:g=>{L(y=>{hn(y,g)})}}),r._p.forEach(g=>{hn(lt,a.run(()=>g({store:lt,app:r._a,pinia:r,options:l})))}),V&&i&&n.hydrate&&n.hydrate(lt.$state,V),f=!0,d=!0,lt}/*! #__NO_SIDE_EFFECTS__ */function z_(e,t,n){let r;const s=typeof t=="function";r=s?n:t;function i(a,l){const c=Vg();return a=a||(c?ys(Wf,null):null),a&&yo(a),a=Kf,a._s.has(e)||(s?Qf(e,t,r,a):H_(e,r,a)),a._s.get(e)}return i.$id=e,i}function K_(e,t){if(e==null)return;let n=e;for(let r=0;r<t.length;r++){if(n===void 0||n[t[r]]===void 0)return;if(n===null||n[t[r]]===null)return null;n=n[t[r]]}return n}function pl(e,t,n){if(n.length===0)return t;const r=n[0];return n.length>1&&(t=pl(typeof e!="object"||e===null||!Object.prototype.hasOwnProperty.call(e,r)?Number.isInteger(Number(n[1]))?[]:{}:e[r],t,Array.prototype.slice.call(n,1))),Number.isInteger(Number(r))&&Array.isArray(e)?e.slice()[r]:Object.assign({},e,{[r]:t})}function Xf(e,t){if(e==null||t.length===0)return e;if(t.length===1){if(e==null)return e;if(Number.isInteger(t[0])&&Array.isArray(e))return Array.prototype.slice.call(e,0).splice(t[0],1);const n={};for(const r in e)n[r]=e[r];return delete n[t[0]],n}if(e[t[0]]==null){if(Number.isInteger(t[0])&&Array.isArray(e))return Array.prototype.concat.call([],e);const n={};for(const r in e)n[r]=e[r];return n}return pl(e,Xf(e[t[0]],Array.prototype.slice.call(t,1)),[t[0]])}function Jf(e,t){return t.map(n=>n.split(".")).map(n=>[n,K_(e,n)]).filter(n=>n[1]!==void 0).reduce((n,r)=>pl(n,r[1],r[0]),{})}function Yf(e,t){return t.map(n=>n.split(".")).reduce((n,r)=>Xf(n,r),e)}function Tc(e,{storage:t,serializer:n,key:r,debug:s,pick:i,omit:a,beforeHydrate:l,afterHydrate:c},f,d=!0){try{d&&(l==null||l(f));const p=t.getItem(r);if(p){const _=n.deserialize(p),b=i?Jf(_,i):_,V=a?Yf(b,a):b;e.$patch(V)}d&&(c==null||c(f))}catch(p){s&&console.error("[pinia-plugin-persistedstate]",p)}}function Ic(e,{storage:t,serializer:n,key:r,debug:s,pick:i,omit:a}){try{const l=i?Jf(e,i):e,c=a?Yf(l,a):l,f=n.serialize(c);t.setItem(r,f)}catch(l){s&&console.error("[pinia-plugin-persistedstate]",l)}}function W_(e,t){return typeof e=="function"?e(t):typeof e=="string"?e:t}function G_(e,t,n){const{pinia:r,store:s,options:{persist:i=n}}=e;if(!i)return;// v8 ignore if -- @preserve
if(!(s.$id in r.state.value)){const l=r._s.get(s.$id.replace("__hot:",""));l&&Promise.resolve().then(()=>l.$persist());return}const a=(Array.isArray(i)?i:i===!0?[{}]:[i]).map(t);s.$hydrate=({runHooks:l=!0}={})=>{a.forEach(c=>{Tc(s,c,e,l)})},s.$persist=()=>{a.forEach(l=>{Ic(s.$state,l)})},a.forEach(l=>{Tc(s,l,e),s.$subscribe((c,f)=>Ic(f,l),{detached:!0})})}function Q_(e={}){return function(t){G_(t,n=>{const r=W_(n.key,t.store.$id);return{key:(e.key?e.key:s=>s)(r),debug:n.debug??e.debug??!1,serializer:n.serializer??e.serializer??{serialize:s=>JSON.stringify(s),deserialize:s=>JSON.parse(s)},storage:n.storage??e.storage??window.localStorage,beforeHydrate:n.beforeHydrate??e.beforeHydrate,afterHydrate:n.afterHydrate??e.afterHydrate,pick:n.pick,omit:n.omit}},e.auto??!1)}}var X_=Q_();const er=(e,t)=>{const n=e.__vccOpts||e;for(const[r,s]of t)n[r]=s;return n},J_={},Y_={class:"carafe"};function Z_(e,t){return yt(),Dt("div",Y_,[Ai(e.$slots,"top",{},void 0,!0),Ai(e.$slots,"mid",{},void 0,!0),Ai(e.$slots,"bottom",{},void 0,!0)])}const ty=er(J_,[["render",Z_],["__scopeId","data-v-43d2bfc5"]]),ey={},ny={class:"mug"};function ry(e,t){return yt(),Dt("div",ny,[Ai(e.$slots,"default")])}const sy=er(ey,[["render",ry]]),wc=["Hot","Cold"],iy=()=>{};var Ac={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zf=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let s=e.charCodeAt(r);s<128?t[n++]=s:s<2048?(t[n++]=s>>6|192,t[n++]=s&63|128):(s&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=s>>18|240,t[n++]=s>>12&63|128,t[n++]=s>>6&63|128,t[n++]=s&63|128):(t[n++]=s>>12|224,t[n++]=s>>6&63|128,t[n++]=s&63|128)}return t},oy=function(e){const t=[];let n=0,r=0;for(;n<e.length;){const s=e[n++];if(s<128)t[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=e[n++];t[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=e[n++],a=e[n++],l=e[n++],c=((s&7)<<18|(i&63)<<12|(a&63)<<6|l&63)-65536;t[r++]=String.fromCharCode(55296+(c>>10)),t[r++]=String.fromCharCode(56320+(c&1023))}else{const i=e[n++],a=e[n++];t[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|a&63)}}return t.join("")},td={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<e.length;s+=3){const i=e[s],a=s+1<e.length,l=a?e[s+1]:0,c=s+2<e.length,f=c?e[s+2]:0,d=i>>2,p=(i&3)<<4|l>>4;let _=(l&15)<<2|f>>6,b=f&63;c||(b=64,a||(_=64)),r.push(n[d],n[p],n[_],n[b])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Zf(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):oy(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<e.length;){const i=n[e.charAt(s++)],l=s<e.length?n[e.charAt(s)]:0;++s;const f=s<e.length?n[e.charAt(s)]:64;++s;const p=s<e.length?n[e.charAt(s)]:64;if(++s,i==null||l==null||f==null||p==null)throw new ay;const _=i<<2|l>>4;if(r.push(_),f!==64){const b=l<<4&240|f>>2;if(r.push(b),p!==64){const V=f<<6&192|p;r.push(V)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class ay extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ly=function(e){const t=Zf(e);return td.encodeByteArray(t,!0)},zi=function(e){return ly(e).replace(/\./g,"")},uy=function(e){try{return td.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cy(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hy=()=>cy().__FIREBASE_DEFAULTS__,fy=()=>{if(typeof process>"u"||typeof Ac>"u")return;const e=Ac.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},dy=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&uy(e[1]);return t&&JSON.parse(t)},ml=()=>{try{return iy()||hy()||fy()||dy()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},py=e=>{var t,n;return(n=(t=ml())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[e]},my=e=>{const t=py(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),r]:[t.substring(0,n),r]},ed=()=>{var e;return(e=ml())===null||e===void 0?void 0:e.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gy{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gl(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch{return!1}}async function _y(e){return(await fetch(e,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yy(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=t||"demo-project",s=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[zi(JSON.stringify(n)),zi(JSON.stringify(a)),""].join(".")}const Ts={};function vy(){const e={prod:[],emulator:[]};for(const t of Object.keys(Ts))Ts[t]?e.emulator.push(t):e.prod.push(t);return e}function Ey(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}let bc=!1;function Ty(e,t){if(typeof window>"u"||typeof document>"u"||!gl(window.location.host)||Ts[e]===t||Ts[e]||bc)return;Ts[e]=t;function n(_){return`__firebase__banner__${_}`}const r="__firebase__banner",i=vy().prod.length>0;function a(){const _=document.getElementById(r);_&&_.remove()}function l(_){_.style.display="flex",_.style.background="#7faaf0",_.style.position="fixed",_.style.bottom="5px",_.style.left="5px",_.style.padding=".5em",_.style.borderRadius="5px",_.style.alignItems="center"}function c(_,b){_.setAttribute("width","24"),_.setAttribute("id",b),_.setAttribute("height","24"),_.setAttribute("viewBox","0 0 24 24"),_.setAttribute("fill","none"),_.style.marginLeft="-6px"}function f(){const _=document.createElement("span");return _.style.cursor="pointer",_.style.marginLeft="16px",_.style.fontSize="24px",_.innerHTML=" &times;",_.onclick=()=>{bc=!0,a()},_}function d(_,b){_.setAttribute("id",b),_.innerText="Learn more",_.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",_.setAttribute("target","__blank"),_.style.paddingLeft="5px",_.style.textDecoration="underline"}function p(){const _=Ey(r),b=n("text"),V=document.getElementById(b)||document.createElement("span"),M=n("learnmore"),L=document.getElementById(M)||document.createElement("a"),W=n("preprendIcon"),G=document.getElementById(W)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(_.created){const Q=_.element;l(Q),d(L,M);const z=f();c(G,W),Q.append(G,V,L,z),document.body.appendChild(Q)}i?(V.innerText="Preview backend disconnected.",G.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(G.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,V.innerText="Preview backend running in this workspace."),V.setAttribute("id",b)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iy(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function wy(){var e;const t=(e=ml())===null||e===void 0?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Ay(){return!wy()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function by(){try{return typeof indexedDB=="object"}catch{return!1}}function Sy(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;t(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ry="FirebaseError";class Lr extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=Ry,Object.setPrototypeOf(this,Lr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,nd.prototype.create)}}class nd{constructor(t,n,r){this.service=t,this.serviceName=n,this.errors=r}create(t,...n){const r=n[0]||{},s=`${this.service}/${t}`,i=this.errors[t],a=i?Cy(i,r):"Error",l=`${this.serviceName}: ${a} (${s}).`;return new Lr(s,l,r)}}function Cy(e,t){return e.replace(Py,(n,r)=>{const s=t[r];return s!=null?String(s):`<${r}?>`})}const Py=/\{\$([^}]+)}/g;function Ki(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const s of n){if(!r.includes(s))return!1;const i=e[s],a=t[s];if(Sc(i)&&Sc(a)){if(!Ki(i,a))return!1}else if(i!==a)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Sc(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jn(e){return e&&e._delegate?e._delegate:e}class Ds{constructor(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qn="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vy{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const r=new gy;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),s=(n=t==null?void 0:t.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(xy(t))try{this.getOrInitializeService({instanceIdentifier:qn})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(t=qn){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=qn){return this.instances.has(t)}getOptions(t=qn){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&a.resolve(s)}return s}onInit(t,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(t),this.onInitCallbacks.set(s,i);const a=this.instances.get(s);return a&&t(a,s),()=>{i.delete(t)}}invokeOnInitCallbacks(t,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Dy(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=qn){return this.component?this.component.multipleInstances?t:qn:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Dy(e){return e===qn?void 0:e}function xy(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ny{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new Vy(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var dt;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(dt||(dt={}));const Oy={debug:dt.DEBUG,verbose:dt.VERBOSE,info:dt.INFO,warn:dt.WARN,error:dt.ERROR,silent:dt.SILENT},ky=dt.INFO,My={[dt.DEBUG]:"log",[dt.VERBOSE]:"log",[dt.INFO]:"info",[dt.WARN]:"warn",[dt.ERROR]:"error"},Fy=(e,t,...n)=>{if(t<e.logLevel)return;const r=new Date().toISOString(),s=My[t];if(s)console[s](`[${r}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class rd{constructor(t){this.name=t,this._logLevel=ky,this._logHandler=Fy,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in dt))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?Oy[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,dt.DEBUG,...t),this._logHandler(this,dt.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,dt.VERBOSE,...t),this._logHandler(this,dt.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,dt.INFO,...t),this._logHandler(this,dt.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,dt.WARN,...t),this._logHandler(this,dt.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,dt.ERROR,...t),this._logHandler(this,dt.ERROR,...t)}}const Ly=(e,t)=>t.some(n=>e instanceof n);let Rc,Cc;function Uy(){return Rc||(Rc=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function By(){return Cc||(Cc=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const sd=new WeakMap,ba=new WeakMap,id=new WeakMap,ia=new WeakMap,_l=new WeakMap;function jy(e){const t=new Promise((n,r)=>{const s=()=>{e.removeEventListener("success",i),e.removeEventListener("error",a)},i=()=>{n(yn(e.result)),s()},a=()=>{r(e.error),s()};e.addEventListener("success",i),e.addEventListener("error",a)});return t.then(n=>{n instanceof IDBCursor&&sd.set(n,e)}).catch(()=>{}),_l.set(t,e),t}function $y(e){if(ba.has(e))return;const t=new Promise((n,r)=>{const s=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=()=>{n(),s()},a=()=>{r(e.error||new DOMException("AbortError","AbortError")),s()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)});ba.set(e,t)}let Sa={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return ba.get(e);if(t==="objectStoreNames")return e.objectStoreNames||id.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return yn(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function qy(e){Sa=e(Sa)}function Hy(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const r=e.call(oa(this),t,...n);return id.set(r,t.sort?t.sort():[t]),yn(r)}:By().includes(e)?function(...t){return e.apply(oa(this),t),yn(sd.get(this))}:function(...t){return yn(e.apply(oa(this),t))}}function zy(e){return typeof e=="function"?Hy(e):(e instanceof IDBTransaction&&$y(e),Ly(e,Uy())?new Proxy(e,Sa):e)}function yn(e){if(e instanceof IDBRequest)return jy(e);if(ia.has(e))return ia.get(e);const t=zy(e);return t!==e&&(ia.set(e,t),_l.set(t,e)),t}const oa=e=>_l.get(e);function Ky(e,t,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const a=indexedDB.open(e,t),l=yn(a);return r&&a.addEventListener("upgradeneeded",c=>{r(yn(a.result),c.oldVersion,c.newVersion,yn(a.transaction),c)}),n&&a.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",f=>s(f.oldVersion,f.newVersion,f))}).catch(()=>{}),l}const Wy=["get","getKey","getAll","getAllKeys","count"],Gy=["put","add","delete","clear"],aa=new Map;function Pc(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(aa.get(t))return aa.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,s=Gy.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||Wy.includes(n)))return;const i=async function(a,...l){const c=this.transaction(a,s?"readwrite":"readonly");let f=c.store;return r&&(f=f.index(l.shift())),(await Promise.all([f[n](...l),s&&c.done]))[0]};return aa.set(t,i),i}qy(e=>({...e,get:(t,n,r)=>Pc(t,n)||e.get(t,n,r),has:(t,n)=>!!Pc(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qy{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Xy(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function Xy(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const Ra="@firebase/app",Vc="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nn=new rd("@firebase/app"),Jy="@firebase/app-compat",Yy="@firebase/analytics-compat",Zy="@firebase/analytics",tv="@firebase/app-check-compat",ev="@firebase/app-check",nv="@firebase/auth",rv="@firebase/auth-compat",sv="@firebase/database",iv="@firebase/data-connect",ov="@firebase/database-compat",av="@firebase/functions",lv="@firebase/functions-compat",uv="@firebase/installations",cv="@firebase/installations-compat",hv="@firebase/messaging",fv="@firebase/messaging-compat",dv="@firebase/performance",pv="@firebase/performance-compat",mv="@firebase/remote-config",gv="@firebase/remote-config-compat",_v="@firebase/storage",yv="@firebase/storage-compat",vv="@firebase/firestore",Ev="@firebase/ai",Tv="@firebase/firestore-compat",Iv="firebase",wv="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ca="[DEFAULT]",Av={[Ra]:"fire-core",[Jy]:"fire-core-compat",[Zy]:"fire-analytics",[Yy]:"fire-analytics-compat",[ev]:"fire-app-check",[tv]:"fire-app-check-compat",[nv]:"fire-auth",[rv]:"fire-auth-compat",[sv]:"fire-rtdb",[iv]:"fire-data-connect",[ov]:"fire-rtdb-compat",[av]:"fire-fn",[lv]:"fire-fn-compat",[uv]:"fire-iid",[cv]:"fire-iid-compat",[hv]:"fire-fcm",[fv]:"fire-fcm-compat",[dv]:"fire-perf",[pv]:"fire-perf-compat",[mv]:"fire-rc",[gv]:"fire-rc-compat",[_v]:"fire-gcs",[yv]:"fire-gcs-compat",[vv]:"fire-fst",[Tv]:"fire-fst-compat",[Ev]:"fire-vertex","fire-js":"fire-js",[Iv]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wi=new Map,bv=new Map,Pa=new Map;function Dc(e,t){try{e.container.addComponent(t)}catch(n){nn.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function Gi(e){const t=e.name;if(Pa.has(t))return nn.debug(`There were multiple attempts to register component ${t}.`),!1;Pa.set(t,e);for(const n of Wi.values())Dc(n,e);for(const n of bv.values())Dc(n,e);return!0}function Sv(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Rv(e){return e==null?!1:e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cv={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},vn=new nd("app","Firebase",Cv);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pv{constructor(t,n,r){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ds("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw vn.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vv=wv;function od(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const r=Object.assign({name:Ca,automaticDataCollectionEnabled:!0},t),s=r.name;if(typeof s!="string"||!s)throw vn.create("bad-app-name",{appName:String(s)});if(n||(n=ed()),!n)throw vn.create("no-options");const i=Wi.get(s);if(i){if(Ki(n,i.options)&&Ki(r,i.config))return i;throw vn.create("duplicate-app",{appName:s})}const a=new Ny(s);for(const c of Pa.values())a.addComponent(c);const l=new Pv(n,r,a);return Wi.set(s,l),l}function Dv(e=Ca){const t=Wi.get(e);if(!t&&e===Ca&&ed())return od();if(!t)throw vn.create("no-app",{appName:e});return t}function Pr(e,t,n){var r;let s=(r=Av[e])!==null&&r!==void 0?r:e;n&&(s+=`-${n}`);const i=s.match(/\s|\//),a=t.match(/\s|\//);if(i||a){const l=[`Unable to register library "${s}" with version "${t}":`];i&&l.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&a&&l.push("and"),a&&l.push(`version name "${t}" contains illegal characters (whitespace or "/")`),nn.warn(l.join(" "));return}Gi(new Ds(`${s}-version`,()=>({library:s,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xv="firebase-heartbeat-database",Nv=1,xs="firebase-heartbeat-store";let la=null;function ad(){return la||(la=Ky(xv,Nv,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(xs)}catch(n){console.warn(n)}}}}).catch(e=>{throw vn.create("idb-open",{originalErrorMessage:e.message})})),la}async function Ov(e){try{const n=(await ad()).transaction(xs),r=await n.objectStore(xs).get(ld(e));return await n.done,r}catch(t){if(t instanceof Lr)nn.warn(t.message);else{const n=vn.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});nn.warn(n.message)}}}async function xc(e,t){try{const r=(await ad()).transaction(xs,"readwrite");await r.objectStore(xs).put(t,ld(e)),await r.done}catch(n){if(n instanceof Lr)nn.warn(n.message);else{const r=vn.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});nn.warn(r.message)}}}function ld(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kv=1024,Mv=30;class Fv{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Uv(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var t,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Nc();if(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(a=>a.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>Mv){const a=Bv(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){nn.warn(r)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Nc(),{heartbeatsToSend:r,unsentEntries:s}=Lv(this._heartbeatsCache.heartbeats),i=zi(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return nn.warn(n),""}}}function Nc(){return new Date().toISOString().substring(0,10)}function Lv(e,t=kv){const n=[];let r=e.slice();for(const s of e){const i=n.find(a=>a.agent===s.agent);if(i){if(i.dates.push(s.date),Oc(n)>t){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Oc(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class Uv{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return by()?Sy().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Ov(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return xc(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return xc(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...t.heartbeats]})}else return}}function Oc(e){return zi(JSON.stringify({version:2,heartbeats:e})).length}function Bv(e){if(e.length===0)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jv(e){Gi(new Ds("platform-logger",t=>new Qy(t),"PRIVATE")),Gi(new Ds("heartbeat",t=>new Fv(t),"PRIVATE")),Pr(Ra,Vc,e),Pr(Ra,Vc,"esm2017"),Pr("fire-js","")}jv("");var kc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var En,ud;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(I,g){function y(){}y.prototype=g.prototype,I.D=g.prototype,I.prototype=new y,I.prototype.constructor=I,I.C=function(T,w,S){for(var E=Array(arguments.length-2),ce=2;ce<arguments.length;ce++)E[ce-2]=arguments[ce];return g.prototype[w].apply(T,E)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(I,g,y){y||(y=0);var T=Array(16);if(typeof g=="string")for(var w=0;16>w;++w)T[w]=g.charCodeAt(y++)|g.charCodeAt(y++)<<8|g.charCodeAt(y++)<<16|g.charCodeAt(y++)<<24;else for(w=0;16>w;++w)T[w]=g[y++]|g[y++]<<8|g[y++]<<16|g[y++]<<24;g=I.g[0],y=I.g[1],w=I.g[2];var S=I.g[3],E=g+(S^y&(w^S))+T[0]+3614090360&4294967295;g=y+(E<<7&4294967295|E>>>25),E=S+(w^g&(y^w))+T[1]+3905402710&4294967295,S=g+(E<<12&4294967295|E>>>20),E=w+(y^S&(g^y))+T[2]+606105819&4294967295,w=S+(E<<17&4294967295|E>>>15),E=y+(g^w&(S^g))+T[3]+3250441966&4294967295,y=w+(E<<22&4294967295|E>>>10),E=g+(S^y&(w^S))+T[4]+4118548399&4294967295,g=y+(E<<7&4294967295|E>>>25),E=S+(w^g&(y^w))+T[5]+1200080426&4294967295,S=g+(E<<12&4294967295|E>>>20),E=w+(y^S&(g^y))+T[6]+2821735955&4294967295,w=S+(E<<17&4294967295|E>>>15),E=y+(g^w&(S^g))+T[7]+4249261313&4294967295,y=w+(E<<22&4294967295|E>>>10),E=g+(S^y&(w^S))+T[8]+1770035416&4294967295,g=y+(E<<7&4294967295|E>>>25),E=S+(w^g&(y^w))+T[9]+2336552879&4294967295,S=g+(E<<12&4294967295|E>>>20),E=w+(y^S&(g^y))+T[10]+4294925233&4294967295,w=S+(E<<17&4294967295|E>>>15),E=y+(g^w&(S^g))+T[11]+2304563134&4294967295,y=w+(E<<22&4294967295|E>>>10),E=g+(S^y&(w^S))+T[12]+1804603682&4294967295,g=y+(E<<7&4294967295|E>>>25),E=S+(w^g&(y^w))+T[13]+4254626195&4294967295,S=g+(E<<12&4294967295|E>>>20),E=w+(y^S&(g^y))+T[14]+2792965006&4294967295,w=S+(E<<17&4294967295|E>>>15),E=y+(g^w&(S^g))+T[15]+1236535329&4294967295,y=w+(E<<22&4294967295|E>>>10),E=g+(w^S&(y^w))+T[1]+4129170786&4294967295,g=y+(E<<5&4294967295|E>>>27),E=S+(y^w&(g^y))+T[6]+3225465664&4294967295,S=g+(E<<9&4294967295|E>>>23),E=w+(g^y&(S^g))+T[11]+643717713&4294967295,w=S+(E<<14&4294967295|E>>>18),E=y+(S^g&(w^S))+T[0]+3921069994&4294967295,y=w+(E<<20&4294967295|E>>>12),E=g+(w^S&(y^w))+T[5]+3593408605&4294967295,g=y+(E<<5&4294967295|E>>>27),E=S+(y^w&(g^y))+T[10]+38016083&4294967295,S=g+(E<<9&4294967295|E>>>23),E=w+(g^y&(S^g))+T[15]+3634488961&4294967295,w=S+(E<<14&4294967295|E>>>18),E=y+(S^g&(w^S))+T[4]+3889429448&4294967295,y=w+(E<<20&4294967295|E>>>12),E=g+(w^S&(y^w))+T[9]+568446438&4294967295,g=y+(E<<5&4294967295|E>>>27),E=S+(y^w&(g^y))+T[14]+3275163606&4294967295,S=g+(E<<9&4294967295|E>>>23),E=w+(g^y&(S^g))+T[3]+4107603335&4294967295,w=S+(E<<14&4294967295|E>>>18),E=y+(S^g&(w^S))+T[8]+1163531501&4294967295,y=w+(E<<20&4294967295|E>>>12),E=g+(w^S&(y^w))+T[13]+2850285829&4294967295,g=y+(E<<5&4294967295|E>>>27),E=S+(y^w&(g^y))+T[2]+4243563512&4294967295,S=g+(E<<9&4294967295|E>>>23),E=w+(g^y&(S^g))+T[7]+1735328473&4294967295,w=S+(E<<14&4294967295|E>>>18),E=y+(S^g&(w^S))+T[12]+2368359562&4294967295,y=w+(E<<20&4294967295|E>>>12),E=g+(y^w^S)+T[5]+4294588738&4294967295,g=y+(E<<4&4294967295|E>>>28),E=S+(g^y^w)+T[8]+2272392833&4294967295,S=g+(E<<11&4294967295|E>>>21),E=w+(S^g^y)+T[11]+1839030562&4294967295,w=S+(E<<16&4294967295|E>>>16),E=y+(w^S^g)+T[14]+4259657740&4294967295,y=w+(E<<23&4294967295|E>>>9),E=g+(y^w^S)+T[1]+2763975236&4294967295,g=y+(E<<4&4294967295|E>>>28),E=S+(g^y^w)+T[4]+1272893353&4294967295,S=g+(E<<11&4294967295|E>>>21),E=w+(S^g^y)+T[7]+4139469664&4294967295,w=S+(E<<16&4294967295|E>>>16),E=y+(w^S^g)+T[10]+3200236656&4294967295,y=w+(E<<23&4294967295|E>>>9),E=g+(y^w^S)+T[13]+681279174&4294967295,g=y+(E<<4&4294967295|E>>>28),E=S+(g^y^w)+T[0]+3936430074&4294967295,S=g+(E<<11&4294967295|E>>>21),E=w+(S^g^y)+T[3]+3572445317&4294967295,w=S+(E<<16&4294967295|E>>>16),E=y+(w^S^g)+T[6]+76029189&4294967295,y=w+(E<<23&4294967295|E>>>9),E=g+(y^w^S)+T[9]+3654602809&4294967295,g=y+(E<<4&4294967295|E>>>28),E=S+(g^y^w)+T[12]+3873151461&4294967295,S=g+(E<<11&4294967295|E>>>21),E=w+(S^g^y)+T[15]+530742520&4294967295,w=S+(E<<16&4294967295|E>>>16),E=y+(w^S^g)+T[2]+3299628645&4294967295,y=w+(E<<23&4294967295|E>>>9),E=g+(w^(y|~S))+T[0]+4096336452&4294967295,g=y+(E<<6&4294967295|E>>>26),E=S+(y^(g|~w))+T[7]+1126891415&4294967295,S=g+(E<<10&4294967295|E>>>22),E=w+(g^(S|~y))+T[14]+2878612391&4294967295,w=S+(E<<15&4294967295|E>>>17),E=y+(S^(w|~g))+T[5]+4237533241&4294967295,y=w+(E<<21&4294967295|E>>>11),E=g+(w^(y|~S))+T[12]+1700485571&4294967295,g=y+(E<<6&4294967295|E>>>26),E=S+(y^(g|~w))+T[3]+2399980690&4294967295,S=g+(E<<10&4294967295|E>>>22),E=w+(g^(S|~y))+T[10]+4293915773&4294967295,w=S+(E<<15&4294967295|E>>>17),E=y+(S^(w|~g))+T[1]+2240044497&4294967295,y=w+(E<<21&4294967295|E>>>11),E=g+(w^(y|~S))+T[8]+1873313359&4294967295,g=y+(E<<6&4294967295|E>>>26),E=S+(y^(g|~w))+T[15]+4264355552&4294967295,S=g+(E<<10&4294967295|E>>>22),E=w+(g^(S|~y))+T[6]+2734768916&4294967295,w=S+(E<<15&4294967295|E>>>17),E=y+(S^(w|~g))+T[13]+1309151649&4294967295,y=w+(E<<21&4294967295|E>>>11),E=g+(w^(y|~S))+T[4]+4149444226&4294967295,g=y+(E<<6&4294967295|E>>>26),E=S+(y^(g|~w))+T[11]+3174756917&4294967295,S=g+(E<<10&4294967295|E>>>22),E=w+(g^(S|~y))+T[2]+718787259&4294967295,w=S+(E<<15&4294967295|E>>>17),E=y+(S^(w|~g))+T[9]+3951481745&4294967295,I.g[0]=I.g[0]+g&4294967295,I.g[1]=I.g[1]+(w+(E<<21&4294967295|E>>>11))&4294967295,I.g[2]=I.g[2]+w&4294967295,I.g[3]=I.g[3]+S&4294967295}r.prototype.u=function(I,g){g===void 0&&(g=I.length);for(var y=g-this.blockSize,T=this.B,w=this.h,S=0;S<g;){if(w==0)for(;S<=y;)s(this,I,S),S+=this.blockSize;if(typeof I=="string"){for(;S<g;)if(T[w++]=I.charCodeAt(S++),w==this.blockSize){s(this,T),w=0;break}}else for(;S<g;)if(T[w++]=I[S++],w==this.blockSize){s(this,T),w=0;break}}this.h=w,this.o+=g},r.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var g=1;g<I.length-8;++g)I[g]=0;var y=8*this.o;for(g=I.length-8;g<I.length;++g)I[g]=y&255,y/=256;for(this.u(I),I=Array(16),g=y=0;4>g;++g)for(var T=0;32>T;T+=8)I[y++]=this.g[g]>>>T&255;return I};function i(I,g){var y=l;return Object.prototype.hasOwnProperty.call(y,I)?y[I]:y[I]=g(I)}function a(I,g){this.h=g;for(var y=[],T=!0,w=I.length-1;0<=w;w--){var S=I[w]|0;T&&S==g||(y[w]=S,T=!1)}this.g=y}var l={};function c(I){return-128<=I&&128>I?i(I,function(g){return new a([g|0],0>g?-1:0)}):new a([I|0],0>I?-1:0)}function f(I){if(isNaN(I)||!isFinite(I))return p;if(0>I)return L(f(-I));for(var g=[],y=1,T=0;I>=y;T++)g[T]=I/y|0,y*=4294967296;return new a(g,0)}function d(I,g){if(I.length==0)throw Error("number format error: empty string");if(g=g||10,2>g||36<g)throw Error("radix out of range: "+g);if(I.charAt(0)=="-")return L(d(I.substring(1),g));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var y=f(Math.pow(g,8)),T=p,w=0;w<I.length;w+=8){var S=Math.min(8,I.length-w),E=parseInt(I.substring(w,w+S),g);8>S?(S=f(Math.pow(g,S)),T=T.j(S).add(f(E))):(T=T.j(y),T=T.add(f(E)))}return T}var p=c(0),_=c(1),b=c(16777216);e=a.prototype,e.m=function(){if(M(this))return-L(this).m();for(var I=0,g=1,y=0;y<this.g.length;y++){var T=this.i(y);I+=(0<=T?T:4294967296+T)*g,g*=4294967296}return I},e.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(V(this))return"0";if(M(this))return"-"+L(this).toString(I);for(var g=f(Math.pow(I,6)),y=this,T="";;){var w=z(y,g).g;y=W(y,w.j(g));var S=((0<y.g.length?y.g[0]:y.h)>>>0).toString(I);if(y=w,V(y))return S+T;for(;6>S.length;)S="0"+S;T=S+T}},e.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function V(I){if(I.h!=0)return!1;for(var g=0;g<I.g.length;g++)if(I.g[g]!=0)return!1;return!0}function M(I){return I.h==-1}e.l=function(I){return I=W(this,I),M(I)?-1:V(I)?0:1};function L(I){for(var g=I.g.length,y=[],T=0;T<g;T++)y[T]=~I.g[T];return new a(y,~I.h).add(_)}e.abs=function(){return M(this)?L(this):this},e.add=function(I){for(var g=Math.max(this.g.length,I.g.length),y=[],T=0,w=0;w<=g;w++){var S=T+(this.i(w)&65535)+(I.i(w)&65535),E=(S>>>16)+(this.i(w)>>>16)+(I.i(w)>>>16);T=E>>>16,S&=65535,E&=65535,y[w]=E<<16|S}return new a(y,y[y.length-1]&-2147483648?-1:0)};function W(I,g){return I.add(L(g))}e.j=function(I){if(V(this)||V(I))return p;if(M(this))return M(I)?L(this).j(L(I)):L(L(this).j(I));if(M(I))return L(this.j(L(I)));if(0>this.l(b)&&0>I.l(b))return f(this.m()*I.m());for(var g=this.g.length+I.g.length,y=[],T=0;T<2*g;T++)y[T]=0;for(T=0;T<this.g.length;T++)for(var w=0;w<I.g.length;w++){var S=this.i(T)>>>16,E=this.i(T)&65535,ce=I.i(w)>>>16,De=I.i(w)&65535;y[2*T+2*w]+=E*De,G(y,2*T+2*w),y[2*T+2*w+1]+=S*De,G(y,2*T+2*w+1),y[2*T+2*w+1]+=E*ce,G(y,2*T+2*w+1),y[2*T+2*w+2]+=S*ce,G(y,2*T+2*w+2)}for(T=0;T<g;T++)y[T]=y[2*T+1]<<16|y[2*T];for(T=g;T<2*g;T++)y[T]=0;return new a(y,0)};function G(I,g){for(;(I[g]&65535)!=I[g];)I[g+1]+=I[g]>>>16,I[g]&=65535,g++}function Q(I,g){this.g=I,this.h=g}function z(I,g){if(V(g))throw Error("division by zero");if(V(I))return new Q(p,p);if(M(I))return g=z(L(I),g),new Q(L(g.g),L(g.h));if(M(g))return g=z(I,L(g)),new Q(L(g.g),g.h);if(30<I.g.length){if(M(I)||M(g))throw Error("slowDivide_ only works with positive integers.");for(var y=_,T=g;0>=T.l(I);)y=lt(y),T=lt(T);var w=It(y,1),S=It(T,1);for(T=It(T,2),y=It(y,2);!V(T);){var E=S.add(T);0>=E.l(I)&&(w=w.add(y),S=E),T=It(T,1),y=It(y,1)}return g=W(I,w.j(g)),new Q(w,g)}for(w=p;0<=I.l(g);){for(y=Math.max(1,Math.floor(I.m()/g.m())),T=Math.ceil(Math.log(y)/Math.LN2),T=48>=T?1:Math.pow(2,T-48),S=f(y),E=S.j(g);M(E)||0<E.l(I);)y-=T,S=f(y),E=S.j(g);V(S)&&(S=_),w=w.add(S),I=W(I,E)}return new Q(w,I)}e.A=function(I){return z(this,I).h},e.and=function(I){for(var g=Math.max(this.g.length,I.g.length),y=[],T=0;T<g;T++)y[T]=this.i(T)&I.i(T);return new a(y,this.h&I.h)},e.or=function(I){for(var g=Math.max(this.g.length,I.g.length),y=[],T=0;T<g;T++)y[T]=this.i(T)|I.i(T);return new a(y,this.h|I.h)},e.xor=function(I){for(var g=Math.max(this.g.length,I.g.length),y=[],T=0;T<g;T++)y[T]=this.i(T)^I.i(T);return new a(y,this.h^I.h)};function lt(I){for(var g=I.g.length+1,y=[],T=0;T<g;T++)y[T]=I.i(T)<<1|I.i(T-1)>>>31;return new a(y,I.h)}function It(I,g){var y=g>>5;g%=32;for(var T=I.g.length-y,w=[],S=0;S<T;S++)w[S]=0<g?I.i(S+y)>>>g|I.i(S+y+1)<<32-g:I.i(S+y);return new a(w,I.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,ud=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=f,a.fromString=d,En=a}).apply(typeof kc<"u"?kc:typeof self<"u"?self:typeof window<"u"?window:{});var _i=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var cd,us,hd,Ci,Va,fd,dd,pd;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(o,u,h){return o==Array.prototype||o==Object.prototype||(o[u]=h.value),o};function n(o){o=[typeof globalThis=="object"&&globalThis,o,typeof window=="object"&&window,typeof self=="object"&&self,typeof _i=="object"&&_i];for(var u=0;u<o.length;++u){var h=o[u];if(h&&h.Math==Math)return h}throw Error("Cannot find global object")}var r=n(this);function s(o,u){if(u)t:{var h=r;o=o.split(".");for(var m=0;m<o.length-1;m++){var R=o[m];if(!(R in h))break t;h=h[R]}o=o[o.length-1],m=h[o],u=u(m),u!=m&&u!=null&&t(h,o,{configurable:!0,writable:!0,value:u})}}function i(o,u){o instanceof String&&(o+="");var h=0,m=!1,R={next:function(){if(!m&&h<o.length){var C=h++;return{value:u(C,o[C]),done:!1}}return m=!0,{done:!0,value:void 0}}};return R[Symbol.iterator]=function(){return R},R}s("Array.prototype.values",function(o){return o||function(){return i(this,function(u,h){return h})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},l=this||self;function c(o){var u=typeof o;return u=u!="object"?u:o?Array.isArray(o)?"array":u:"null",u=="array"||u=="object"&&typeof o.length=="number"}function f(o){var u=typeof o;return u=="object"&&o!=null||u=="function"}function d(o,u,h){return o.call.apply(o.bind,arguments)}function p(o,u,h){if(!o)throw Error();if(2<arguments.length){var m=Array.prototype.slice.call(arguments,2);return function(){var R=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(R,m),o.apply(u,R)}}return function(){return o.apply(u,arguments)}}function _(o,u,h){return _=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:p,_.apply(null,arguments)}function b(o,u){var h=Array.prototype.slice.call(arguments,1);return function(){var m=h.slice();return m.push.apply(m,arguments),o.apply(this,m)}}function V(o,u){function h(){}h.prototype=u.prototype,o.aa=u.prototype,o.prototype=new h,o.prototype.constructor=o,o.Qb=function(m,R,C){for(var j=Array(arguments.length-2),wt=2;wt<arguments.length;wt++)j[wt-2]=arguments[wt];return u.prototype[R].apply(m,j)}}function M(o){const u=o.length;if(0<u){const h=Array(u);for(let m=0;m<u;m++)h[m]=o[m];return h}return[]}function L(o,u){for(let h=1;h<arguments.length;h++){const m=arguments[h];if(c(m)){const R=o.length||0,C=m.length||0;o.length=R+C;for(let j=0;j<C;j++)o[R+j]=m[j]}else o.push(m)}}class W{constructor(u,h){this.i=u,this.j=h,this.h=0,this.g=null}get(){let u;return 0<this.h?(this.h--,u=this.g,this.g=u.next,u.next=null):u=this.i(),u}}function G(o){return/^[\s\xa0]*$/.test(o)}function Q(){var o=l.navigator;return o&&(o=o.userAgent)?o:""}function z(o){return z[" "](o),o}z[" "]=function(){};var lt=Q().indexOf("Gecko")!=-1&&!(Q().toLowerCase().indexOf("webkit")!=-1&&Q().indexOf("Edge")==-1)&&!(Q().indexOf("Trident")!=-1||Q().indexOf("MSIE")!=-1)&&Q().indexOf("Edge")==-1;function It(o,u,h){for(const m in o)u.call(h,o[m],m,o)}function I(o,u){for(const h in o)u.call(void 0,o[h],h,o)}function g(o){const u={};for(const h in o)u[h]=o[h];return u}const y="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function T(o,u){let h,m;for(let R=1;R<arguments.length;R++){m=arguments[R];for(h in m)o[h]=m[h];for(let C=0;C<y.length;C++)h=y[C],Object.prototype.hasOwnProperty.call(m,h)&&(o[h]=m[h])}}function w(o){var u=1;o=o.split(":");const h=[];for(;0<u&&o.length;)h.push(o.shift()),u--;return o.length&&h.push(o.join(":")),h}function S(o){l.setTimeout(()=>{throw o},0)}function E(){var o=be;let u=null;return o.g&&(u=o.g,o.g=o.g.next,o.g||(o.h=null),u.next=null),u}class ce{constructor(){this.h=this.g=null}add(u,h){const m=De.get();m.set(u,h),this.h?this.h.next=m:this.g=m,this.h=m}}var De=new W(()=>new Vt,o=>o.reset());class Vt{constructor(){this.next=this.g=this.h=null}set(u,h){this.h=u,this.g=h,this.next=null}reset(){this.next=this.g=this.h=null}}let it,pt=!1,be=new ce,Nn=()=>{const o=l.Promise.resolve(void 0);it=()=>{o.then(He)}};var He=()=>{for(var o;o=E();){try{o.h.call(o.g)}catch(h){S(h)}var u=De;u.j(o),100>u.h&&(u.h++,o.next=u.g,u.g=o)}pt=!1};function $t(){this.s=this.s,this.C=this.C}$t.prototype.s=!1,$t.prototype.ma=function(){this.s||(this.s=!0,this.N())},$t.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function qt(o,u){this.type=o,this.g=this.target=u,this.defaultPrevented=!1}qt.prototype.h=function(){this.defaultPrevented=!0};var No=(function(){if(!l.addEventListener||!Object.defineProperty)return!1;var o=!1,u=Object.defineProperty({},"passive",{get:function(){o=!0}});try{const h=()=>{};l.addEventListener("test",h,u),l.removeEventListener("test",h,u)}catch{}return o})();function On(o,u){if(qt.call(this,o?o.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,o){var h=this.type=o.type,m=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;if(this.target=o.target||o.srcElement,this.g=u,u=o.relatedTarget){if(lt){t:{try{z(u.nodeName);var R=!0;break t}catch{}R=!1}R||(u=null)}}else h=="mouseover"?u=o.fromElement:h=="mouseout"&&(u=o.toElement);this.relatedTarget=u,m?(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0):(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType=typeof o.pointerType=="string"?o.pointerType:kn[o.pointerType]||"",this.state=o.state,this.i=o,o.defaultPrevented&&On.aa.h.call(this)}}V(On,qt);var kn={2:"touch",3:"pen",4:"mouse"};On.prototype.h=function(){On.aa.h.call(this);var o=this.i;o.preventDefault?o.preventDefault():o.returnValue=!1};var ze="closure_listenable_"+(1e6*Math.random()|0),qr=0;function Js(o,u,h,m,R){this.listener=o,this.proxy=null,this.src=u,this.type=h,this.capture=!!m,this.ha=R,this.key=++qr,this.da=this.fa=!1}function xe(o){o.da=!0,o.listener=null,o.proxy=null,o.src=null,o.ha=null}function Hr(o){this.src=o,this.g={},this.h=0}Hr.prototype.add=function(o,u,h,m,R){var C=o.toString();o=this.g[C],o||(o=this.g[C]=[],this.h++);var j=A(o,u,m,R);return-1<j?(u=o[j],h||(u.fa=!1)):(u=new Js(u,this.src,C,!!m,R),u.fa=h,o.push(u)),u};function v(o,u){var h=u.type;if(h in o.g){var m=o.g[h],R=Array.prototype.indexOf.call(m,u,void 0),C;(C=0<=R)&&Array.prototype.splice.call(m,R,1),C&&(xe(u),o.g[h].length==0&&(delete o.g[h],o.h--))}}function A(o,u,h,m){for(var R=0;R<o.length;++R){var C=o[R];if(!C.da&&C.listener==u&&C.capture==!!h&&C.ha==m)return R}return-1}var P="closure_lm_"+(1e6*Math.random()|0),F={};function N(o,u,h,m,R){if(Array.isArray(u)){for(var C=0;C<u.length;C++)N(o,u[C],h,m,R);return null}return h=et(h),o&&o[ze]?o.K(u,h,f(m)?!!m.capture:!1,R):O(o,u,h,!1,m,R)}function O(o,u,h,m,R,C){if(!u)throw Error("Invalid event type");var j=f(R)?!!R.capture:!!R,wt=q(o);if(wt||(o[P]=wt=new Hr(o)),h=wt.add(u,h,m,j,C),h.proxy)return h;if(m=$(),h.proxy=m,m.src=o,m.listener=h,o.addEventListener)No||(R=j),R===void 0&&(R=!1),o.addEventListener(u.toString(),m,R);else if(o.attachEvent)o.attachEvent(k(u.toString()),m);else if(o.addListener&&o.removeListener)o.addListener(m);else throw Error("addEventListener and attachEvent are unavailable.");return h}function $(){function o(h){return u.call(o.src,o.listener,h)}const u=Y;return o}function B(o,u,h,m,R){if(Array.isArray(u))for(var C=0;C<u.length;C++)B(o,u[C],h,m,R);else m=f(m)?!!m.capture:!!m,h=et(h),o&&o[ze]?(o=o.i,u=String(u).toString(),u in o.g&&(C=o.g[u],h=A(C,h,m,R),-1<h&&(xe(C[h]),Array.prototype.splice.call(C,h,1),C.length==0&&(delete o.g[u],o.h--)))):o&&(o=q(o))&&(u=o.g[u.toString()],o=-1,u&&(o=A(u,h,m,R)),(h=-1<o?u[o]:null)&&U(h))}function U(o){if(typeof o!="number"&&o&&!o.da){var u=o.src;if(u&&u[ze])v(u.i,o);else{var h=o.type,m=o.proxy;u.removeEventListener?u.removeEventListener(h,m,o.capture):u.detachEvent?u.detachEvent(k(h),m):u.addListener&&u.removeListener&&u.removeListener(m),(h=q(u))?(v(h,o),h.h==0&&(h.src=null,u[P]=null)):xe(o)}}}function k(o){return o in F?F[o]:F[o]="on"+o}function Y(o,u){if(o.da)o=!0;else{u=new On(u,this);var h=o.listener,m=o.ha||o.src;o.fa&&U(o),o=h.call(m,u)}return o}function q(o){return o=o[P],o instanceof Hr?o:null}var X="__closure_events_fn_"+(1e9*Math.random()>>>0);function et(o){return typeof o=="function"?o:(o[X]||(o[X]=function(u){return o.handleEvent(u)}),o[X])}function Z(){$t.call(this),this.i=new Hr(this),this.M=this,this.F=null}V(Z,$t),Z.prototype[ze]=!0,Z.prototype.removeEventListener=function(o,u,h,m){B(this,o,u,h,m)};function ot(o,u){var h,m=o.F;if(m)for(h=[];m;m=m.F)h.push(m);if(o=o.M,m=u.type||u,typeof u=="string")u=new qt(u,o);else if(u instanceof qt)u.target=u.target||o;else{var R=u;u=new qt(m,o),T(u,R)}if(R=!0,h)for(var C=h.length-1;0<=C;C--){var j=u.g=h[C];R=ht(j,m,!0,u)&&R}if(j=u.g=o,R=ht(j,m,!0,u)&&R,R=ht(j,m,!1,u)&&R,h)for(C=0;C<h.length;C++)j=u.g=h[C],R=ht(j,m,!1,u)&&R}Z.prototype.N=function(){if(Z.aa.N.call(this),this.i){var o=this.i,u;for(u in o.g){for(var h=o.g[u],m=0;m<h.length;m++)xe(h[m]);delete o.g[u],o.h--}}this.F=null},Z.prototype.K=function(o,u,h,m){return this.i.add(String(o),u,!1,h,m)},Z.prototype.L=function(o,u,h,m){return this.i.add(String(o),u,!0,h,m)};function ht(o,u,h,m){if(u=o.i.g[String(u)],!u)return!0;u=u.concat();for(var R=!0,C=0;C<u.length;++C){var j=u[C];if(j&&!j.da&&j.capture==h){var wt=j.listener,Qt=j.ha||j.src;j.fa&&v(o.i,j),R=wt.call(Qt,m)!==!1&&R}}return R&&!m.defaultPrevented}function Kt(o,u,h){if(typeof o=="function")h&&(o=_(o,h));else if(o&&typeof o.handleEvent=="function")o=_(o.handleEvent,o);else throw Error("Invalid listener argument");return 2147483647<Number(u)?-1:l.setTimeout(o,u||0)}function Wt(o){o.g=Kt(()=>{o.g=null,o.i&&(o.i=!1,Wt(o))},o.l);const u=o.h;o.h=null,o.m.apply(null,u)}class Ee extends $t{constructor(u,h){super(),this.m=u,this.l=h,this.h=null,this.i=!1,this.g=null}j(u){this.h=arguments,this.g?this.i=!0:Wt(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function te(o){$t.call(this),this.h=o,this.g={}}V(te,$t);var an=[];function zr(o){It(o.g,function(u,h){this.g.hasOwnProperty(h)&&U(u)},o),o.g={}}te.prototype.N=function(){te.aa.N.call(this),zr(this)},te.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Gt=l.JSON.stringify,Te=l.JSON.parse,Ys=class{stringify(o){return l.JSON.stringify(o,void 0)}parse(o){return l.JSON.parse(o,void 0)}};function ar(){}ar.prototype.h=null;function Jl(o){return o.h||(o.h=o.i())}function Yl(){}var Kr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Oo(){qt.call(this,"d")}V(Oo,qt);function ko(){qt.call(this,"c")}V(ko,qt);var Mn={},Zl=null;function Zs(){return Zl=Zl||new Z}Mn.La="serverreachability";function tu(o){qt.call(this,Mn.La,o)}V(tu,qt);function Wr(o){const u=Zs();ot(u,new tu(u))}Mn.STAT_EVENT="statevent";function eu(o,u){qt.call(this,Mn.STAT_EVENT,o),this.stat=u}V(eu,qt);function he(o){const u=Zs();ot(u,new eu(u,o))}Mn.Ma="timingevent";function nu(o,u){qt.call(this,Mn.Ma,o),this.size=u}V(nu,qt);function Gr(o,u){if(typeof o!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){o()},u)}function Qr(){this.g=!0}Qr.prototype.xa=function(){this.g=!1};function zp(o,u,h,m,R,C){o.info(function(){if(o.g)if(C)for(var j="",wt=C.split("&"),Qt=0;Qt<wt.length;Qt++){var mt=wt[Qt].split("=");if(1<mt.length){var ee=mt[0];mt=mt[1];var ne=ee.split("_");j=2<=ne.length&&ne[1]=="type"?j+(ee+"="+mt+"&"):j+(ee+"=redacted&")}}else j=null;else j=C;return"XMLHTTP REQ ("+m+") [attempt "+R+"]: "+u+`
`+h+`
`+j})}function Kp(o,u,h,m,R,C,j){o.info(function(){return"XMLHTTP RESP ("+m+") [ attempt "+R+"]: "+u+`
`+h+`
`+C+" "+j})}function lr(o,u,h,m){o.info(function(){return"XMLHTTP TEXT ("+u+"): "+Gp(o,h)+(m?" "+m:"")})}function Wp(o,u){o.info(function(){return"TIMEOUT: "+u})}Qr.prototype.info=function(){};function Gp(o,u){if(!o.g)return u;if(!u)return null;try{var h=JSON.parse(u);if(h){for(o=0;o<h.length;o++)if(Array.isArray(h[o])){var m=h[o];if(!(2>m.length)){var R=m[1];if(Array.isArray(R)&&!(1>R.length)){var C=R[0];if(C!="noop"&&C!="stop"&&C!="close")for(var j=1;j<R.length;j++)R[j]=""}}}}return Gt(h)}catch{return u}}var ti={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ru={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Mo;function ei(){}V(ei,ar),ei.prototype.g=function(){return new XMLHttpRequest},ei.prototype.i=function(){return{}},Mo=new ei;function ln(o,u,h,m){this.j=o,this.i=u,this.l=h,this.R=m||1,this.U=new te(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new su}function su(){this.i=null,this.g="",this.h=!1}var iu={},Fo={};function Lo(o,u,h){o.L=1,o.v=ii(Ke(u)),o.m=h,o.P=!0,ou(o,null)}function ou(o,u){o.F=Date.now(),ni(o),o.A=Ke(o.v);var h=o.A,m=o.R;Array.isArray(m)||(m=[String(m)]),Eu(h.i,"t",m),o.C=0,h=o.j.J,o.h=new su,o.g=Lu(o.j,h?u:null,!o.m),0<o.O&&(o.M=new Ee(_(o.Y,o,o.g),o.O)),u=o.U,h=o.g,m=o.ca;var R="readystatechange";Array.isArray(R)||(R&&(an[0]=R.toString()),R=an);for(var C=0;C<R.length;C++){var j=N(h,R[C],m||u.handleEvent,!1,u.h||u);if(!j)break;u.g[j.key]=j}u=o.H?g(o.H):{},o.m?(o.u||(o.u="POST"),u["Content-Type"]="application/x-www-form-urlencoded",o.g.ea(o.A,o.u,o.m,u)):(o.u="GET",o.g.ea(o.A,o.u,null,u)),Wr(),zp(o.i,o.u,o.A,o.l,o.R,o.m)}ln.prototype.ca=function(o){o=o.target;const u=this.M;u&&We(o)==3?u.j():this.Y(o)},ln.prototype.Y=function(o){try{if(o==this.g)t:{const ne=We(this.g);var u=this.g.Ba();const hr=this.g.Z();if(!(3>ne)&&(ne!=3||this.g&&(this.h.h||this.g.oa()||Ru(this.g)))){this.J||ne!=4||u==7||(u==8||0>=hr?Wr(3):Wr(2)),Uo(this);var h=this.g.Z();this.X=h;e:if(au(this)){var m=Ru(this.g);o="";var R=m.length,C=We(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Fn(this),Xr(this);var j="";break e}this.h.i=new l.TextDecoder}for(u=0;u<R;u++)this.h.h=!0,o+=this.h.i.decode(m[u],{stream:!(C&&u==R-1)});m.length=0,this.h.g+=o,this.C=0,j=this.h.g}else j=this.g.oa();if(this.o=h==200,Kp(this.i,this.u,this.A,this.l,this.R,ne,h),this.o){if(this.T&&!this.K){e:{if(this.g){var wt,Qt=this.g;if((wt=Qt.g?Qt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!G(wt)){var mt=wt;break e}}mt=null}if(h=mt)lr(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Bo(this,h);else{this.o=!1,this.s=3,he(12),Fn(this),Xr(this);break t}}if(this.P){h=!0;let Se;for(;!this.J&&this.C<j.length;)if(Se=Qp(this,j),Se==Fo){ne==4&&(this.s=4,he(14),h=!1),lr(this.i,this.l,null,"[Incomplete Response]");break}else if(Se==iu){this.s=4,he(15),lr(this.i,this.l,j,"[Invalid Chunk]"),h=!1;break}else lr(this.i,this.l,Se,null),Bo(this,Se);if(au(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ne!=4||j.length!=0||this.h.h||(this.s=1,he(16),h=!1),this.o=this.o&&h,!h)lr(this.i,this.l,j,"[Invalid Chunked Response]"),Fn(this),Xr(this);else if(0<j.length&&!this.W){this.W=!0;var ee=this.j;ee.g==this&&ee.ba&&!ee.M&&(ee.j.info("Great, no buffering proxy detected. Bytes received: "+j.length),Ko(ee),ee.M=!0,he(11))}}else lr(this.i,this.l,j,null),Bo(this,j);ne==4&&Fn(this),this.o&&!this.J&&(ne==4?Ou(this.j,this):(this.o=!1,ni(this)))}else fm(this.g),h==400&&0<j.indexOf("Unknown SID")?(this.s=3,he(12)):(this.s=0,he(13)),Fn(this),Xr(this)}}}catch{}finally{}};function au(o){return o.g?o.u=="GET"&&o.L!=2&&o.j.Ca:!1}function Qp(o,u){var h=o.C,m=u.indexOf(`
`,h);return m==-1?Fo:(h=Number(u.substring(h,m)),isNaN(h)?iu:(m+=1,m+h>u.length?Fo:(u=u.slice(m,m+h),o.C=m+h,u)))}ln.prototype.cancel=function(){this.J=!0,Fn(this)};function ni(o){o.S=Date.now()+o.I,lu(o,o.I)}function lu(o,u){if(o.B!=null)throw Error("WatchDog timer not null");o.B=Gr(_(o.ba,o),u)}function Uo(o){o.B&&(l.clearTimeout(o.B),o.B=null)}ln.prototype.ba=function(){this.B=null;const o=Date.now();0<=o-this.S?(Wp(this.i,this.A),this.L!=2&&(Wr(),he(17)),Fn(this),this.s=2,Xr(this)):lu(this,this.S-o)};function Xr(o){o.j.G==0||o.J||Ou(o.j,o)}function Fn(o){Uo(o);var u=o.M;u&&typeof u.ma=="function"&&u.ma(),o.M=null,zr(o.U),o.g&&(u=o.g,o.g=null,u.abort(),u.ma())}function Bo(o,u){try{var h=o.j;if(h.G!=0&&(h.g==o||jo(h.h,o))){if(!o.K&&jo(h.h,o)&&h.G==3){try{var m=h.Da.g.parse(u)}catch{m=null}if(Array.isArray(m)&&m.length==3){var R=m;if(R[0]==0){t:if(!h.u){if(h.g)if(h.g.F+3e3<o.F)hi(h),ui(h);else break t;zo(h),he(18)}}else h.za=R[1],0<h.za-h.T&&37500>R[2]&&h.F&&h.v==0&&!h.C&&(h.C=Gr(_(h.Za,h),6e3));if(1>=hu(h.h)&&h.ca){try{h.ca()}catch{}h.ca=void 0}}else Un(h,11)}else if((o.K||h.g==o)&&hi(h),!G(u))for(R=h.Da.g.parse(u),u=0;u<R.length;u++){let mt=R[u];if(h.T=mt[0],mt=mt[1],h.G==2)if(mt[0]=="c"){h.K=mt[1],h.ia=mt[2];const ee=mt[3];ee!=null&&(h.la=ee,h.j.info("VER="+h.la));const ne=mt[4];ne!=null&&(h.Aa=ne,h.j.info("SVER="+h.Aa));const hr=mt[5];hr!=null&&typeof hr=="number"&&0<hr&&(m=1.5*hr,h.L=m,h.j.info("backChannelRequestTimeoutMs_="+m)),m=h;const Se=o.g;if(Se){const di=Se.g?Se.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(di){var C=m.h;C.g||di.indexOf("spdy")==-1&&di.indexOf("quic")==-1&&di.indexOf("h2")==-1||(C.j=C.l,C.g=new Set,C.h&&($o(C,C.h),C.h=null))}if(m.D){const Wo=Se.g?Se.g.getResponseHeader("X-HTTP-Session-Id"):null;Wo&&(m.ya=Wo,Ct(m.I,m.D,Wo))}}h.G=3,h.l&&h.l.ua(),h.ba&&(h.R=Date.now()-o.F,h.j.info("Handshake RTT: "+h.R+"ms")),m=h;var j=o;if(m.qa=Fu(m,m.J?m.ia:null,m.W),j.K){fu(m.h,j);var wt=j,Qt=m.L;Qt&&(wt.I=Qt),wt.B&&(Uo(wt),ni(wt)),m.g=j}else xu(m);0<h.i.length&&ci(h)}else mt[0]!="stop"&&mt[0]!="close"||Un(h,7);else h.G==3&&(mt[0]=="stop"||mt[0]=="close"?mt[0]=="stop"?Un(h,7):Ho(h):mt[0]!="noop"&&h.l&&h.l.ta(mt),h.v=0)}}Wr(4)}catch{}}var Xp=class{constructor(o,u){this.g=o,this.map=u}};function uu(o){this.l=o||10,l.PerformanceNavigationTiming?(o=l.performance.getEntriesByType("navigation"),o=0<o.length&&(o[0].nextHopProtocol=="hq"||o[0].nextHopProtocol=="h2")):o=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=o?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function cu(o){return o.h?!0:o.g?o.g.size>=o.j:!1}function hu(o){return o.h?1:o.g?o.g.size:0}function jo(o,u){return o.h?o.h==u:o.g?o.g.has(u):!1}function $o(o,u){o.g?o.g.add(u):o.h=u}function fu(o,u){o.h&&o.h==u?o.h=null:o.g&&o.g.has(u)&&o.g.delete(u)}uu.prototype.cancel=function(){if(this.i=du(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const o of this.g.values())o.cancel();this.g.clear()}};function du(o){if(o.h!=null)return o.i.concat(o.h.D);if(o.g!=null&&o.g.size!==0){let u=o.i;for(const h of o.g.values())u=u.concat(h.D);return u}return M(o.i)}function Jp(o){if(o.V&&typeof o.V=="function")return o.V();if(typeof Map<"u"&&o instanceof Map||typeof Set<"u"&&o instanceof Set)return Array.from(o.values());if(typeof o=="string")return o.split("");if(c(o)){for(var u=[],h=o.length,m=0;m<h;m++)u.push(o[m]);return u}u=[],h=0;for(m in o)u[h++]=o[m];return u}function Yp(o){if(o.na&&typeof o.na=="function")return o.na();if(!o.V||typeof o.V!="function"){if(typeof Map<"u"&&o instanceof Map)return Array.from(o.keys());if(!(typeof Set<"u"&&o instanceof Set)){if(c(o)||typeof o=="string"){var u=[];o=o.length;for(var h=0;h<o;h++)u.push(h);return u}u=[],h=0;for(const m in o)u[h++]=m;return u}}}function pu(o,u){if(o.forEach&&typeof o.forEach=="function")o.forEach(u,void 0);else if(c(o)||typeof o=="string")Array.prototype.forEach.call(o,u,void 0);else for(var h=Yp(o),m=Jp(o),R=m.length,C=0;C<R;C++)u.call(void 0,m[C],h&&h[C],o)}var mu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Zp(o,u){if(o){o=o.split("&");for(var h=0;h<o.length;h++){var m=o[h].indexOf("="),R=null;if(0<=m){var C=o[h].substring(0,m);R=o[h].substring(m+1)}else C=o[h];u(C,R?decodeURIComponent(R.replace(/\+/g," ")):"")}}}function Ln(o){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,o instanceof Ln){this.h=o.h,ri(this,o.j),this.o=o.o,this.g=o.g,si(this,o.s),this.l=o.l;var u=o.i,h=new Zr;h.i=u.i,u.g&&(h.g=new Map(u.g),h.h=u.h),gu(this,h),this.m=o.m}else o&&(u=String(o).match(mu))?(this.h=!1,ri(this,u[1]||"",!0),this.o=Jr(u[2]||""),this.g=Jr(u[3]||"",!0),si(this,u[4]),this.l=Jr(u[5]||"",!0),gu(this,u[6]||"",!0),this.m=Jr(u[7]||"")):(this.h=!1,this.i=new Zr(null,this.h))}Ln.prototype.toString=function(){var o=[],u=this.j;u&&o.push(Yr(u,_u,!0),":");var h=this.g;return(h||u=="file")&&(o.push("//"),(u=this.o)&&o.push(Yr(u,_u,!0),"@"),o.push(encodeURIComponent(String(h)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h=this.s,h!=null&&o.push(":",String(h))),(h=this.l)&&(this.g&&h.charAt(0)!="/"&&o.push("/"),o.push(Yr(h,h.charAt(0)=="/"?nm:em,!0))),(h=this.i.toString())&&o.push("?",h),(h=this.m)&&o.push("#",Yr(h,sm)),o.join("")};function Ke(o){return new Ln(o)}function ri(o,u,h){o.j=h?Jr(u,!0):u,o.j&&(o.j=o.j.replace(/:$/,""))}function si(o,u){if(u){if(u=Number(u),isNaN(u)||0>u)throw Error("Bad port number "+u);o.s=u}else o.s=null}function gu(o,u,h){u instanceof Zr?(o.i=u,im(o.i,o.h)):(h||(u=Yr(u,rm)),o.i=new Zr(u,o.h))}function Ct(o,u,h){o.i.set(u,h)}function ii(o){return Ct(o,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),o}function Jr(o,u){return o?u?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function Yr(o,u,h){return typeof o=="string"?(o=encodeURI(o).replace(u,tm),h&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function tm(o){return o=o.charCodeAt(0),"%"+(o>>4&15).toString(16)+(o&15).toString(16)}var _u=/[#\/\?@]/g,em=/[#\?:]/g,nm=/[#\?]/g,rm=/[#\?@]/g,sm=/#/g;function Zr(o,u){this.h=this.g=null,this.i=o||null,this.j=!!u}function un(o){o.g||(o.g=new Map,o.h=0,o.i&&Zp(o.i,function(u,h){o.add(decodeURIComponent(u.replace(/\+/g," ")),h)}))}e=Zr.prototype,e.add=function(o,u){un(this),this.i=null,o=ur(this,o);var h=this.g.get(o);return h||this.g.set(o,h=[]),h.push(u),this.h+=1,this};function yu(o,u){un(o),u=ur(o,u),o.g.has(u)&&(o.i=null,o.h-=o.g.get(u).length,o.g.delete(u))}function vu(o,u){return un(o),u=ur(o,u),o.g.has(u)}e.forEach=function(o,u){un(this),this.g.forEach(function(h,m){h.forEach(function(R){o.call(u,R,m,this)},this)},this)},e.na=function(){un(this);const o=Array.from(this.g.values()),u=Array.from(this.g.keys()),h=[];for(let m=0;m<u.length;m++){const R=o[m];for(let C=0;C<R.length;C++)h.push(u[m])}return h},e.V=function(o){un(this);let u=[];if(typeof o=="string")vu(this,o)&&(u=u.concat(this.g.get(ur(this,o))));else{o=Array.from(this.g.values());for(let h=0;h<o.length;h++)u=u.concat(o[h])}return u},e.set=function(o,u){return un(this),this.i=null,o=ur(this,o),vu(this,o)&&(this.h-=this.g.get(o).length),this.g.set(o,[u]),this.h+=1,this},e.get=function(o,u){return o?(o=this.V(o),0<o.length?String(o[0]):u):u};function Eu(o,u,h){yu(o,u),0<h.length&&(o.i=null,o.g.set(ur(o,u),M(h)),o.h+=h.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const o=[],u=Array.from(this.g.keys());for(var h=0;h<u.length;h++){var m=u[h];const C=encodeURIComponent(String(m)),j=this.V(m);for(m=0;m<j.length;m++){var R=C;j[m]!==""&&(R+="="+encodeURIComponent(String(j[m]))),o.push(R)}}return this.i=o.join("&")};function ur(o,u){return u=String(u),o.j&&(u=u.toLowerCase()),u}function im(o,u){u&&!o.j&&(un(o),o.i=null,o.g.forEach(function(h,m){var R=m.toLowerCase();m!=R&&(yu(this,m),Eu(this,R,h))},o)),o.j=u}function om(o,u){const h=new Qr;if(l.Image){const m=new Image;m.onload=b(cn,h,"TestLoadImage: loaded",!0,u,m),m.onerror=b(cn,h,"TestLoadImage: error",!1,u,m),m.onabort=b(cn,h,"TestLoadImage: abort",!1,u,m),m.ontimeout=b(cn,h,"TestLoadImage: timeout",!1,u,m),l.setTimeout(function(){m.ontimeout&&m.ontimeout()},1e4),m.src=o}else u(!1)}function am(o,u){const h=new Qr,m=new AbortController,R=setTimeout(()=>{m.abort(),cn(h,"TestPingServer: timeout",!1,u)},1e4);fetch(o,{signal:m.signal}).then(C=>{clearTimeout(R),C.ok?cn(h,"TestPingServer: ok",!0,u):cn(h,"TestPingServer: server error",!1,u)}).catch(()=>{clearTimeout(R),cn(h,"TestPingServer: error",!1,u)})}function cn(o,u,h,m,R){try{R&&(R.onload=null,R.onerror=null,R.onabort=null,R.ontimeout=null),m(h)}catch{}}function lm(){this.g=new Ys}function um(o,u,h){const m=h||"";try{pu(o,function(R,C){let j=R;f(R)&&(j=Gt(R)),u.push(m+C+"="+encodeURIComponent(j))})}catch(R){throw u.push(m+"type="+encodeURIComponent("_badmap")),R}}function oi(o){this.l=o.Ub||null,this.j=o.eb||!1}V(oi,ar),oi.prototype.g=function(){return new ai(this.l,this.j)},oi.prototype.i=(function(o){return function(){return o}})({});function ai(o,u){Z.call(this),this.D=o,this.o=u,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}V(ai,Z),e=ai.prototype,e.open=function(o,u){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=o,this.A=u,this.readyState=1,es(this)},e.send=function(o){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const u={headers:this.u,method:this.B,credentials:this.m,cache:void 0};o&&(u.body=o),(this.D||l).fetch(new Request(this.A,u)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ts(this)),this.readyState=0},e.Sa=function(o){if(this.g&&(this.l=o,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=o.headers,this.readyState=2,es(this)),this.g&&(this.readyState=3,es(this),this.g)))if(this.responseType==="arraybuffer")o.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in o){if(this.j=o.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Tu(this)}else o.text().then(this.Ra.bind(this),this.ga.bind(this))};function Tu(o){o.j.read().then(o.Pa.bind(o)).catch(o.ga.bind(o))}e.Pa=function(o){if(this.g){if(this.o&&o.value)this.response.push(o.value);else if(!this.o){var u=o.value?o.value:new Uint8Array(0);(u=this.v.decode(u,{stream:!o.done}))&&(this.response=this.responseText+=u)}o.done?ts(this):es(this),this.readyState==3&&Tu(this)}},e.Ra=function(o){this.g&&(this.response=this.responseText=o,ts(this))},e.Qa=function(o){this.g&&(this.response=o,ts(this))},e.ga=function(){this.g&&ts(this)};function ts(o){o.readyState=4,o.l=null,o.j=null,o.v=null,es(o)}e.setRequestHeader=function(o,u){this.u.append(o,u)},e.getResponseHeader=function(o){return this.h&&this.h.get(o.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const o=[],u=this.h.entries();for(var h=u.next();!h.done;)h=h.value,o.push(h[0]+": "+h[1]),h=u.next();return o.join(`\r
`)};function es(o){o.onreadystatechange&&o.onreadystatechange.call(o)}Object.defineProperty(ai.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(o){this.m=o?"include":"same-origin"}});function Iu(o){let u="";return It(o,function(h,m){u+=m,u+=":",u+=h,u+=`\r
`}),u}function qo(o,u,h){t:{for(m in h){var m=!1;break t}m=!0}m||(h=Iu(h),typeof o=="string"?h!=null&&encodeURIComponent(String(h)):Ct(o,u,h))}function Nt(o){Z.call(this),this.headers=new Map,this.o=o||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}V(Nt,Z);var cm=/^https?$/i,hm=["POST","PUT"];e=Nt.prototype,e.Ha=function(o){this.J=o},e.ea=function(o,u,h,m){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+o);u=u?u.toUpperCase():"GET",this.D=o,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Mo.g(),this.v=this.o?Jl(this.o):Jl(Mo),this.g.onreadystatechange=_(this.Ea,this);try{this.B=!0,this.g.open(u,String(o),!0),this.B=!1}catch(C){wu(this,C);return}if(o=h||"",h=new Map(this.headers),m)if(Object.getPrototypeOf(m)===Object.prototype)for(var R in m)h.set(R,m[R]);else if(typeof m.keys=="function"&&typeof m.get=="function")for(const C of m.keys())h.set(C,m.get(C));else throw Error("Unknown input type for opt_headers: "+String(m));m=Array.from(h.keys()).find(C=>C.toLowerCase()=="content-type"),R=l.FormData&&o instanceof l.FormData,!(0<=Array.prototype.indexOf.call(hm,u,void 0))||m||R||h.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[C,j]of h)this.g.setRequestHeader(C,j);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Su(this),this.u=!0,this.g.send(o),this.u=!1}catch(C){wu(this,C)}};function wu(o,u){o.h=!1,o.g&&(o.j=!0,o.g.abort(),o.j=!1),o.l=u,o.m=5,Au(o),li(o)}function Au(o){o.A||(o.A=!0,ot(o,"complete"),ot(o,"error"))}e.abort=function(o){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=o||7,ot(this,"complete"),ot(this,"abort"),li(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),li(this,!0)),Nt.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?bu(this):this.bb())},e.bb=function(){bu(this)};function bu(o){if(o.h&&typeof a<"u"&&(!o.v[1]||We(o)!=4||o.Z()!=2)){if(o.u&&We(o)==4)Kt(o.Ea,0,o);else if(ot(o,"readystatechange"),We(o)==4){o.h=!1;try{const j=o.Z();t:switch(j){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var u=!0;break t;default:u=!1}var h;if(!(h=u)){var m;if(m=j===0){var R=String(o.D).match(mu)[1]||null;!R&&l.self&&l.self.location&&(R=l.self.location.protocol.slice(0,-1)),m=!cm.test(R?R.toLowerCase():"")}h=m}if(h)ot(o,"complete"),ot(o,"success");else{o.m=6;try{var C=2<We(o)?o.g.statusText:""}catch{C=""}o.l=C+" ["+o.Z()+"]",Au(o)}}finally{li(o)}}}}function li(o,u){if(o.g){Su(o);const h=o.g,m=o.v[0]?()=>{}:null;o.g=null,o.v=null,u||ot(o,"ready");try{h.onreadystatechange=m}catch{}}}function Su(o){o.I&&(l.clearTimeout(o.I),o.I=null)}e.isActive=function(){return!!this.g};function We(o){return o.g?o.g.readyState:0}e.Z=function(){try{return 2<We(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(o){if(this.g){var u=this.g.responseText;return o&&u.indexOf(o)==0&&(u=u.substring(o.length)),Te(u)}};function Ru(o){try{if(!o.g)return null;if("response"in o.g)return o.g.response;switch(o.H){case"":case"text":return o.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in o.g)return o.g.mozResponseArrayBuffer}return null}catch{return null}}function fm(o){const u={};o=(o.g&&2<=We(o)&&o.g.getAllResponseHeaders()||"").split(`\r
`);for(let m=0;m<o.length;m++){if(G(o[m]))continue;var h=w(o[m]);const R=h[0];if(h=h[1],typeof h!="string")continue;h=h.trim();const C=u[R]||[];u[R]=C,C.push(h)}I(u,function(m){return m.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ns(o,u,h){return h&&h.internalChannelParams&&h.internalChannelParams[o]||u}function Cu(o){this.Aa=0,this.i=[],this.j=new Qr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ns("failFast",!1,o),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ns("baseRetryDelayMs",5e3,o),this.cb=ns("retryDelaySeedMs",1e4,o),this.Wa=ns("forwardChannelMaxRetries",2,o),this.wa=ns("forwardChannelRequestTimeoutMs",2e4,o),this.pa=o&&o.xmlHttpFactory||void 0,this.Xa=o&&o.Tb||void 0,this.Ca=o&&o.useFetchStreams||!1,this.L=void 0,this.J=o&&o.supportsCrossDomainXhr||!1,this.K="",this.h=new uu(o&&o.concurrentRequestLimit),this.Da=new lm,this.P=o&&o.fastHandshake||!1,this.O=o&&o.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=o&&o.Rb||!1,o&&o.xa&&this.j.xa(),o&&o.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&o&&o.detectBufferingProxy||!1,this.ja=void 0,o&&o.longPollingTimeout&&0<o.longPollingTimeout&&(this.ja=o.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=Cu.prototype,e.la=8,e.G=1,e.connect=function(o,u,h,m){he(0),this.W=o,this.H=u||{},h&&m!==void 0&&(this.H.OSID=h,this.H.OAID=m),this.F=this.X,this.I=Fu(this,null,this.W),ci(this)};function Ho(o){if(Pu(o),o.G==3){var u=o.U++,h=Ke(o.I);if(Ct(h,"SID",o.K),Ct(h,"RID",u),Ct(h,"TYPE","terminate"),rs(o,h),u=new ln(o,o.j,u),u.L=2,u.v=ii(Ke(h)),h=!1,l.navigator&&l.navigator.sendBeacon)try{h=l.navigator.sendBeacon(u.v.toString(),"")}catch{}!h&&l.Image&&(new Image().src=u.v,h=!0),h||(u.g=Lu(u.j,null),u.g.ea(u.v)),u.F=Date.now(),ni(u)}Mu(o)}function ui(o){o.g&&(Ko(o),o.g.cancel(),o.g=null)}function Pu(o){ui(o),o.u&&(l.clearTimeout(o.u),o.u=null),hi(o),o.h.cancel(),o.s&&(typeof o.s=="number"&&l.clearTimeout(o.s),o.s=null)}function ci(o){if(!cu(o.h)&&!o.s){o.s=!0;var u=o.Ga;it||Nn(),pt||(it(),pt=!0),be.add(u,o),o.B=0}}function dm(o,u){return hu(o.h)>=o.h.j-(o.s?1:0)?!1:o.s?(o.i=u.D.concat(o.i),!0):o.G==1||o.G==2||o.B>=(o.Va?0:o.Wa)?!1:(o.s=Gr(_(o.Ga,o,u),ku(o,o.B)),o.B++,!0)}e.Ga=function(o){if(this.s)if(this.s=null,this.G==1){if(!o){this.U=Math.floor(1e5*Math.random()),o=this.U++;const R=new ln(this,this.j,o);let C=this.o;if(this.S&&(C?(C=g(C),T(C,this.S)):C=this.S),this.m!==null||this.O||(R.H=C,C=null),this.P)t:{for(var u=0,h=0;h<this.i.length;h++){e:{var m=this.i[h];if("__data__"in m.map&&(m=m.map.__data__,typeof m=="string")){m=m.length;break e}m=void 0}if(m===void 0)break;if(u+=m,4096<u){u=h;break t}if(u===4096||h===this.i.length-1){u=h+1;break t}}u=1e3}else u=1e3;u=Du(this,R,u),h=Ke(this.I),Ct(h,"RID",o),Ct(h,"CVER",22),this.D&&Ct(h,"X-HTTP-Session-Id",this.D),rs(this,h),C&&(this.O?u="headers="+encodeURIComponent(String(Iu(C)))+"&"+u:this.m&&qo(h,this.m,C)),$o(this.h,R),this.Ua&&Ct(h,"TYPE","init"),this.P?(Ct(h,"$req",u),Ct(h,"SID","null"),R.T=!0,Lo(R,h,null)):Lo(R,h,u),this.G=2}}else this.G==3&&(o?Vu(this,o):this.i.length==0||cu(this.h)||Vu(this))};function Vu(o,u){var h;u?h=u.l:h=o.U++;const m=Ke(o.I);Ct(m,"SID",o.K),Ct(m,"RID",h),Ct(m,"AID",o.T),rs(o,m),o.m&&o.o&&qo(m,o.m,o.o),h=new ln(o,o.j,h,o.B+1),o.m===null&&(h.H=o.o),u&&(o.i=u.D.concat(o.i)),u=Du(o,h,1e3),h.I=Math.round(.5*o.wa)+Math.round(.5*o.wa*Math.random()),$o(o.h,h),Lo(h,m,u)}function rs(o,u){o.H&&It(o.H,function(h,m){Ct(u,m,h)}),o.l&&pu({},function(h,m){Ct(u,m,h)})}function Du(o,u,h){h=Math.min(o.i.length,h);var m=o.l?_(o.l.Na,o.l,o):null;t:{var R=o.i;let C=-1;for(;;){const j=["count="+h];C==-1?0<h?(C=R[0].g,j.push("ofs="+C)):C=0:j.push("ofs="+C);let wt=!0;for(let Qt=0;Qt<h;Qt++){let mt=R[Qt].g;const ee=R[Qt].map;if(mt-=C,0>mt)C=Math.max(0,R[Qt].g-100),wt=!1;else try{um(ee,j,"req"+mt+"_")}catch{m&&m(ee)}}if(wt){m=j.join("&");break t}}}return o=o.i.splice(0,h),u.D=o,m}function xu(o){if(!o.g&&!o.u){o.Y=1;var u=o.Fa;it||Nn(),pt||(it(),pt=!0),be.add(u,o),o.v=0}}function zo(o){return o.g||o.u||3<=o.v?!1:(o.Y++,o.u=Gr(_(o.Fa,o),ku(o,o.v)),o.v++,!0)}e.Fa=function(){if(this.u=null,Nu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var o=2*this.R;this.j.info("BP detection timer enabled: "+o),this.A=Gr(_(this.ab,this),o)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,he(10),ui(this),Nu(this))};function Ko(o){o.A!=null&&(l.clearTimeout(o.A),o.A=null)}function Nu(o){o.g=new ln(o,o.j,"rpc",o.Y),o.m===null&&(o.g.H=o.o),o.g.O=0;var u=Ke(o.qa);Ct(u,"RID","rpc"),Ct(u,"SID",o.K),Ct(u,"AID",o.T),Ct(u,"CI",o.F?"0":"1"),!o.F&&o.ja&&Ct(u,"TO",o.ja),Ct(u,"TYPE","xmlhttp"),rs(o,u),o.m&&o.o&&qo(u,o.m,o.o),o.L&&(o.g.I=o.L);var h=o.g;o=o.ia,h.L=1,h.v=ii(Ke(u)),h.m=null,h.P=!0,ou(h,o)}e.Za=function(){this.C!=null&&(this.C=null,ui(this),zo(this),he(19))};function hi(o){o.C!=null&&(l.clearTimeout(o.C),o.C=null)}function Ou(o,u){var h=null;if(o.g==u){hi(o),Ko(o),o.g=null;var m=2}else if(jo(o.h,u))h=u.D,fu(o.h,u),m=1;else return;if(o.G!=0){if(u.o)if(m==1){h=u.m?u.m.length:0,u=Date.now()-u.F;var R=o.B;m=Zs(),ot(m,new nu(m,h)),ci(o)}else xu(o);else if(R=u.s,R==3||R==0&&0<u.X||!(m==1&&dm(o,u)||m==2&&zo(o)))switch(h&&0<h.length&&(u=o.h,u.i=u.i.concat(h)),R){case 1:Un(o,5);break;case 4:Un(o,10);break;case 3:Un(o,6);break;default:Un(o,2)}}}function ku(o,u){let h=o.Ta+Math.floor(Math.random()*o.cb);return o.isActive()||(h*=2),h*u}function Un(o,u){if(o.j.info("Error code "+u),u==2){var h=_(o.fb,o),m=o.Xa;const R=!m;m=new Ln(m||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||ri(m,"https"),ii(m),R?om(m.toString(),h):am(m.toString(),h)}else he(2);o.G=0,o.l&&o.l.sa(u),Mu(o),Pu(o)}e.fb=function(o){o?(this.j.info("Successfully pinged google.com"),he(2)):(this.j.info("Failed to ping google.com"),he(1))};function Mu(o){if(o.G=0,o.ka=[],o.l){const u=du(o.h);(u.length!=0||o.i.length!=0)&&(L(o.ka,u),L(o.ka,o.i),o.h.i.length=0,M(o.i),o.i.length=0),o.l.ra()}}function Fu(o,u,h){var m=h instanceof Ln?Ke(h):new Ln(h);if(m.g!="")u&&(m.g=u+"."+m.g),si(m,m.s);else{var R=l.location;m=R.protocol,u=u?u+"."+R.hostname:R.hostname,R=+R.port;var C=new Ln(null);m&&ri(C,m),u&&(C.g=u),R&&si(C,R),h&&(C.l=h),m=C}return h=o.D,u=o.ya,h&&u&&Ct(m,h,u),Ct(m,"VER",o.la),rs(o,m),m}function Lu(o,u,h){if(u&&!o.J)throw Error("Can't create secondary domain capable XhrIo object.");return u=o.Ca&&!o.pa?new Nt(new oi({eb:h})):new Nt(o.pa),u.Ha(o.J),u}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function Uu(){}e=Uu.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function fi(){}fi.prototype.g=function(o,u){return new _e(o,u)};function _e(o,u){Z.call(this),this.g=new Cu(u),this.l=o,this.h=u&&u.messageUrlParams||null,o=u&&u.messageHeaders||null,u&&u.clientProtocolHeaderRequired&&(o?o["X-Client-Protocol"]="webchannel":o={"X-Client-Protocol":"webchannel"}),this.g.o=o,o=u&&u.initMessageHeaders||null,u&&u.messageContentType&&(o?o["X-WebChannel-Content-Type"]=u.messageContentType:o={"X-WebChannel-Content-Type":u.messageContentType}),u&&u.va&&(o?o["X-WebChannel-Client-Profile"]=u.va:o={"X-WebChannel-Client-Profile":u.va}),this.g.S=o,(o=u&&u.Sb)&&!G(o)&&(this.g.m=o),this.v=u&&u.supportsCrossDomainXhr||!1,this.u=u&&u.sendRawJson||!1,(u=u&&u.httpSessionIdParam)&&!G(u)&&(this.g.D=u,o=this.h,o!==null&&u in o&&(o=this.h,u in o&&delete o[u])),this.j=new cr(this)}V(_e,Z),_e.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},_e.prototype.close=function(){Ho(this.g)},_e.prototype.o=function(o){var u=this.g;if(typeof o=="string"){var h={};h.__data__=o,o=h}else this.u&&(h={},h.__data__=Gt(o),o=h);u.i.push(new Xp(u.Ya++,o)),u.G==3&&ci(u)},_e.prototype.N=function(){this.g.l=null,delete this.j,Ho(this.g),delete this.g,_e.aa.N.call(this)};function Bu(o){Oo.call(this),o.__headers__&&(this.headers=o.__headers__,this.statusCode=o.__status__,delete o.__headers__,delete o.__status__);var u=o.__sm__;if(u){t:{for(const h in u){o=h;break t}o=void 0}(this.i=o)&&(o=this.i,u=u!==null&&o in u?u[o]:void 0),this.data=u}else this.data=o}V(Bu,Oo);function ju(){ko.call(this),this.status=1}V(ju,ko);function cr(o){this.g=o}V(cr,Uu),cr.prototype.ua=function(){ot(this.g,"a")},cr.prototype.ta=function(o){ot(this.g,new Bu(o))},cr.prototype.sa=function(o){ot(this.g,new ju)},cr.prototype.ra=function(){ot(this.g,"b")},fi.prototype.createWebChannel=fi.prototype.g,_e.prototype.send=_e.prototype.o,_e.prototype.open=_e.prototype.m,_e.prototype.close=_e.prototype.close,pd=function(){return new fi},dd=function(){return Zs()},fd=Mn,Va={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ti.NO_ERROR=0,ti.TIMEOUT=8,ti.HTTP_ERROR=6,Ci=ti,ru.COMPLETE="complete",hd=ru,Yl.EventType=Kr,Kr.OPEN="a",Kr.CLOSE="b",Kr.ERROR="c",Kr.MESSAGE="d",Z.prototype.listen=Z.prototype.K,us=Yl,Nt.prototype.listenOnce=Nt.prototype.L,Nt.prototype.getLastError=Nt.prototype.Ka,Nt.prototype.getLastErrorCode=Nt.prototype.Ba,Nt.prototype.getStatus=Nt.prototype.Z,Nt.prototype.getResponseJson=Nt.prototype.Oa,Nt.prototype.getResponseText=Nt.prototype.oa,Nt.prototype.send=Nt.prototype.ea,Nt.prototype.setWithCredentials=Nt.prototype.Ha,cd=Nt}).apply(typeof _i<"u"?_i:typeof self<"u"?self:typeof window<"u"?window:{});const Mc="@firebase/firestore",Fc="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ie{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}ie.UNAUTHENTICATED=new ie(null),ie.GOOGLE_CREDENTIALS=new ie("google-credentials-uid"),ie.FIRST_PARTY=new ie("first-party-uid"),ie.MOCK_USER=new ie("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ur="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yn=new rd("@firebase/firestore");function Er(){return Yn.logLevel}function H(e,...t){if(Yn.logLevel<=dt.DEBUG){const n=t.map(yl);Yn.debug(`Firestore (${Ur}): ${e}`,...n)}}function rn(e,...t){if(Yn.logLevel<=dt.ERROR){const n=t.map(yl);Yn.error(`Firestore (${Ur}): ${e}`,...n)}}function Sn(e,...t){if(Yn.logLevel<=dt.WARN){const n=t.map(yl);Yn.warn(`Firestore (${Ur}): ${e}`,...n)}}function yl(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tt(e,t,n){let r="Unexpected state";typeof t=="string"?r=t:n=t,md(e,r,n)}function md(e,t,n){let r=`FIRESTORE (${Ur}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw rn(r),new Error(r)}function Et(e,t,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,e||md(t,s,r)}function st(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class K extends Lr{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(){this.promise=new Promise(((t,n)=>{this.resolve=t,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gd{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class $v{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable((()=>n(ie.UNAUTHENTICATED)))}shutdown(){}}class qv{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class Hv{constructor(t){this.t=t,this.currentUser=ie.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){Et(this.o===void 0,42304);let r=this.i;const s=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let i=new Tn;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Tn,t.enqueueRetryable((()=>s(this.currentUser)))};const a=()=>{const c=i;t.enqueueRetryable((async()=>{await c.promise,await s(this.currentUser)}))},l=c=>{H("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit((c=>l(c))),setTimeout((()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(H("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Tn)}}),0),a()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==t?(H("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Et(typeof r.accessToken=="string",31837,{l:r}),new gd(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return Et(t===null||typeof t=="string",2055,{h:t}),new ie(t)}}class zv{constructor(t,n,r){this.P=t,this.T=n,this.I=r,this.type="FirstParty",this.user=ie.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Kv{constructor(t,n,r){this.P=t,this.T=n,this.I=r}getToken(){return Promise.resolve(new zv(this.P,this.T,this.I))}start(t,n){t.enqueueRetryable((()=>n(ie.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Lc{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Wv{constructor(t,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Rv(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,n){Et(this.o===void 0,3512);const r=i=>{i.error!=null&&H("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const a=i.token!==this.m;return this.m=i.token,H("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(i.token):Promise.resolve()};this.o=i=>{t.enqueueRetryable((()=>r(i)))};const s=i=>{H("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((i=>s(i))),setTimeout((()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):H("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Lc(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((n=>n?(Et(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Lc(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gv(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _d(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vl{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=Gv(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=t.charAt(s[i]%62))}return r}}function ut(e,t){return e<t?-1:e>t?1:0}function Da(e,t){let n=0;for(;n<e.length&&n<t.length;){const r=e.codePointAt(n),s=t.codePointAt(n);if(r!==s){if(r<128&&s<128)return ut(r,s);{const i=_d(),a=Qv(i.encode(Uc(e,n)),i.encode(Uc(t,n)));return a!==0?a:ut(r,s)}}n+=r>65535?2:1}return ut(e.length,t.length)}function Uc(e,t){return e.codePointAt(t)>65535?e.substring(t,t+2):e.substring(t,t+1)}function Qv(e,t){for(let n=0;n<e.length&&n<t.length;++n)if(e[n]!==t[n])return ut(e[n],t[n]);return ut(e.length,t.length)}function xr(e,t,n){return e.length===t.length&&e.every(((r,s)=>n(r,t[s])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bc="__name__";class ke{constructor(t,n,r){n===void 0?n=0:n>t.length&&tt(637,{offset:n,range:t.length}),r===void 0?r=t.length-n:r>t.length-n&&tt(1746,{length:r,range:t.length-n}),this.segments=t,this.offset=n,this.len=r}get length(){return this.len}isEqual(t){return ke.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof ke?t.forEach((r=>{n.push(r)})):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,r=this.limit();n<r;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const r=Math.min(t.length,n.length);for(let s=0;s<r;s++){const i=ke.compareSegments(t.get(s),n.get(s));if(i!==0)return i}return ut(t.length,n.length)}static compareSegments(t,n){const r=ke.isNumericId(t),s=ke.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?ke.extractNumericId(t).compare(ke.extractNumericId(n)):Da(t,n)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return En.fromString(t.substring(4,t.length-2))}}class St extends ke{construct(t,n,r){return new St(t,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const r of t){if(r.indexOf("//")>=0)throw new K(D.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((s=>s.length>0)))}return new St(n)}static emptyPath(){return new St([])}}const Xv=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Yt extends ke{construct(t,n,r){return new Yt(t,n,r)}static isValidIdentifier(t){return Xv.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Yt.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Bc}static keyField(){return new Yt([Bc])}static fromServerFormat(t){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new K(D.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let a=!1;for(;s<t.length;){const l=t[s];if(l==="\\"){if(s+1===t.length)throw new K(D.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const c=t[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new K(D.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=c,s+=2}else l==="`"?(a=!a,s++):l!=="."||a?(r+=l,s++):(i(),s++)}if(i(),a)throw new K(D.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Yt(n)}static emptyPath(){return new Yt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J{constructor(t){this.path=t}static fromPath(t){return new J(St.fromString(t))}static fromName(t){return new J(St.fromString(t).popFirst(5))}static empty(){return new J(St.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&St.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return St.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new J(new St(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yd(e,t,n){if(!n)throw new K(D.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function Jv(e,t,n,r){if(t===!0&&r===!0)throw new K(D.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function jc(e){if(!J.isDocumentKey(e))throw new K(D.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function $c(e){if(J.isDocumentKey(e))throw new K(D.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function vd(e){return typeof e=="object"&&e!==null&&(Object.getPrototypeOf(e)===Object.prototype||Object.getPrototypeOf(e)===null)}function vo(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=(function(r){return r.constructor?r.constructor.name:null})(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":tt(12329,{type:typeof e})}function In(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new K(D.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=vo(e);throw new K(D.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ut(e,t){const n={typeString:e};return t&&(n.value=t),n}function Hs(e,t){if(!vd(e))throw new K(D.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in t)if(t[r]){const s=t[r].typeString,i="value"in t[r]?{value:t[r].value}:void 0;if(!(r in e)){n=`JSON missing required field: '${r}'`;break}const a=e[r];if(s&&typeof a!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&a!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new K(D.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qc=-62135596800,Hc=1e6;class Pt{static now(){return Pt.fromMillis(Date.now())}static fromDate(t){return Pt.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),r=Math.floor((t-1e3*n)*Hc);return new Pt(n,r)}constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new K(D.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new K(D.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<qc)throw new K(D.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new K(D.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Hc}_compareTo(t){return this.seconds===t.seconds?ut(this.nanoseconds,t.nanoseconds):ut(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Pt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(Hs(t,Pt._jsonSchema))return new Pt(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-qc;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Pt._jsonSchemaVersion="firestore/timestamp/1.0",Pt._jsonSchema={type:Ut("string",Pt._jsonSchemaVersion),seconds:Ut("number"),nanoseconds:Ut("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rt{static fromTimestamp(t){return new rt(t)}static min(){return new rt(new Pt(0,0))}static max(){return new rt(new Pt(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ns=-1;function Yv(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,s=rt.fromTimestamp(r===1e9?new Pt(n+1,0):new Pt(n,r));return new Rn(s,J.empty(),t)}function Zv(e){return new Rn(e.readTime,e.key,Ns)}class Rn{constructor(t,n,r){this.readTime=t,this.documentKey=n,this.largestBatchId=r}static min(){return new Rn(rt.min(),J.empty(),Ns)}static max(){return new Rn(rt.max(),J.empty(),Ns)}}function tE(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=J.comparator(e.documentKey,t.documentKey),n!==0?n:ut(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eE="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class nE{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Br(e){if(e.code!==D.FAILED_PRECONDITION||e.message!==eE)throw e;H("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&tt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new x(((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(t,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}}))}toPromise(){return new Promise(((t,n)=>{this.next(t,n)}))}wrapUserFunction(t){try{const n=t();return n instanceof x?n:x.resolve(n)}catch(n){return x.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction((()=>t(n))):x.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction((()=>t(n))):x.reject(n)}static resolve(t){return new x(((n,r)=>{n(t)}))}static reject(t){return new x(((n,r)=>{r(t)}))}static waitFor(t){return new x(((n,r)=>{let s=0,i=0,a=!1;t.forEach((l=>{++s,l.next((()=>{++i,a&&i===s&&n()}),(c=>r(c)))})),a=!0,i===s&&n()}))}static or(t){let n=x.resolve(!1);for(const r of t)n=n.next((s=>s?x.resolve(s):r()));return n}static forEach(t,n){const r=[];return t.forEach(((s,i)=>{r.push(n.call(this,s,i))})),this.waitFor(r)}static mapArray(t,n){return new x(((r,s)=>{const i=t.length,a=new Array(i);let l=0;for(let c=0;c<i;c++){const f=c;n(t[f]).next((d=>{a[f]=d,++l,l===i&&r(a)}),(d=>s(d)))}}))}static doWhile(t,n){return new x(((r,s)=>{const i=()=>{t()===!0?n().next((()=>{i()}),s):r()};i()}))}}function rE(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function jr(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eo{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=r=>this._e(r),this.ae=r=>n.writeSequenceNumber(r))}_e(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ae&&this.ae(t),t}}Eo.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const El=-1;function To(e){return e==null}function Qi(e){return e===0&&1/e==-1/0}function sE(e){return typeof e=="number"&&Number.isInteger(e)&&!Qi(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ed="";function iE(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=zc(t)),t=oE(e.get(n),t);return zc(t)}function oE(e,t){let n=t;const r=e.length;for(let s=0;s<r;s++){const i=e.charAt(s);switch(i){case"\0":n+="";break;case Ed:n+="";break;default:n+=i}}return n}function zc(e){return e+Ed+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kc(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function nr(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Td(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt{constructor(t,n){this.comparator=t,this.root=n||Xt.EMPTY}insert(t,n){return new xt(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Xt.BLACK,null,null))}remove(t){return new xt(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Xt.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(t,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(t){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(t,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((n,r)=>(t(n,r),!1)))}toString(){const t=[];return this.inorderTraversal(((n,r)=>(t.push(`${n}:${r}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new yi(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new yi(this.root,t,this.comparator,!1)}getReverseIterator(){return new yi(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new yi(this.root,t,this.comparator,!0)}}class yi{constructor(t,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!t.isEmpty();)if(i=n?r(t.key,n):1,n&&s&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(i===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Xt{constructor(t,n,r,s,i){this.key=t,this.value=n,this.color=r??Xt.RED,this.left=s??Xt.EMPTY,this.right=i??Xt.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,r,s,i){return new Xt(t??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,r){let s=this;const i=r(t,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(t,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(t,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Xt.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let r,s=this;if(n(t,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(t,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(t,s.key)===0){if(s.right.isEmpty())return Xt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(t,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Xt.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Xt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw tt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw tt(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw tt(27949);return t+(this.isRed()?0:1)}}Xt.EMPTY=null,Xt.RED=!0,Xt.BLACK=!1;Xt.EMPTY=new class{constructor(){this.size=0}get key(){throw tt(57766)}get value(){throw tt(16141)}get color(){throw tt(16727)}get left(){throw tt(29726)}get right(){throw tt(36894)}copy(t,n,r,s,i){return this}insert(t,n,r){return new Xt(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{constructor(t){this.comparator=t,this.data=new xt(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((n,r)=>(t(n),!1)))}forEachInRange(t,n){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,t[1])>=0)return;n(s.key)}}forEachWhile(t,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new Wc(this.data.getIterator())}getIteratorFrom(t){return new Wc(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach((r=>{n=n.add(r)})),n}isEqual(t){if(!(t instanceof Ht)||this.size!==t.size)return!1;const n=this.data.getIterator(),r=t.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const t=[];return this.forEach((n=>{t.push(n)})),t}toString(){const t=[];return this.forEach((n=>t.push(n))),"SortedSet("+t.toString()+")"}copy(t){const n=new Ht(this.comparator);return n.data=t,n}}class Wc{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Re{constructor(t){this.fields=t,t.sort(Yt.comparator)}static empty(){return new Re([])}unionWith(t){let n=new Ht(Yt.comparator);for(const r of this.fields)n=n.add(r);for(const r of t)n=n.add(r);return new Re(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return xr(this.fields,t.fields,((n,r)=>n.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Id extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(t){this.binaryString=t}static fromBase64String(t){const n=(function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new Id("Invalid base64 string: "+i):i}})(t);return new Zt(n)}static fromUint8Array(t){const n=(function(s){let i="";for(let a=0;a<s.length;++a)i+=String.fromCharCode(s[a]);return i})(t);return new Zt(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return ut(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Zt.EMPTY_BYTE_STRING=new Zt("");const aE=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Cn(e){if(Et(!!e,39018),typeof e=="string"){let t=0;const n=aE.exec(e);if(Et(!!n,46558,{timestamp:e}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),t=Number(s)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Ot(e.seconds),nanos:Ot(e.nanos)}}function Ot(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function Pn(e){return typeof e=="string"?Zt.fromBase64String(e):Zt.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wd="server_timestamp",Ad="__type__",bd="__previous_value__",Sd="__local_write_time__";function Tl(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{})[Ad])===null||n===void 0?void 0:n.stringValue)===wd}function Io(e){const t=e.mapValue.fields[bd];return Tl(t)?Io(t):t}function Os(e){const t=Cn(e.mapValue.fields[Sd].timestampValue);return new Pt(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lE{constructor(t,n,r,s,i,a,l,c,f,d){this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=f,this.isUsingEmulator=d}}const Xi="(default)";class ks{constructor(t,n){this.projectId=t,this.database=n||Xi}static empty(){return new ks("","")}get isDefaultDatabase(){return this.database===Xi}isEqual(t){return t instanceof ks&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rd="__type__",uE="__max__",vi={mapValue:{}},Cd="__vector__",Ji="value";function Vn(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Tl(e)?4:hE(e)?9007199254740991:cE(e)?10:11:tt(28295,{value:e})}function qe(e,t){if(e===t)return!0;const n=Vn(e);if(n!==Vn(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Os(e).isEqual(Os(t));case 3:return(function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const a=Cn(s.timestampValue),l=Cn(i.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos})(e,t);case 5:return e.stringValue===t.stringValue;case 6:return(function(s,i){return Pn(s.bytesValue).isEqual(Pn(i.bytesValue))})(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return(function(s,i){return Ot(s.geoPointValue.latitude)===Ot(i.geoPointValue.latitude)&&Ot(s.geoPointValue.longitude)===Ot(i.geoPointValue.longitude)})(e,t);case 2:return(function(s,i){if("integerValue"in s&&"integerValue"in i)return Ot(s.integerValue)===Ot(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const a=Ot(s.doubleValue),l=Ot(i.doubleValue);return a===l?Qi(a)===Qi(l):isNaN(a)&&isNaN(l)}return!1})(e,t);case 9:return xr(e.arrayValue.values||[],t.arrayValue.values||[],qe);case 10:case 11:return(function(s,i){const a=s.mapValue.fields||{},l=i.mapValue.fields||{};if(Kc(a)!==Kc(l))return!1;for(const c in a)if(a.hasOwnProperty(c)&&(l[c]===void 0||!qe(a[c],l[c])))return!1;return!0})(e,t);default:return tt(52216,{left:e})}}function Ms(e,t){return(e.values||[]).find((n=>qe(n,t)))!==void 0}function Nr(e,t){if(e===t)return 0;const n=Vn(e),r=Vn(t);if(n!==r)return ut(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ut(e.booleanValue,t.booleanValue);case 2:return(function(i,a){const l=Ot(i.integerValue||i.doubleValue),c=Ot(a.integerValue||a.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1})(e,t);case 3:return Gc(e.timestampValue,t.timestampValue);case 4:return Gc(Os(e),Os(t));case 5:return Da(e.stringValue,t.stringValue);case 6:return(function(i,a){const l=Pn(i),c=Pn(a);return l.compareTo(c)})(e.bytesValue,t.bytesValue);case 7:return(function(i,a){const l=i.split("/"),c=a.split("/");for(let f=0;f<l.length&&f<c.length;f++){const d=ut(l[f],c[f]);if(d!==0)return d}return ut(l.length,c.length)})(e.referenceValue,t.referenceValue);case 8:return(function(i,a){const l=ut(Ot(i.latitude),Ot(a.latitude));return l!==0?l:ut(Ot(i.longitude),Ot(a.longitude))})(e.geoPointValue,t.geoPointValue);case 9:return Qc(e.arrayValue,t.arrayValue);case 10:return(function(i,a){var l,c,f,d;const p=i.fields||{},_=a.fields||{},b=(l=p[Ji])===null||l===void 0?void 0:l.arrayValue,V=(c=_[Ji])===null||c===void 0?void 0:c.arrayValue,M=ut(((f=b==null?void 0:b.values)===null||f===void 0?void 0:f.length)||0,((d=V==null?void 0:V.values)===null||d===void 0?void 0:d.length)||0);return M!==0?M:Qc(b,V)})(e.mapValue,t.mapValue);case 11:return(function(i,a){if(i===vi.mapValue&&a===vi.mapValue)return 0;if(i===vi.mapValue)return 1;if(a===vi.mapValue)return-1;const l=i.fields||{},c=Object.keys(l),f=a.fields||{},d=Object.keys(f);c.sort(),d.sort();for(let p=0;p<c.length&&p<d.length;++p){const _=Da(c[p],d[p]);if(_!==0)return _;const b=Nr(l[c[p]],f[d[p]]);if(b!==0)return b}return ut(c.length,d.length)})(e.mapValue,t.mapValue);default:throw tt(23264,{le:n})}}function Gc(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return ut(e,t);const n=Cn(e),r=Cn(t),s=ut(n.seconds,r.seconds);return s!==0?s:ut(n.nanos,r.nanos)}function Qc(e,t){const n=e.values||[],r=t.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Nr(n[s],r[s]);if(i)return i}return ut(n.length,r.length)}function Or(e){return xa(e)}function xa(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?(function(n){const r=Cn(n);return`time(${r.seconds},${r.nanos})`})(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?(function(n){return Pn(n).toBase64()})(e.bytesValue):"referenceValue"in e?(function(n){return J.fromName(n).toString()})(e.referenceValue):"geoPointValue"in e?(function(n){return`geo(${n.latitude},${n.longitude})`})(e.geoPointValue):"arrayValue"in e?(function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=xa(i);return r+"]"})(e.arrayValue):"mapValue"in e?(function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const a of r)i?i=!1:s+=",",s+=`${a}:${xa(n.fields[a])}`;return s+"}"})(e.mapValue):tt(61005,{value:e})}function Pi(e){switch(Vn(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Io(e);return t?16+Pi(t):16;case 5:return 2*e.stringValue.length;case 6:return Pn(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((s,i)=>s+Pi(i)),0)})(e.arrayValue);case 10:case 11:return(function(r){let s=0;return nr(r.fields,((i,a)=>{s+=i.length+Pi(a)})),s})(e.mapValue);default:throw tt(13486,{value:e})}}function Xc(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function Na(e){return!!e&&"integerValue"in e}function Il(e){return!!e&&"arrayValue"in e}function Jc(e){return!!e&&"nullValue"in e}function Yc(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Vi(e){return!!e&&"mapValue"in e}function cE(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{})[Rd])===null||n===void 0?void 0:n.stringValue)===Cd}function Is(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return nr(e.mapValue.fields,((n,r)=>t.mapValue.fields[n]=Is(r))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Is(e.arrayValue.values[n]);return t}return Object.assign({},e)}function hE(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===uE}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ie{constructor(t){this.value=t}static empty(){return new Ie({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let r=0;r<t.length-1;++r)if(n=(n.mapValue.fields||{})[t.get(r)],!Vi(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=Is(n)}setAll(t){let n=Yt.emptyPath(),r={},s=[];t.forEach(((a,l)=>{if(!n.isImmediateParentOf(l)){const c=this.getFieldsMap(n);this.applyChanges(c,r,s),r={},s=[],n=l.popLast()}a?r[l.lastSegment()]=Is(a):s.push(l.lastSegment())}));const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(t){const n=this.field(t.popLast());Vi(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return qe(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<t.length;++r){let s=n.mapValue.fields[t.get(r)];Vi(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[t.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(t,n,r){nr(n,((s,i)=>t[s]=i));for(const s of r)delete t[s]}clone(){return new Ie(Is(this.value))}}function Pd(e){const t=[];return nr(e.fields,((n,r)=>{const s=new Yt([n]);if(Vi(r)){const i=Pd(r.mapValue).fields;if(i.length===0)t.push(s);else for(const a of i)t.push(s.child(a))}else t.push(s)})),new Re(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae{constructor(t,n,r,s,i,a,l){this.key=t,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=a,this.documentState=l}static newInvalidDocument(t){return new ae(t,0,rt.min(),rt.min(),rt.min(),Ie.empty(),0)}static newFoundDocument(t,n,r,s){return new ae(t,1,n,rt.min(),r,s,0)}static newNoDocument(t,n){return new ae(t,2,n,rt.min(),rt.min(),Ie.empty(),0)}static newUnknownDocument(t,n){return new ae(t,3,n,rt.min(),rt.min(),Ie.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(rt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Ie.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Ie.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=rt.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof ae&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new ae(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yi{constructor(t,n){this.position=t,this.inclusive=n}}function Zc(e,t,n){let r=0;for(let s=0;s<e.position.length;s++){const i=t[s],a=e.position[s];if(i.field.isKeyField()?r=J.comparator(J.fromName(a.referenceValue),n.key):r=Nr(a,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function th(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!qe(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zi{constructor(t,n="asc"){this.field=t,this.dir=n}}function fE(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vd{}class Lt extends Vd{constructor(t,n,r){super(),this.field=t,this.op=n,this.value=r}static create(t,n,r){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,r):new pE(t,n,r):n==="array-contains"?new _E(t,r):n==="in"?new yE(t,r):n==="not-in"?new vE(t,r):n==="array-contains-any"?new EE(t,r):new Lt(t,n,r)}static createKeyFieldInFilter(t,n,r){return n==="in"?new mE(t,r):new gE(t,r)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Nr(n,this.value)):n!==null&&Vn(this.value)===Vn(n)&&this.matchesComparison(Nr(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return tt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ve extends Vd{constructor(t,n){super(),this.filters=t,this.op=n,this.he=null}static create(t,n){return new Ve(t,n)}matches(t){return Dd(this)?this.filters.find((n=>!n.matches(t)))===void 0:this.filters.find((n=>n.matches(t)))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce(((t,n)=>t.concat(n.getFlattenedFilters())),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function Dd(e){return e.op==="and"}function xd(e){return dE(e)&&Dd(e)}function dE(e){for(const t of e.filters)if(t instanceof Ve)return!1;return!0}function Oa(e){if(e instanceof Lt)return e.field.canonicalString()+e.op.toString()+Or(e.value);if(xd(e))return e.filters.map((t=>Oa(t))).join(",");{const t=e.filters.map((n=>Oa(n))).join(",");return`${e.op}(${t})`}}function Nd(e,t){return e instanceof Lt?(function(r,s){return s instanceof Lt&&r.op===s.op&&r.field.isEqual(s.field)&&qe(r.value,s.value)})(e,t):e instanceof Ve?(function(r,s){return s instanceof Ve&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce(((i,a,l)=>i&&Nd(a,s.filters[l])),!0):!1})(e,t):void tt(19439)}function Od(e){return e instanceof Lt?(function(n){return`${n.field.canonicalString()} ${n.op} ${Or(n.value)}`})(e):e instanceof Ve?(function(n){return n.op.toString()+" {"+n.getFilters().map(Od).join(" ,")+"}"})(e):"Filter"}class pE extends Lt{constructor(t,n,r){super(t,n,r),this.key=J.fromName(r.referenceValue)}matches(t){const n=J.comparator(t.key,this.key);return this.matchesComparison(n)}}class mE extends Lt{constructor(t,n){super(t,"in",n),this.keys=kd("in",n)}matches(t){return this.keys.some((n=>n.isEqual(t.key)))}}class gE extends Lt{constructor(t,n){super(t,"not-in",n),this.keys=kd("not-in",n)}matches(t){return!this.keys.some((n=>n.isEqual(t.key)))}}function kd(e,t){var n;return(((n=t.arrayValue)===null||n===void 0?void 0:n.values)||[]).map((r=>J.fromName(r.referenceValue)))}class _E extends Lt{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return Il(n)&&Ms(n.arrayValue,this.value)}}class yE extends Lt{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&Ms(this.value.arrayValue,n)}}class vE extends Lt{constructor(t,n){super(t,"not-in",n)}matches(t){if(Ms(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Ms(this.value.arrayValue,n)}}class EE extends Lt{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!Il(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>Ms(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TE{constructor(t,n=null,r=[],s=[],i=null,a=null,l=null){this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=a,this.endAt=l,this.Pe=null}}function eh(e,t=null,n=[],r=[],s=null,i=null,a=null){return new TE(e,t,n,r,s,i,a)}function wl(e){const t=st(e);if(t.Pe===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((r=>Oa(r))).join(","),n+="|ob:",n+=t.orderBy.map((r=>(function(i){return i.field.canonicalString()+i.dir})(r))).join(","),To(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((r=>Or(r))).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((r=>Or(r))).join(",")),t.Pe=n}return t.Pe}function Al(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!fE(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Nd(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!th(e.startAt,t.startAt)&&th(e.endAt,t.endAt)}function ka(e){return J.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zs{constructor(t,n=null,r=[],s=[],i=null,a="F",l=null,c=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=a,this.startAt=l,this.endAt=c,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function IE(e,t,n,r,s,i,a,l){return new zs(e,t,n,r,s,i,a,l)}function bl(e){return new zs(e)}function nh(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function Md(e){return e.collectionGroup!==null}function ws(e){const t=st(e);if(t.Te===null){t.Te=[];const n=new Set;for(const i of t.explicitOrderBy)t.Te.push(i),n.add(i.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new Ht(Yt.comparator);return a.filters.forEach((c=>{c.getFlattenedFilters().forEach((f=>{f.isInequality()&&(l=l.add(f.field))}))})),l})(t).forEach((i=>{n.has(i.canonicalString())||i.isKeyField()||t.Te.push(new Zi(i,r))})),n.has(Yt.keyField().canonicalString())||t.Te.push(new Zi(Yt.keyField(),r))}return t.Te}function Le(e){const t=st(e);return t.Ie||(t.Ie=wE(t,ws(e))),t.Ie}function wE(e,t){if(e.limitType==="F")return eh(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((s=>{const i=s.dir==="desc"?"asc":"desc";return new Zi(s.field,i)}));const n=e.endAt?new Yi(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Yi(e.startAt.position,e.startAt.inclusive):null;return eh(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function Ma(e,t){const n=e.filters.concat([t]);return new zs(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Fa(e,t,n){return new zs(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function wo(e,t){return Al(Le(e),Le(t))&&e.limitType===t.limitType}function Fd(e){return`${wl(Le(e))}|lt:${e.limitType}`}function Tr(e){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((s=>Od(s))).join(", ")}]`),To(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((s=>(function(a){return`${a.field.canonicalString()} (${a.dir})`})(s))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((s=>Or(s))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((s=>Or(s))).join(",")),`Target(${r})`})(Le(e))}; limitType=${e.limitType})`}function Ao(e,t){return t.isFoundDocument()&&(function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):J.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)})(e,t)&&(function(r,s){for(const i of ws(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0})(e,t)&&(function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0})(e,t)&&(function(r,s){return!(r.startAt&&!(function(a,l,c){const f=Zc(a,l,c);return a.inclusive?f<=0:f<0})(r.startAt,ws(r),s)||r.endAt&&!(function(a,l,c){const f=Zc(a,l,c);return a.inclusive?f>=0:f>0})(r.endAt,ws(r),s))})(e,t)}function AE(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Ld(e){return(t,n)=>{let r=!1;for(const s of ws(e)){const i=bE(s,t,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function bE(e,t,n){const r=e.field.isKeyField()?J.comparator(t.key,n.key):(function(i,a,l){const c=a.data.field(i),f=l.data.field(i);return c!==null&&f!==null?Nr(c,f):tt(42886)})(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return tt(19790,{direction:e.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rr{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,t))return i}}has(t){return this.get(t)!==void 0}set(t,n){const r=this.mapKeyFn(t),s=this.inner[r];if(s===void 0)return this.inner[r]=[[t,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],t))return void(s[i]=[t,n]);s.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],t))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(t){nr(this.inner,((n,r)=>{for(const[s,i]of r)t(s,i)}))}isEmpty(){return Td(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SE=new xt(J.comparator);function sn(){return SE}const Ud=new xt(J.comparator);function cs(...e){let t=Ud;for(const n of e)t=t.insert(n.key,n);return t}function Bd(e){let t=Ud;return e.forEach(((n,r)=>t=t.insert(n,r.overlayedDocument))),t}function zn(){return As()}function jd(){return As()}function As(){return new rr((e=>e.toString()),((e,t)=>e.isEqual(t)))}const RE=new xt(J.comparator),CE=new Ht(J.comparator);function ct(...e){let t=CE;for(const n of e)t=t.add(n);return t}const PE=new Ht(ut);function VE(){return PE}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sl(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Qi(t)?"-0":t}}function $d(e){return{integerValue:""+e}}function DE(e,t){return sE(t)?$d(t):Sl(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bo{constructor(){this._=void 0}}function xE(e,t,n){return e instanceof to?(function(s,i){const a={fields:{[Ad]:{stringValue:wd},[Sd]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Tl(i)&&(i=Io(i)),i&&(a.fields[bd]=i),{mapValue:a}})(n,t):e instanceof Fs?Hd(e,t):e instanceof Ls?zd(e,t):(function(s,i){const a=qd(s,i),l=rh(a)+rh(s.Ee);return Na(a)&&Na(s.Ee)?$d(l):Sl(s.serializer,l)})(e,t)}function NE(e,t,n){return e instanceof Fs?Hd(e,t):e instanceof Ls?zd(e,t):n}function qd(e,t){return e instanceof eo?(function(r){return Na(r)||(function(i){return!!i&&"doubleValue"in i})(r)})(t)?t:{integerValue:0}:null}class to extends bo{}class Fs extends bo{constructor(t){super(),this.elements=t}}function Hd(e,t){const n=Kd(t);for(const r of e.elements)n.some((s=>qe(s,r)))||n.push(r);return{arrayValue:{values:n}}}class Ls extends bo{constructor(t){super(),this.elements=t}}function zd(e,t){let n=Kd(t);for(const r of e.elements)n=n.filter((s=>!qe(s,r)));return{arrayValue:{values:n}}}class eo extends bo{constructor(t,n){super(),this.serializer=t,this.Ee=n}}function rh(e){return Ot(e.integerValue||e.doubleValue)}function Kd(e){return Il(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}function OE(e,t){return e.field.isEqual(t.field)&&(function(r,s){return r instanceof Fs&&s instanceof Fs||r instanceof Ls&&s instanceof Ls?xr(r.elements,s.elements,qe):r instanceof eo&&s instanceof eo?qe(r.Ee,s.Ee):r instanceof to&&s instanceof to})(e.transform,t.transform)}class kE{constructor(t,n){this.version=t,this.transformResults=n}}class Ye{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new Ye}static exists(t){return new Ye(void 0,t)}static updateTime(t){return new Ye(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Di(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class So{}function Wd(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new Qd(e.key,Ye.none()):new Ks(e.key,e.data,Ye.none());{const n=e.data,r=Ie.empty();let s=new Ht(Yt.comparator);for(let i of t.fields)if(!s.has(i)){let a=n.field(i);a===null&&i.length>1&&(i=i.popLast(),a=n.field(i)),a===null?r.delete(i):r.set(i,a),s=s.add(i)}return new sr(e.key,r,new Re(s.toArray()),Ye.none())}}function ME(e,t,n){e instanceof Ks?(function(s,i,a){const l=s.value.clone(),c=ih(s.fieldTransforms,i,a.transformResults);l.setAll(c),i.convertToFoundDocument(a.version,l).setHasCommittedMutations()})(e,t,n):e instanceof sr?(function(s,i,a){if(!Di(s.precondition,i))return void i.convertToUnknownDocument(a.version);const l=ih(s.fieldTransforms,i,a.transformResults),c=i.data;c.setAll(Gd(s)),c.setAll(l),i.convertToFoundDocument(a.version,c).setHasCommittedMutations()})(e,t,n):(function(s,i,a){i.convertToNoDocument(a.version).setHasCommittedMutations()})(0,t,n)}function bs(e,t,n,r){return e instanceof Ks?(function(i,a,l,c){if(!Di(i.precondition,a))return l;const f=i.value.clone(),d=oh(i.fieldTransforms,c,a);return f.setAll(d),a.convertToFoundDocument(a.version,f).setHasLocalMutations(),null})(e,t,n,r):e instanceof sr?(function(i,a,l,c){if(!Di(i.precondition,a))return l;const f=oh(i.fieldTransforms,c,a),d=a.data;return d.setAll(Gd(i)),d.setAll(f),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map((p=>p.field)))})(e,t,n,r):(function(i,a,l){return Di(i.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l})(e,t,n)}function FE(e,t){let n=null;for(const r of e.fieldTransforms){const s=t.data.field(r.field),i=qd(r.transform,s||null);i!=null&&(n===null&&(n=Ie.empty()),n.set(r.field,i))}return n||null}function sh(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!(function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&xr(r,s,((i,a)=>OE(i,a)))})(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Ks extends So{constructor(t,n,r,s=[]){super(),this.key=t,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class sr extends So{constructor(t,n,r,s,i=[]){super(),this.key=t,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Gd(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}})),t}function ih(e,t,n){const r=new Map;Et(e.length===n.length,32656,{Ae:n.length,Re:e.length});for(let s=0;s<n.length;s++){const i=e[s],a=i.transform,l=t.data.field(i.field);r.set(i.field,NE(a,l,n[s]))}return r}function oh(e,t,n){const r=new Map;for(const s of e){const i=s.transform,a=n.data.field(s.field);r.set(s.field,xE(i,a,t))}return r}class Qd extends So{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class LE extends So{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UE{constructor(t,n,r,s){this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(t,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(t.key)&&ME(i,t,r[s])}}applyToLocalView(t,n){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(n=bs(r,t,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(n=bs(r,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const r=jd();return this.mutations.forEach((s=>{const i=t.get(s.key),a=i.overlayedDocument;let l=this.applyToLocalView(a,i.mutatedFields);l=n.has(s.key)?null:l;const c=Wd(a,l);c!==null&&r.set(s.key,c),a.isValidDocument()||a.convertToNoDocument(rt.min())})),r}keys(){return this.mutations.reduce(((t,n)=>t.add(n.key)),ct())}isEqual(t){return this.batchId===t.batchId&&xr(this.mutations,t.mutations,((n,r)=>sh(n,r)))&&xr(this.baseMutations,t.baseMutations,((n,r)=>sh(n,r)))}}class Rl{constructor(t,n,r,s){this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(t,n,r){Et(t.mutations.length===r.length,58842,{Ve:t.mutations.length,me:r.length});let s=(function(){return RE})();const i=t.mutations;for(let a=0;a<i.length;a++)s=s.insert(i[a].key,r[a].version);return new Rl(t,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BE{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jE{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ft,ft;function $E(e){switch(e){case D.OK:return tt(64938);case D.CANCELLED:case D.UNKNOWN:case D.DEADLINE_EXCEEDED:case D.RESOURCE_EXHAUSTED:case D.INTERNAL:case D.UNAVAILABLE:case D.UNAUTHENTICATED:return!1;case D.INVALID_ARGUMENT:case D.NOT_FOUND:case D.ALREADY_EXISTS:case D.PERMISSION_DENIED:case D.FAILED_PRECONDITION:case D.ABORTED:case D.OUT_OF_RANGE:case D.UNIMPLEMENTED:case D.DATA_LOSS:return!0;default:return tt(15467,{code:e})}}function Xd(e){if(e===void 0)return rn("GRPC error has no .code"),D.UNKNOWN;switch(e){case Ft.OK:return D.OK;case Ft.CANCELLED:return D.CANCELLED;case Ft.UNKNOWN:return D.UNKNOWN;case Ft.DEADLINE_EXCEEDED:return D.DEADLINE_EXCEEDED;case Ft.RESOURCE_EXHAUSTED:return D.RESOURCE_EXHAUSTED;case Ft.INTERNAL:return D.INTERNAL;case Ft.UNAVAILABLE:return D.UNAVAILABLE;case Ft.UNAUTHENTICATED:return D.UNAUTHENTICATED;case Ft.INVALID_ARGUMENT:return D.INVALID_ARGUMENT;case Ft.NOT_FOUND:return D.NOT_FOUND;case Ft.ALREADY_EXISTS:return D.ALREADY_EXISTS;case Ft.PERMISSION_DENIED:return D.PERMISSION_DENIED;case Ft.FAILED_PRECONDITION:return D.FAILED_PRECONDITION;case Ft.ABORTED:return D.ABORTED;case Ft.OUT_OF_RANGE:return D.OUT_OF_RANGE;case Ft.UNIMPLEMENTED:return D.UNIMPLEMENTED;case Ft.DATA_LOSS:return D.DATA_LOSS;default:return tt(39323,{code:e})}}(ft=Ft||(Ft={}))[ft.OK=0]="OK",ft[ft.CANCELLED=1]="CANCELLED",ft[ft.UNKNOWN=2]="UNKNOWN",ft[ft.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ft[ft.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ft[ft.NOT_FOUND=5]="NOT_FOUND",ft[ft.ALREADY_EXISTS=6]="ALREADY_EXISTS",ft[ft.PERMISSION_DENIED=7]="PERMISSION_DENIED",ft[ft.UNAUTHENTICATED=16]="UNAUTHENTICATED",ft[ft.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ft[ft.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ft[ft.ABORTED=10]="ABORTED",ft[ft.OUT_OF_RANGE=11]="OUT_OF_RANGE",ft[ft.UNIMPLEMENTED=12]="UNIMPLEMENTED",ft[ft.INTERNAL=13]="INTERNAL",ft[ft.UNAVAILABLE=14]="UNAVAILABLE",ft[ft.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qE=new En([4294967295,4294967295],0);function ah(e){const t=_d().encode(e),n=new ud;return n.update(t),new Uint8Array(n.digest())}function lh(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),s=t.getUint32(8,!0),i=t.getUint32(12,!0);return[new En([n,r],0),new En([s,i],0)]}class Cl{constructor(t,n,r){if(this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new hs(`Invalid padding: ${n}`);if(r<0)throw new hs(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new hs(`Invalid hash count: ${r}`);if(t.length===0&&n!==0)throw new hs(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*t.length-n,this.ge=En.fromNumber(this.fe)}pe(t,n,r){let s=t.add(n.multiply(En.fromNumber(r)));return s.compare(qE)===1&&(s=new En([s.getBits(0),s.getBits(1)],0)),s.modulo(this.ge).toNumber()}ye(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.fe===0)return!1;const n=ah(t),[r,s]=lh(n);for(let i=0;i<this.hashCount;i++){const a=this.pe(r,s,i);if(!this.ye(a))return!1}return!0}static create(t,n,r){const s=t%8==0?0:8-t%8,i=new Uint8Array(Math.ceil(t/8)),a=new Cl(i,s,n);return r.forEach((l=>a.insert(l))),a}insert(t){if(this.fe===0)return;const n=ah(t),[r,s]=lh(n);for(let i=0;i<this.hashCount;i++){const a=this.pe(r,s,i);this.we(a)}}we(t){const n=Math.floor(t/8),r=t%8;this.bitmap[n]|=1<<r}}class hs extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ro{constructor(t,n,r,s,i){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(t,n,r){const s=new Map;return s.set(t,Ws.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new Ro(rt.min(),s,new xt(ut),sn(),ct())}}class Ws{constructor(t,n,r,s,i){this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(t,n,r){return new Ws(r,n,ct(),ct(),ct())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi{constructor(t,n,r,s){this.Se=t,this.removedTargetIds=n,this.key=r,this.be=s}}class Jd{constructor(t,n){this.targetId=t,this.De=n}}class Yd{constructor(t,n,r=Zt.EMPTY_BYTE_STRING,s=null){this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=s}}class uh{constructor(){this.ve=0,this.Ce=ch(),this.Fe=Zt.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(t){t.approximateByteSize()>0&&(this.xe=!0,this.Fe=t)}Le(){let t=ct(),n=ct(),r=ct();return this.Ce.forEach(((s,i)=>{switch(i){case 0:t=t.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:tt(38017,{changeType:i})}})),new Ws(this.Fe,this.Me,t,n,r)}ke(){this.xe=!1,this.Ce=ch()}qe(t,n){this.xe=!0,this.Ce=this.Ce.insert(t,n)}Qe(t){this.xe=!0,this.Ce=this.Ce.remove(t)}$e(){this.ve+=1}Ue(){this.ve-=1,Et(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class HE{constructor(t){this.We=t,this.Ge=new Map,this.ze=sn(),this.je=Ei(),this.Je=Ei(),this.He=new xt(ut)}Ye(t){for(const n of t.Se)t.be&&t.be.isFoundDocument()?this.Ze(n,t.be):this.Xe(n,t.key,t.be);for(const n of t.removedTargetIds)this.Xe(n,t.key,t.be)}et(t){this.forEachTarget(t,(n=>{const r=this.tt(n);switch(t.state){case 0:this.nt(n)&&r.Be(t.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(t.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(r.Ke(),r.Be(t.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),r.Be(t.resumeToken));break;default:tt(56790,{state:t.state})}}))}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.Ge.forEach(((r,s)=>{this.nt(s)&&n(s)}))}it(t){const n=t.targetId,r=t.De.count,s=this.st(n);if(s){const i=s.target;if(ka(i))if(r===0){const a=new J(i.path);this.Xe(n,a,ae.newNoDocument(a,rt.min()))}else Et(r===1,20013,{expectedCount:r});else{const a=this.ot(n);if(a!==r){const l=this._t(t),c=l?this.ut(l,t,a):1;if(c!==0){this.rt(n);const f=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(n,f)}}}}}_t(t){const n=t.De.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let a,l;try{a=Pn(r).toUint8Array()}catch(c){if(c instanceof Id)return Sn("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new Cl(a,s,i)}catch(c){return Sn(c instanceof hs?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.fe===0?null:l}ut(t,n,r){return n.De.count===r-this.ht(t,n.targetId)?0:2}ht(t,n){const r=this.We.getRemoteKeysForTarget(n);let s=0;return r.forEach((i=>{const a=this.We.lt(),l=`projects/${a.projectId}/databases/${a.database}/documents/${i.path.canonicalString()}`;t.mightContain(l)||(this.Xe(n,i,null),s++)})),s}Pt(t){const n=new Map;this.Ge.forEach(((i,a)=>{const l=this.st(a);if(l){if(i.current&&ka(l.target)){const c=new J(l.target.path);this.Tt(c).has(a)||this.It(a,c)||this.Xe(a,c,ae.newNoDocument(c,t))}i.Ne&&(n.set(a,i.Le()),i.ke())}}));let r=ct();this.Je.forEach(((i,a)=>{let l=!0;a.forEachWhile((c=>{const f=this.st(c);return!f||f.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)})),l&&(r=r.add(i))})),this.ze.forEach(((i,a)=>a.setReadTime(t)));const s=new Ro(t,n,this.He,this.ze,r);return this.ze=sn(),this.je=Ei(),this.Je=Ei(),this.He=new xt(ut),s}Ze(t,n){if(!this.nt(t))return;const r=this.It(t,n.key)?2:0;this.tt(t).qe(n.key,r),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(t)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(t))}Xe(t,n,r){if(!this.nt(t))return;const s=this.tt(t);this.It(t,n)?s.qe(n,1):s.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(t)),this.Je=this.Je.insert(n,this.dt(n).add(t)),r&&(this.ze=this.ze.insert(n,r))}removeTarget(t){this.Ge.delete(t)}ot(t){const n=this.tt(t).Le();return this.We.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}$e(t){this.tt(t).$e()}tt(t){let n=this.Ge.get(t);return n||(n=new uh,this.Ge.set(t,n)),n}dt(t){let n=this.Je.get(t);return n||(n=new Ht(ut),this.Je=this.Je.insert(t,n)),n}Tt(t){let n=this.je.get(t);return n||(n=new Ht(ut),this.je=this.je.insert(t,n)),n}nt(t){const n=this.st(t)!==null;return n||H("WatchChangeAggregator","Detected inactive target",t),n}st(t){const n=this.Ge.get(t);return n&&n.Oe?null:this.We.Et(t)}rt(t){this.Ge.set(t,new uh),this.We.getRemoteKeysForTarget(t).forEach((n=>{this.Xe(t,n,null)}))}It(t,n){return this.We.getRemoteKeysForTarget(t).has(n)}}function Ei(){return new xt(J.comparator)}function ch(){return new xt(J.comparator)}const zE={asc:"ASCENDING",desc:"DESCENDING"},KE={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},WE={and:"AND",or:"OR"};class GE{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function La(e,t){return e.useProto3Json||To(t)?t:{value:t}}function no(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function Zd(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function QE(e,t){return no(e,t.toTimestamp())}function Ue(e){return Et(!!e,49232),rt.fromTimestamp((function(n){const r=Cn(n);return new Pt(r.seconds,r.nanos)})(e))}function Pl(e,t){return Ua(e,t).canonicalString()}function Ua(e,t){const n=(function(s){return new St(["projects",s.projectId,"databases",s.database])})(e).child("documents");return t===void 0?n:n.child(t)}function tp(e){const t=St.fromString(e);return Et(ip(t),10190,{key:t.toString()}),t}function Ba(e,t){return Pl(e.databaseId,t.path)}function ua(e,t){const n=tp(t);if(n.get(1)!==e.databaseId.projectId)throw new K(D.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new K(D.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new J(np(n))}function ep(e,t){return Pl(e.databaseId,t)}function XE(e){const t=tp(e);return t.length===4?St.emptyPath():np(t)}function ja(e){return new St(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function np(e){return Et(e.length>4&&e.get(4)==="documents",29091,{key:e.toString()}),e.popFirst(5)}function hh(e,t,n){return{name:Ba(e,t),fields:n.value.mapValue.fields}}function JE(e,t){let n;if("targetChange"in t){t.targetChange;const r=(function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:tt(39313,{state:f})})(t.targetChange.targetChangeType||"NO_CHANGE"),s=t.targetChange.targetIds||[],i=(function(f,d){return f.useProto3Json?(Et(d===void 0||typeof d=="string",58123),Zt.fromBase64String(d||"")):(Et(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),Zt.fromUint8Array(d||new Uint8Array))})(e,t.targetChange.resumeToken),a=t.targetChange.cause,l=a&&(function(f){const d=f.code===void 0?D.UNKNOWN:Xd(f.code);return new K(d,f.message||"")})(a);n=new Yd(r,s,i,l||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const s=ua(e,r.document.name),i=Ue(r.document.updateTime),a=r.document.createTime?Ue(r.document.createTime):rt.min(),l=new Ie({mapValue:{fields:r.document.fields}}),c=ae.newFoundDocument(s,i,a,l),f=r.targetIds||[],d=r.removedTargetIds||[];n=new xi(f,d,c.key,c)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const s=ua(e,r.document),i=r.readTime?Ue(r.readTime):rt.min(),a=ae.newNoDocument(s,i),l=r.removedTargetIds||[];n=new xi([],l,a.key,a)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const s=ua(e,r.document),i=r.removedTargetIds||[];n=new xi([],i,s,null)}else{if(!("filter"in t))return tt(11601,{At:t});{t.filter;const r=t.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,a=new jE(s,i),l=r.targetId;n=new Jd(l,a)}}return n}function YE(e,t){let n;if(t instanceof Ks)n={update:hh(e,t.key,t.value)};else if(t instanceof Qd)n={delete:Ba(e,t.key)};else if(t instanceof sr)n={update:hh(e,t.key,t.data),updateMask:aT(t.fieldMask)};else{if(!(t instanceof LE))return tt(16599,{Rt:t.type});n={verify:Ba(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((r=>(function(i,a){const l=a.transform;if(l instanceof to)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Fs)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Ls)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof eo)return{fieldPath:a.field.canonicalString(),increment:l.Ee};throw tt(20930,{transform:a.transform})})(0,r)))),t.precondition.isNone||(n.currentDocument=(function(s,i){return i.updateTime!==void 0?{updateTime:QE(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:tt(27497)})(e,t.precondition)),n}function ZE(e,t){return e&&e.length>0?(Et(t!==void 0,14353),e.map((n=>(function(s,i){let a=s.updateTime?Ue(s.updateTime):Ue(i);return a.isEqual(rt.min())&&(a=Ue(i)),new kE(a,s.transformResults||[])})(n,t)))):[]}function tT(e,t){return{documents:[ep(e,t.path)]}}function eT(e,t){const n={structuredQuery:{}},r=t.path;let s;t.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=ep(e,s);const i=(function(f){if(f.length!==0)return sp(Ve.create(f,"and"))})(t.filters);i&&(n.structuredQuery.where=i);const a=(function(f){if(f.length!==0)return f.map((d=>(function(_){return{field:Ir(_.field),direction:sT(_.dir)}})(d)))})(t.orderBy);a&&(n.structuredQuery.orderBy=a);const l=La(e,t.limit);return l!==null&&(n.structuredQuery.limit=l),t.startAt&&(n.structuredQuery.startAt=(function(f){return{before:f.inclusive,values:f.position}})(t.startAt)),t.endAt&&(n.structuredQuery.endAt=(function(f){return{before:!f.inclusive,values:f.position}})(t.endAt)),{Vt:n,parent:s}}function nT(e){let t=XE(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Et(r===1,65062);const d=n.from[0];d.allDescendants?s=d.collectionId:t=t.child(d.collectionId)}let i=[];n.where&&(i=(function(p){const _=rp(p);return _ instanceof Ve&&xd(_)?_.getFilters():[_]})(n.where));let a=[];n.orderBy&&(a=(function(p){return p.map((_=>(function(V){return new Zi(wr(V.field),(function(L){switch(L){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(V.direction))})(_)))})(n.orderBy));let l=null;n.limit&&(l=(function(p){let _;return _=typeof p=="object"?p.value:p,To(_)?null:_})(n.limit));let c=null;n.startAt&&(c=(function(p){const _=!!p.before,b=p.values||[];return new Yi(b,_)})(n.startAt));let f=null;return n.endAt&&(f=(function(p){const _=!p.before,b=p.values||[];return new Yi(b,_)})(n.endAt)),IE(t,s,a,i,l,"F",c,f)}function rT(e,t){const n=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return tt(28987,{purpose:s})}})(t.purpose);return n==null?null:{"goog-listen-tags":n}}function rp(e){return e.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=wr(n.unaryFilter.field);return Lt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=wr(n.unaryFilter.field);return Lt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=wr(n.unaryFilter.field);return Lt.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=wr(n.unaryFilter.field);return Lt.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return tt(61313);default:return tt(60726)}})(e):e.fieldFilter!==void 0?(function(n){return Lt.create(wr(n.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return tt(58110);default:return tt(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(e):e.compositeFilter!==void 0?(function(n){return Ve.create(n.compositeFilter.filters.map((r=>rp(r))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return tt(1026)}})(n.compositeFilter.op))})(e):tt(30097,{filter:e})}function sT(e){return zE[e]}function iT(e){return KE[e]}function oT(e){return WE[e]}function Ir(e){return{fieldPath:e.canonicalString()}}function wr(e){return Yt.fromServerFormat(e.fieldPath)}function sp(e){return e instanceof Lt?(function(n){if(n.op==="=="){if(Yc(n.value))return{unaryFilter:{field:Ir(n.field),op:"IS_NAN"}};if(Jc(n.value))return{unaryFilter:{field:Ir(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Yc(n.value))return{unaryFilter:{field:Ir(n.field),op:"IS_NOT_NAN"}};if(Jc(n.value))return{unaryFilter:{field:Ir(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ir(n.field),op:iT(n.op),value:n.value}}})(e):e instanceof Ve?(function(n){const r=n.getFilters().map((s=>sp(s)));return r.length===1?r[0]:{compositeFilter:{op:oT(n.op),filters:r}}})(e):tt(54877,{filter:e})}function aT(e){const t=[];return e.fields.forEach((n=>t.push(n.canonicalString()))),{fieldPaths:t}}function ip(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn{constructor(t,n,r,s,i=rt.min(),a=rt.min(),l=Zt.EMPTY_BYTE_STRING,c=null){this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(t){return new mn(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new mn(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new mn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new mn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lT{constructor(t){this.gt=t}}function uT(e){const t=nT({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?Fa(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cT{constructor(){this.Dn=new hT}addToCollectionParentIndex(t,n){return this.Dn.add(n),x.resolve()}getCollectionParents(t,n){return x.resolve(this.Dn.getEntries(n))}addFieldIndex(t,n){return x.resolve()}deleteFieldIndex(t,n){return x.resolve()}deleteAllFieldIndexes(t){return x.resolve()}createTargetIndexes(t,n){return x.resolve()}getDocumentsMatchingTarget(t,n){return x.resolve(null)}getIndexType(t,n){return x.resolve(0)}getFieldIndexes(t,n){return x.resolve([])}getNextCollectionGroupToUpdate(t){return x.resolve(null)}getMinOffset(t,n){return x.resolve(Rn.min())}getMinOffsetFromCollectionGroup(t,n){return x.resolve(Rn.min())}updateCollectionGroup(t,n,r){return x.resolve()}updateIndexEntries(t,n){return x.resolve()}}class hT{constructor(){this.index={}}add(t){const n=t.lastSegment(),r=t.popLast(),s=this.index[n]||new Ht(St.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(t){const n=t.lastSegment(),r=t.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(t){return(this.index[t]||new Ht(St.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fh={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},op=41943040;class me{static withCacheSize(t){return new me(t,me.DEFAULT_COLLECTION_PERCENTILE,me.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,n,r){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */me.DEFAULT_COLLECTION_PERCENTILE=10,me.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,me.DEFAULT=new me(op,me.DEFAULT_COLLECTION_PERCENTILE,me.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),me.DISABLED=new me(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kr{constructor(t){this._r=t}next(){return this._r+=2,this._r}static ar(){return new kr(0)}static ur(){return new kr(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dh="LruGarbageCollector",fT=1048576;function ph([e,t],[n,r]){const s=ut(e,n);return s===0?ut(t,r):s}class dT{constructor(t){this.Tr=t,this.buffer=new Ht(ph),this.Ir=0}dr(){return++this.Ir}Er(t){const n=[t,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();ph(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class pT{constructor(t,n,r){this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(t){H(dh,`Garbage collection scheduled in ${t}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){jr(n)?H(dh,"Ignoring IndexedDB error during garbage collection: ",n):await Br(n)}await this.Rr(3e5)}))}}class mT{constructor(t,n){this.Vr=t,this.params=n}calculateTargetCount(t,n){return this.Vr.mr(t).next((r=>Math.floor(n/100*r)))}nthSequenceNumber(t,n){if(n===0)return x.resolve(Eo.ue);const r=new dT(n);return this.Vr.forEachTarget(t,(s=>r.Er(s.sequenceNumber))).next((()=>this.Vr.gr(t,(s=>r.Er(s))))).next((()=>r.maxValue))}removeTargets(t,n,r){return this.Vr.removeTargets(t,n,r)}removeOrphanedDocuments(t,n){return this.Vr.removeOrphanedDocuments(t,n)}collect(t,n){return this.params.cacheSizeCollectionThreshold===-1?(H("LruGarbageCollector","Garbage collection skipped; disabled"),x.resolve(fh)):this.getCacheSize(t).next((r=>r<this.params.cacheSizeCollectionThreshold?(H("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),fh):this.pr(t,n)))}getCacheSize(t){return this.Vr.getCacheSize(t)}pr(t,n){let r,s,i,a,l,c,f;const d=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((p=>(p>this.params.maximumSequenceNumbersToCollect?(H("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),s=this.params.maximumSequenceNumbersToCollect):s=p,a=Date.now(),this.nthSequenceNumber(t,s)))).next((p=>(r=p,l=Date.now(),this.removeTargets(t,r,n)))).next((p=>(i=p,c=Date.now(),this.removeOrphanedDocuments(t,r)))).next((p=>(f=Date.now(),Er()<=dt.DEBUG&&H("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-d}ms
	Determined least recently used ${s} in `+(l-a)+`ms
	Removed ${i} targets in `+(c-l)+`ms
	Removed ${p} documents in `+(f-c)+`ms
Total Duration: ${f-d}ms`),x.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:p}))))}}function gT(e,t){return new mT(e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _T{constructor(){this.changes=new rr((t=>t.toString()),((t,n)=>t.isEqual(n))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,ae.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?x.resolve(r):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yT{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vT{constructor(t,n,r,s){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(t,n){let r=null;return this.documentOverlayCache.getOverlay(t,n).next((s=>(r=s,this.remoteDocumentCache.getEntry(t,n)))).next((s=>(r!==null&&bs(r.mutation,s,Re.empty(),Pt.now()),s)))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next((r=>this.getLocalViewOfDocuments(t,r,ct()).next((()=>r))))}getLocalViewOfDocuments(t,n,r=ct()){const s=zn();return this.populateOverlays(t,s,n).next((()=>this.computeViews(t,n,s,r).next((i=>{let a=cs();return i.forEach(((l,c)=>{a=a.insert(l,c.overlayedDocument)})),a}))))}getOverlayedDocuments(t,n){const r=zn();return this.populateOverlays(t,r,n).next((()=>this.computeViews(t,n,r,ct())))}populateOverlays(t,n,r){const s=[];return r.forEach((i=>{n.has(i)||s.push(i)})),this.documentOverlayCache.getOverlays(t,s).next((i=>{i.forEach(((a,l)=>{n.set(a,l)}))}))}computeViews(t,n,r,s){let i=sn();const a=As(),l=(function(){return As()})();return n.forEach(((c,f)=>{const d=r.get(f.key);s.has(f.key)&&(d===void 0||d.mutation instanceof sr)?i=i.insert(f.key,f):d!==void 0?(a.set(f.key,d.mutation.getFieldMask()),bs(d.mutation,f,d.mutation.getFieldMask(),Pt.now())):a.set(f.key,Re.empty())})),this.recalculateAndSaveOverlays(t,i).next((c=>(c.forEach(((f,d)=>a.set(f,d))),n.forEach(((f,d)=>{var p;return l.set(f,new yT(d,(p=a.get(f))!==null&&p!==void 0?p:null))})),l)))}recalculateAndSaveOverlays(t,n){const r=As();let s=new xt(((a,l)=>a-l)),i=ct();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next((a=>{for(const l of a)l.keys().forEach((c=>{const f=n.get(c);if(f===null)return;let d=r.get(c)||Re.empty();d=l.applyToLocalView(f,d),r.set(c,d);const p=(s.get(l.batchId)||ct()).add(c);s=s.insert(l.batchId,p)}))})).next((()=>{const a=[],l=s.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),f=c.key,d=c.value,p=jd();d.forEach((_=>{if(!i.has(_)){const b=Wd(n.get(_),r.get(_));b!==null&&p.set(_,b),i=i.add(_)}})),a.push(this.documentOverlayCache.saveOverlays(t,f,p))}return x.waitFor(a)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next((r=>this.recalculateAndSaveOverlays(t,r)))}getDocumentsMatchingQuery(t,n,r,s){return(function(a){return J.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):Md(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,r,s):this.getDocumentsMatchingCollectionQuery(t,n,r,s)}getNextDocuments(t,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,r,s).next((i=>{const a=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,r.largestBatchId,s-i.size):x.resolve(zn());let l=Ns,c=i;return a.next((f=>x.forEach(f,((d,p)=>(l<p.largestBatchId&&(l=p.largestBatchId),i.get(d)?x.resolve():this.remoteDocumentCache.getEntry(t,d).next((_=>{c=c.insert(d,_)}))))).next((()=>this.populateOverlays(t,f,i))).next((()=>this.computeViews(t,c,f,ct()))).next((d=>({batchId:l,changes:Bd(d)})))))}))}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new J(n)).next((r=>{let s=cs();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s}))}getDocumentsMatchingCollectionGroupQuery(t,n,r,s){const i=n.collectionGroup;let a=cs();return this.indexManager.getCollectionParents(t,i).next((l=>x.forEach(l,(c=>{const f=(function(p,_){return new zs(_,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)})(n,c.child(i));return this.getDocumentsMatchingCollectionQuery(t,f,r,s).next((d=>{d.forEach(((p,_)=>{a=a.insert(p,_)}))}))})).next((()=>a))))}getDocumentsMatchingCollectionQuery(t,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,r.largestBatchId).next((a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,r,i,s)))).next((a=>{i.forEach(((c,f)=>{const d=f.getKey();a.get(d)===null&&(a=a.insert(d,ae.newInvalidDocument(d)))}));let l=cs();return a.forEach(((c,f)=>{const d=i.get(c);d!==void 0&&bs(d.mutation,f,Re.empty(),Pt.now()),Ao(n,f)&&(l=l.insert(c,f))})),l}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ET{constructor(t){this.serializer=t,this.Br=new Map,this.Lr=new Map}getBundleMetadata(t,n){return x.resolve(this.Br.get(n))}saveBundleMetadata(t,n){return this.Br.set(n.id,(function(s){return{id:s.id,version:s.version,createTime:Ue(s.createTime)}})(n)),x.resolve()}getNamedQuery(t,n){return x.resolve(this.Lr.get(n))}saveNamedQuery(t,n){return this.Lr.set(n.name,(function(s){return{name:s.name,query:uT(s.bundledQuery),readTime:Ue(s.readTime)}})(n)),x.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TT{constructor(){this.overlays=new xt(J.comparator),this.kr=new Map}getOverlay(t,n){return x.resolve(this.overlays.get(n))}getOverlays(t,n){const r=zn();return x.forEach(n,(s=>this.getOverlay(t,s).next((i=>{i!==null&&r.set(s,i)})))).next((()=>r))}saveOverlays(t,n,r){return r.forEach(((s,i)=>{this.wt(t,n,i)})),x.resolve()}removeOverlaysForBatchId(t,n,r){const s=this.kr.get(r);return s!==void 0&&(s.forEach((i=>this.overlays=this.overlays.remove(i))),this.kr.delete(r)),x.resolve()}getOverlaysForCollection(t,n,r){const s=zn(),i=n.length+1,a=new J(n.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){const c=l.getNext().value,f=c.getKey();if(!n.isPrefixOf(f.path))break;f.path.length===i&&c.largestBatchId>r&&s.set(c.getKey(),c)}return x.resolve(s)}getOverlaysForCollectionGroup(t,n,r,s){let i=new xt(((f,d)=>f-d));const a=this.overlays.getIterator();for(;a.hasNext();){const f=a.getNext().value;if(f.getKey().getCollectionGroup()===n&&f.largestBatchId>r){let d=i.get(f.largestBatchId);d===null&&(d=zn(),i=i.insert(f.largestBatchId,d)),d.set(f.getKey(),f)}}const l=zn(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach(((f,d)=>l.set(f,d))),!(l.size()>=s)););return x.resolve(l)}wt(t,n,r){const s=this.overlays.get(r.key);if(s!==null){const a=this.kr.get(s.largestBatchId).delete(r.key);this.kr.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new BE(n,r));let i=this.kr.get(n);i===void 0&&(i=ct(),this.kr.set(n,i)),this.kr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IT{constructor(){this.sessionToken=Zt.EMPTY_BYTE_STRING}getSessionToken(t){return x.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,x.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vl{constructor(){this.qr=new Ht(zt.Qr),this.$r=new Ht(zt.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(t,n){const r=new zt(t,n);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(t,n){t.forEach((r=>this.addReference(r,n)))}removeReference(t,n){this.Wr(new zt(t,n))}Gr(t,n){t.forEach((r=>this.removeReference(r,n)))}zr(t){const n=new J(new St([])),r=new zt(n,t),s=new zt(n,t+1),i=[];return this.$r.forEachInRange([r,s],(a=>{this.Wr(a),i.push(a.key)})),i}jr(){this.qr.forEach((t=>this.Wr(t)))}Wr(t){this.qr=this.qr.delete(t),this.$r=this.$r.delete(t)}Jr(t){const n=new J(new St([])),r=new zt(n,t),s=new zt(n,t+1);let i=ct();return this.$r.forEachInRange([r,s],(a=>{i=i.add(a.key)})),i}containsKey(t){const n=new zt(t,0),r=this.qr.firstAfterOrEqual(n);return r!==null&&t.isEqual(r.key)}}class zt{constructor(t,n){this.key=t,this.Hr=n}static Qr(t,n){return J.comparator(t.key,n.key)||ut(t.Hr,n.Hr)}static Ur(t,n){return ut(t.Hr,n.Hr)||J.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wT{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new Ht(zt.Qr)}checkEmpty(t){return x.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,r,s){const i=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new UE(i,n,r,s);this.mutationQueue.push(a);for(const l of s)this.Yr=this.Yr.add(new zt(l.key,i)),this.indexManager.addToCollectionParentIndex(t,l.key.path.popLast());return x.resolve(a)}lookupMutationBatch(t,n){return x.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(t,n){const r=n+1,s=this.Xr(r),i=s<0?0:s;return x.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return x.resolve(this.mutationQueue.length===0?El:this.er-1)}getAllMutationBatches(t){return x.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const r=new zt(n,0),s=new zt(n,Number.POSITIVE_INFINITY),i=[];return this.Yr.forEachInRange([r,s],(a=>{const l=this.Zr(a.Hr);i.push(l)})),x.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(t,n){let r=new Ht(ut);return n.forEach((s=>{const i=new zt(s,0),a=new zt(s,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([i,a],(l=>{r=r.add(l.Hr)}))})),x.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(t,n){const r=n.path,s=r.length+1;let i=r;J.isDocumentKey(i)||(i=i.child(""));const a=new zt(new J(i),0);let l=new Ht(ut);return this.Yr.forEachWhile((c=>{const f=c.key.path;return!!r.isPrefixOf(f)&&(f.length===s&&(l=l.add(c.Hr)),!0)}),a),x.resolve(this.ei(l))}ei(t){const n=[];return t.forEach((r=>{const s=this.Zr(r);s!==null&&n.push(s)})),n}removeMutationBatch(t,n){Et(this.ti(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return x.forEach(n.mutations,(s=>{const i=new zt(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(t,s.key)})).next((()=>{this.Yr=r}))}rr(t){}containsKey(t,n){const r=new zt(n,0),s=this.Yr.firstAfterOrEqual(r);return x.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(t){return this.mutationQueue.length,x.resolve()}ti(t,n){return this.Xr(t)}Xr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Zr(t){const n=this.Xr(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AT{constructor(t){this.ni=t,this.docs=(function(){return new xt(J.comparator)})(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,a=this.ni(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const r=this.docs.get(n);return x.resolve(r?r.document.mutableCopy():ae.newInvalidDocument(n))}getEntries(t,n){let r=sn();return n.forEach((s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():ae.newInvalidDocument(s))})),x.resolve(r)}getDocumentsMatchingQuery(t,n,r,s){let i=sn();const a=n.path,l=new J(a.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:f,value:{document:d}}=c.getNext();if(!a.isPrefixOf(f.path))break;f.path.length>a.length+1||tE(Zv(d),r)<=0||(s.has(d.key)||Ao(n,d))&&(i=i.insert(d.key,d.mutableCopy()))}return x.resolve(i)}getAllFromCollectionGroup(t,n,r,s){tt(9500)}ri(t,n){return x.forEach(this.docs,(r=>n(r)))}newChangeBuffer(t){return new bT(this)}getSize(t){return x.resolve(this.size)}}class bT extends _T{constructor(t){super(),this.Or=t}applyChanges(t){const n=[];return this.changes.forEach(((r,s)=>{s.isValidDocument()?n.push(this.Or.addEntry(t,s)):this.Or.removeEntry(r)})),x.waitFor(n)}getFromCache(t,n){return this.Or.getEntry(t,n)}getAllFromCache(t,n){return this.Or.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ST{constructor(t){this.persistence=t,this.ii=new rr((n=>wl(n)),Al),this.lastRemoteSnapshotVersion=rt.min(),this.highestTargetId=0,this.si=0,this.oi=new Vl,this.targetCount=0,this._i=kr.ar()}forEachTarget(t,n){return this.ii.forEach(((r,s)=>n(s))),x.resolve()}getLastRemoteSnapshotVersion(t){return x.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return x.resolve(this.si)}allocateTargetId(t){return this.highestTargetId=this._i.next(),x.resolve(this.highestTargetId)}setTargetsMetadata(t,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.si&&(this.si=n),x.resolve()}hr(t){this.ii.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this._i=new kr(n),this.highestTargetId=n),t.sequenceNumber>this.si&&(this.si=t.sequenceNumber)}addTargetData(t,n){return this.hr(n),this.targetCount+=1,x.resolve()}updateTargetData(t,n){return this.hr(n),x.resolve()}removeTargetData(t,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,x.resolve()}removeTargets(t,n,r){let s=0;const i=[];return this.ii.forEach(((a,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.ii.delete(a),i.push(this.removeMatchingKeysForTargetId(t,l.targetId)),s++)})),x.waitFor(i).next((()=>s))}getTargetCount(t){return x.resolve(this.targetCount)}getTargetData(t,n){const r=this.ii.get(n)||null;return x.resolve(r)}addMatchingKeys(t,n,r){return this.oi.Kr(n,r),x.resolve()}removeMatchingKeys(t,n,r){this.oi.Gr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach((a=>{i.push(s.markPotentiallyOrphaned(t,a))})),x.waitFor(i)}removeMatchingKeysForTargetId(t,n){return this.oi.zr(n),x.resolve()}getMatchingKeysForTargetId(t,n){const r=this.oi.Jr(n);return x.resolve(r)}containsKey(t,n){return x.resolve(this.oi.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ap{constructor(t,n){this.ai={},this.overlays={},this.ui=new Eo(0),this.ci=!1,this.ci=!0,this.li=new IT,this.referenceDelegate=t(this),this.hi=new ST(this),this.indexManager=new cT,this.remoteDocumentCache=(function(s){return new AT(s)})((r=>this.referenceDelegate.Pi(r))),this.serializer=new lT(n),this.Ti=new ET(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new TT,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let r=this.ai[t.toKey()];return r||(r=new wT(n,this.referenceDelegate),this.ai[t.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(t,n,r){H("MemoryPersistence","Starting transaction:",t);const s=new RT(this.ui.next());return this.referenceDelegate.Ii(),r(s).next((i=>this.referenceDelegate.di(s).next((()=>i)))).toPromise().then((i=>(s.raiseOnCommittedEvent(),i)))}Ei(t,n){return x.or(Object.values(this.ai).map((r=>()=>r.containsKey(t,n))))}}class RT extends nE{constructor(t){super(),this.currentSequenceNumber=t}}class Dl{constructor(t){this.persistence=t,this.Ai=new Vl,this.Ri=null}static Vi(t){return new Dl(t)}get mi(){if(this.Ri)return this.Ri;throw tt(60996)}addReference(t,n,r){return this.Ai.addReference(r,n),this.mi.delete(r.toString()),x.resolve()}removeReference(t,n,r){return this.Ai.removeReference(r,n),this.mi.add(r.toString()),x.resolve()}markPotentiallyOrphaned(t,n){return this.mi.add(n.toString()),x.resolve()}removeTarget(t,n){this.Ai.zr(n.targetId).forEach((s=>this.mi.add(s.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,n.targetId).next((s=>{s.forEach((i=>this.mi.add(i.toString())))})).next((()=>r.removeTargetData(t,n)))}Ii(){this.Ri=new Set}di(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return x.forEach(this.mi,(r=>{const s=J.fromPath(r);return this.fi(t,s).next((i=>{i||n.removeEntry(s,rt.min())}))})).next((()=>(this.Ri=null,n.apply(t))))}updateLimboDocument(t,n){return this.fi(t,n).next((r=>{r?this.mi.delete(n.toString()):this.mi.add(n.toString())}))}Pi(t){return 0}fi(t,n){return x.or([()=>x.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Ei(t,n)])}}class ro{constructor(t,n){this.persistence=t,this.gi=new rr((r=>iE(r.path)),((r,s)=>r.isEqual(s))),this.garbageCollector=gT(this,n)}static Vi(t,n){return new ro(t,n)}Ii(){}di(t){return x.resolve()}forEachTarget(t,n){return this.persistence.getTargetCache().forEachTarget(t,n)}mr(t){const n=this.yr(t);return this.persistence.getTargetCache().getTargetCount(t).next((r=>n.next((s=>r+s))))}yr(t){let n=0;return this.gr(t,(r=>{n++})).next((()=>n))}gr(t,n){return x.forEach(this.gi,((r,s)=>this.Sr(t,r,s).next((i=>i?x.resolve():n(s)))))}removeTargets(t,n,r){return this.persistence.getTargetCache().removeTargets(t,n,r)}removeOrphanedDocuments(t,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ri(t,(a=>this.Sr(t,a,n).next((l=>{l||(r++,i.removeEntry(a,rt.min()))})))).next((()=>i.apply(t))).next((()=>r))}markPotentiallyOrphaned(t,n){return this.gi.set(n,t.currentSequenceNumber),x.resolve()}removeTarget(t,n){const r=n.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,r)}addReference(t,n,r){return this.gi.set(r,t.currentSequenceNumber),x.resolve()}removeReference(t,n,r){return this.gi.set(r,t.currentSequenceNumber),x.resolve()}updateLimboDocument(t,n){return this.gi.set(n,t.currentSequenceNumber),x.resolve()}Pi(t){let n=t.key.toString().length;return t.isFoundDocument()&&(n+=Pi(t.data.value)),n}Sr(t,n,r){return x.or([()=>this.persistence.Ei(t,n),()=>this.persistence.getTargetCache().containsKey(t,n),()=>{const s=this.gi.get(n);return x.resolve(s!==void 0&&s>r)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xl{constructor(t,n,r,s){this.targetId=t,this.fromCache=n,this.Is=r,this.ds=s}static Es(t,n){let r=ct(),s=ct();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new xl(t,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CT{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PT{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return Ay()?8:rE(Iy())>0?6:4})()}initialize(t,n){this.gs=t,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(t,n,r,s){const i={result:null};return this.ps(t,n).next((a=>{i.result=a})).next((()=>{if(!i.result)return this.ys(t,n,s,r).next((a=>{i.result=a}))})).next((()=>{if(i.result)return;const a=new CT;return this.ws(t,n,a).next((l=>{if(i.result=l,this.Rs)return this.Ss(t,n,a,l.size)}))})).next((()=>i.result))}Ss(t,n,r,s){return r.documentReadCount<this.Vs?(Er()<=dt.DEBUG&&H("QueryEngine","SDK will not create cache indexes for query:",Tr(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),x.resolve()):(Er()<=dt.DEBUG&&H("QueryEngine","Query:",Tr(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.fs*s?(Er()<=dt.DEBUG&&H("QueryEngine","The SDK decides to create cache indexes for query:",Tr(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Le(n))):x.resolve())}ps(t,n){if(nh(n))return x.resolve(null);let r=Le(n);return this.indexManager.getIndexType(t,r).next((s=>s===0?null:(n.limit!==null&&s===1&&(n=Fa(n,null,"F"),r=Le(n)),this.indexManager.getDocumentsMatchingTarget(t,r).next((i=>{const a=ct(...i);return this.gs.getDocuments(t,a).next((l=>this.indexManager.getMinOffset(t,r).next((c=>{const f=this.bs(n,l);return this.Ds(n,f,a,c.readTime)?this.ps(t,Fa(n,null,"F")):this.vs(t,f,n,c)}))))})))))}ys(t,n,r,s){return nh(n)||s.isEqual(rt.min())?x.resolve(null):this.gs.getDocuments(t,r).next((i=>{const a=this.bs(n,i);return this.Ds(n,a,r,s)?x.resolve(null):(Er()<=dt.DEBUG&&H("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Tr(n)),this.vs(t,a,n,Yv(s,Ns)).next((l=>l)))}))}bs(t,n){let r=new Ht(Ld(t));return n.forEach(((s,i)=>{Ao(t,i)&&(r=r.add(i))})),r}Ds(t,n,r,s){if(t.limit===null)return!1;if(r.size!==n.size)return!0;const i=t.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}ws(t,n,r){return Er()<=dt.DEBUG&&H("QueryEngine","Using full collection scan to execute query:",Tr(n)),this.gs.getDocumentsMatchingQuery(t,n,Rn.min(),r)}vs(t,n,r,s){return this.gs.getDocumentsMatchingQuery(t,r,s).next((i=>(n.forEach((a=>{i=i.insert(a.key,a)})),i)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nl="LocalStore",VT=3e8;class DT{constructor(t,n,r,s){this.persistence=t,this.Cs=n,this.serializer=s,this.Fs=new xt(ut),this.Ms=new rr((i=>wl(i)),Al),this.xs=new Map,this.Os=t.getRemoteDocumentCache(),this.hi=t.getTargetCache(),this.Ti=t.getBundleCache(),this.Ns(r)}Ns(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new vT(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>t.collect(n,this.Fs)))}}function xT(e,t,n,r){return new DT(e,t,n,r)}async function lp(e,t){const n=st(e);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next((i=>(s=i,n.Ns(t),n.mutationQueue.getAllMutationBatches(r)))).next((i=>{const a=[],l=[];let c=ct();for(const f of s){a.push(f.batchId);for(const d of f.mutations)c=c.add(d.key)}for(const f of i){l.push(f.batchId);for(const d of f.mutations)c=c.add(d.key)}return n.localDocuments.getDocuments(r,c).next((f=>({Bs:f,removedBatchIds:a,addedBatchIds:l})))}))}))}function NT(e,t){const n=st(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const s=t.batch.keys(),i=n.Os.newChangeBuffer({trackRemovals:!0});return(function(l,c,f,d){const p=f.batch,_=p.keys();let b=x.resolve();return _.forEach((V=>{b=b.next((()=>d.getEntry(c,V))).next((M=>{const L=f.docVersions.get(V);Et(L!==null,48541),M.version.compareTo(L)<0&&(p.applyToRemoteDocument(M,f),M.isValidDocument()&&(M.setReadTime(f.commitVersion),d.addEntry(M)))}))})),b.next((()=>l.mutationQueue.removeMutationBatch(c,p)))})(n,r,t,i).next((()=>i.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(l){let c=ct();for(let f=0;f<l.mutationResults.length;++f)l.mutationResults[f].transformResults.length>0&&(c=c.add(l.batch.mutations[f].key));return c})(t)))).next((()=>n.localDocuments.getDocuments(r,s)))}))}function up(e){const t=st(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>t.hi.getLastRemoteSnapshotVersion(n)))}function OT(e,t){const n=st(e),r=t.snapshotVersion;let s=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(i=>{const a=n.Os.newChangeBuffer({trackRemovals:!0});s=n.Fs;const l=[];t.targetChanges.forEach(((d,p)=>{const _=s.get(p);if(!_)return;l.push(n.hi.removeMatchingKeys(i,d.removedDocuments,p).next((()=>n.hi.addMatchingKeys(i,d.addedDocuments,p))));let b=_.withSequenceNumber(i.currentSequenceNumber);t.targetMismatches.get(p)!==null?b=b.withResumeToken(Zt.EMPTY_BYTE_STRING,rt.min()).withLastLimboFreeSnapshotVersion(rt.min()):d.resumeToken.approximateByteSize()>0&&(b=b.withResumeToken(d.resumeToken,r)),s=s.insert(p,b),(function(M,L,W){return M.resumeToken.approximateByteSize()===0||L.snapshotVersion.toMicroseconds()-M.snapshotVersion.toMicroseconds()>=VT?!0:W.addedDocuments.size+W.modifiedDocuments.size+W.removedDocuments.size>0})(_,b,d)&&l.push(n.hi.updateTargetData(i,b))}));let c=sn(),f=ct();if(t.documentUpdates.forEach((d=>{t.resolvedLimboDocuments.has(d)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,d))})),l.push(kT(i,a,t.documentUpdates).next((d=>{c=d.Ls,f=d.ks}))),!r.isEqual(rt.min())){const d=n.hi.getLastRemoteSnapshotVersion(i).next((p=>n.hi.setTargetsMetadata(i,i.currentSequenceNumber,r)));l.push(d)}return x.waitFor(l).next((()=>a.apply(i))).next((()=>n.localDocuments.getLocalViewOfDocuments(i,c,f))).next((()=>c))})).then((i=>(n.Fs=s,i)))}function kT(e,t,n){let r=ct(),s=ct();return n.forEach((i=>r=r.add(i))),t.getEntries(e,r).next((i=>{let a=sn();return n.forEach(((l,c)=>{const f=i.get(l);c.isFoundDocument()!==f.isFoundDocument()&&(s=s.add(l)),c.isNoDocument()&&c.version.isEqual(rt.min())?(t.removeEntry(l,c.readTime),a=a.insert(l,c)):!f.isValidDocument()||c.version.compareTo(f.version)>0||c.version.compareTo(f.version)===0&&f.hasPendingWrites?(t.addEntry(c),a=a.insert(l,c)):H(Nl,"Ignoring outdated watch update for ",l,". Current version:",f.version," Watch version:",c.version)})),{Ls:a,ks:s}}))}function MT(e,t){const n=st(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(t===void 0&&(t=El),n.mutationQueue.getNextMutationBatchAfterBatchId(r,t))))}function FT(e,t){const n=st(e);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let s;return n.hi.getTargetData(r,t).next((i=>i?(s=i,x.resolve(s)):n.hi.allocateTargetId(r).next((a=>(s=new mn(t,a,"TargetPurposeListen",r.currentSequenceNumber),n.hi.addTargetData(r,s).next((()=>s)))))))})).then((r=>{const s=n.Fs.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(r.targetId,r),n.Ms.set(t,r.targetId)),r}))}async function $a(e,t,n){const r=st(e),s=r.Fs.get(t),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,(a=>r.persistence.referenceDelegate.removeTarget(a,s)))}catch(a){if(!jr(a))throw a;H(Nl,`Failed to update sequence numbers for target ${t}: ${a}`)}r.Fs=r.Fs.remove(t),r.Ms.delete(s.target)}function mh(e,t,n){const r=st(e);let s=rt.min(),i=ct();return r.persistence.runTransaction("Execute query","readwrite",(a=>(function(c,f,d){const p=st(c),_=p.Ms.get(d);return _!==void 0?x.resolve(p.Fs.get(_)):p.hi.getTargetData(f,d)})(r,a,Le(t)).next((l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(a,l.targetId).next((c=>{i=c}))})).next((()=>r.Cs.getDocumentsMatchingQuery(a,t,n?s:rt.min(),n?i:ct()))).next((l=>(LT(r,AE(t),l),{documents:l,qs:i})))))}function LT(e,t,n){let r=e.xs.get(t)||rt.min();n.forEach(((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)})),e.xs.set(t,r)}class gh{constructor(){this.activeTargetIds=VE()}Gs(t){this.activeTargetIds=this.activeTargetIds.add(t)}zs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Ws(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class UT{constructor(){this.Fo=new gh,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,r){}addLocalQueryTarget(t,n=!0){return n&&this.Fo.Gs(t),this.Mo[t]||"not-current"}updateQueryState(t,n,r){this.Mo[t]=n}removeLocalQueryTarget(t){this.Fo.zs(t)}isLocalQueryTarget(t){return this.Fo.activeTargetIds.has(t)}clearQueryState(t){delete this.Mo[t]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(t){return this.Fo.activeTargetIds.has(t)}start(){return this.Fo=new gh,Promise.resolve()}handleUserChange(t,n,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BT{xo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _h="ConnectivityMonitor";class yh{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(t){this.ko.push(t)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){H(_h,"Network connectivity changed: AVAILABLE");for(const t of this.ko)t(0)}Lo(){H(_h,"Network connectivity changed: UNAVAILABLE");for(const t of this.ko)t(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ti=null;function qa(){return Ti===null?Ti=(function(){return 268435456+Math.round(2147483648*Math.random())})():Ti++,"0x"+Ti.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ca="RestConnection",jT={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class $T{get Qo(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const n=t.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+t.host,this.Uo=`projects/${r}/databases/${s}`,this.Ko=this.databaseId.database===Xi?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Wo(t,n,r,s,i){const a=qa(),l=this.Go(t,n.toUriEncodedString());H(ca,`Sending RPC '${t}' ${a}:`,l,r);const c={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(c,s,i);const{host:f}=new URL(l),d=gl(f);return this.jo(t,l,c,r,d).then((p=>(H(ca,`Received RPC '${t}' ${a}: `,p),p)),(p=>{throw Sn(ca,`RPC '${t}' ${a} failed with error: `,p,"url: ",l,"request:",r),p}))}Jo(t,n,r,s,i,a){return this.Wo(t,n,r,s,i)}zo(t,n,r){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Ur})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((s,i)=>t[i]=s)),r&&r.headers.forEach(((s,i)=>t[i]=s))}Go(t,n){const r=jT[t];return`${this.$o}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qT{constructor(t){this.Ho=t.Ho,this.Yo=t.Yo}Zo(t){this.Xo=t}e_(t){this.t_=t}n_(t){this.r_=t}onMessage(t){this.i_=t}close(){this.Yo()}send(t){this.Ho(t)}s_(){this.Xo()}o_(){this.t_()}__(t){this.r_(t)}a_(t){this.i_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const re="WebChannelConnection";class HT extends $T{constructor(t){super(t),this.u_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}jo(t,n,r,s,i){const a=qa();return new Promise(((l,c)=>{const f=new cd;f.setWithCredentials(!0),f.listenOnce(hd.COMPLETE,(()=>{try{switch(f.getLastErrorCode()){case Ci.NO_ERROR:const p=f.getResponseJson();H(re,`XHR for RPC '${t}' ${a} received:`,JSON.stringify(p)),l(p);break;case Ci.TIMEOUT:H(re,`RPC '${t}' ${a} timed out`),c(new K(D.DEADLINE_EXCEEDED,"Request time out"));break;case Ci.HTTP_ERROR:const _=f.getStatus();if(H(re,`RPC '${t}' ${a} failed with status:`,_,"response text:",f.getResponseText()),_>0){let b=f.getResponseJson();Array.isArray(b)&&(b=b[0]);const V=b==null?void 0:b.error;if(V&&V.status&&V.message){const M=(function(W){const G=W.toLowerCase().replace(/_/g,"-");return Object.values(D).indexOf(G)>=0?G:D.UNKNOWN})(V.status);c(new K(M,V.message))}else c(new K(D.UNKNOWN,"Server responded with status "+f.getStatus()))}else c(new K(D.UNAVAILABLE,"Connection failed."));break;default:tt(9055,{c_:t,streamId:a,l_:f.getLastErrorCode(),h_:f.getLastError()})}}finally{H(re,`RPC '${t}' ${a} completed.`)}}));const d=JSON.stringify(s);H(re,`RPC '${t}' ${a} sending request:`,s),f.send(n,"POST",d,r,15)}))}P_(t,n,r){const s=qa(),i=[this.$o,"/","google.firestore.v1.Firestore","/",t,"/channel"],a=pd(),l=dd(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(c.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(c.useFetchStreams=!0),this.zo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const d=i.join("");H(re,`Creating RPC '${t}' stream ${s}: ${d}`,c);const p=a.createWebChannel(d,c);this.T_(p);let _=!1,b=!1;const V=new qT({Ho:L=>{b?H(re,`Not sending because RPC '${t}' stream ${s} is closed:`,L):(_||(H(re,`Opening RPC '${t}' stream ${s} transport.`),p.open(),_=!0),H(re,`RPC '${t}' stream ${s} sending:`,L),p.send(L))},Yo:()=>p.close()}),M=(L,W,G)=>{L.listen(W,(Q=>{try{G(Q)}catch(z){setTimeout((()=>{throw z}),0)}}))};return M(p,us.EventType.OPEN,(()=>{b||(H(re,`RPC '${t}' stream ${s} transport opened.`),V.s_())})),M(p,us.EventType.CLOSE,(()=>{b||(b=!0,H(re,`RPC '${t}' stream ${s} transport closed`),V.__(),this.I_(p))})),M(p,us.EventType.ERROR,(L=>{b||(b=!0,Sn(re,`RPC '${t}' stream ${s} transport errored. Name:`,L.name,"Message:",L.message),V.__(new K(D.UNAVAILABLE,"The operation could not be completed")))})),M(p,us.EventType.MESSAGE,(L=>{var W;if(!b){const G=L.data[0];Et(!!G,16349);const Q=G,z=(Q==null?void 0:Q.error)||((W=Q[0])===null||W===void 0?void 0:W.error);if(z){H(re,`RPC '${t}' stream ${s} received error:`,z);const lt=z.status;let It=(function(y){const T=Ft[y];if(T!==void 0)return Xd(T)})(lt),I=z.message;It===void 0&&(It=D.INTERNAL,I="Unknown error status: "+lt+" with message "+z.message),b=!0,V.__(new K(It,I)),p.close()}else H(re,`RPC '${t}' stream ${s} received:`,G),V.a_(G)}})),M(l,fd.STAT_EVENT,(L=>{L.stat===Va.PROXY?H(re,`RPC '${t}' stream ${s} detected buffering proxy`):L.stat===Va.NOPROXY&&H(re,`RPC '${t}' stream ${s} detected no buffering proxy`)})),setTimeout((()=>{V.o_()}),0),V}terminate(){this.u_.forEach((t=>t.close())),this.u_=[]}T_(t){this.u_.push(t)}I_(t){this.u_=this.u_.filter((n=>n===t))}}function ha(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Co(e){return new GE(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cp{constructor(t,n,r=1e3,s=1.5,i=6e4){this.Fi=t,this.timerId=n,this.d_=r,this.E_=s,this.A_=i,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(t){this.cancel();const n=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),s=Math.max(0,n-r);s>0&&H("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,s,(()=>(this.m_=Date.now(),t()))),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vh="PersistentStream";class hp{constructor(t,n,r,s,i,a,l,c){this.Fi=t,this.w_=r,this.S_=s,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new cp(t,n)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,(()=>this.L_())))}k_(t){this.q_(),this.stream.send(t)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,n){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,t!==4?this.F_.reset():n&&n.code===D.RESOURCE_EXHAUSTED?(rn(n.toString()),rn("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):n&&n.code===D.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.n_(n)}U_(){}auth(){this.state=1;const t=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,s])=>{this.b_===n&&this.W_(r,s)}),(r=>{t((()=>{const s=new K(D.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(s)}))}))}W_(t,n){const r=this.K_(this.b_);this.stream=this.z_(t,n),this.stream.Zo((()=>{r((()=>this.listener.Zo()))})),this.stream.e_((()=>{r((()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,(()=>(this.x_()&&(this.state=3),Promise.resolve()))),this.listener.e_())))})),this.stream.n_((s=>{r((()=>this.G_(s)))})),this.stream.onMessage((s=>{r((()=>++this.C_==1?this.j_(s):this.onNext(s)))}))}O_(){this.state=5,this.F_.g_((async()=>{this.state=0,this.start()}))}G_(t){return H(vh,`close with error: ${t}`),this.stream=null,this.close(4,t)}K_(t){return n=>{this.Fi.enqueueAndForget((()=>this.b_===t?n():(H(vh,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class zT extends hp{constructor(t,n,r,s,i,a){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}z_(t,n){return this.connection.P_("Listen",t,n)}j_(t){return this.onNext(t)}onNext(t){this.F_.reset();const n=JE(this.serializer,t),r=(function(i){if(!("targetChange"in i))return rt.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?rt.min():a.readTime?Ue(a.readTime):rt.min()})(t);return this.listener.J_(n,r)}H_(t){const n={};n.database=ja(this.serializer),n.addTarget=(function(i,a){let l;const c=a.target;if(l=ka(c)?{documents:tT(i,c)}:{query:eT(i,c).Vt},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=Zd(i,a.resumeToken);const f=La(i,a.expectedCount);f!==null&&(l.expectedCount=f)}else if(a.snapshotVersion.compareTo(rt.min())>0){l.readTime=no(i,a.snapshotVersion.toTimestamp());const f=La(i,a.expectedCount);f!==null&&(l.expectedCount=f)}return l})(this.serializer,t);const r=rT(this.serializer,t);r&&(n.labels=r),this.k_(n)}Y_(t){const n={};n.database=ja(this.serializer),n.removeTarget=t,this.k_(n)}}class KT extends hp{constructor(t,n,r,s,i,a){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(t,n){return this.connection.P_("Write",t,n)}j_(t){return Et(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,Et(!t.writeResults||t.writeResults.length===0,55816),this.listener.ea()}onNext(t){Et(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.F_.reset();const n=ZE(t.writeResults,t.commitTime),r=Ue(t.commitTime);return this.listener.ta(r,n)}na(){const t={};t.database=ja(this.serializer),this.k_(t)}X_(t){const n={streamToken:this.lastStreamToken,writes:t.map((r=>YE(this.serializer,r)))};this.k_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WT{}class GT extends WT{constructor(t,n,r,s){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ra=!1}ia(){if(this.ra)throw new K(D.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(t,n,r,s){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([i,a])=>this.connection.Wo(t,Ua(n,r),s,i,a))).catch((i=>{throw i.name==="FirebaseError"?(i.code===D.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new K(D.UNKNOWN,i.toString())}))}Jo(t,n,r,s,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,l])=>this.connection.Jo(t,Ua(n,r),s,a,l,i))).catch((a=>{throw a.name==="FirebaseError"?(a.code===D.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new K(D.UNKNOWN,a.toString())}))}terminate(){this.ra=!0,this.connection.terminate()}}class QT{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve()))))}la(t){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ua("Offline")))}set(t){this.ha(),this.sa=0,t==="Online"&&(this._a=!1),this.ua(t)}ua(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}ca(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(rn(n),this._a=!1):H("OnlineStateTracker",n)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zn="RemoteStore";class XT{constructor(t,n,r,s,i){this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=i,this.Ea.xo((a=>{r.enqueueAndForget((async()=>{ir(this)&&(H(Zn,"Restarting streams for network reachability change."),await(async function(c){const f=st(c);f.Ia.add(4),await Gs(f),f.Aa.set("Unknown"),f.Ia.delete(4),await Po(f)})(this))}))})),this.Aa=new QT(r,s)}}async function Po(e){if(ir(e))for(const t of e.da)await t(!0)}async function Gs(e){for(const t of e.da)await t(!1)}function fp(e,t){const n=st(e);n.Ta.has(t.targetId)||(n.Ta.set(t.targetId,t),Fl(n)?Ml(n):$r(n).x_()&&kl(n,t))}function Ol(e,t){const n=st(e),r=$r(n);n.Ta.delete(t),r.x_()&&dp(n,t),n.Ta.size===0&&(r.x_()?r.B_():ir(n)&&n.Aa.set("Unknown"))}function kl(e,t){if(e.Ra.$e(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(rt.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}$r(e).H_(t)}function dp(e,t){e.Ra.$e(t),$r(e).Y_(t)}function Ml(e){e.Ra=new HE({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),Et:t=>e.Ta.get(t)||null,lt:()=>e.datastore.serializer.databaseId}),$r(e).start(),e.Aa.aa()}function Fl(e){return ir(e)&&!$r(e).M_()&&e.Ta.size>0}function ir(e){return st(e).Ia.size===0}function pp(e){e.Ra=void 0}async function JT(e){e.Aa.set("Online")}async function YT(e){e.Ta.forEach(((t,n)=>{kl(e,t)}))}async function ZT(e,t){pp(e),Fl(e)?(e.Aa.la(t),Ml(e)):e.Aa.set("Unknown")}async function tI(e,t,n){if(e.Aa.set("Online"),t instanceof Yd&&t.state===2&&t.cause)try{await(async function(s,i){const a=i.cause;for(const l of i.targetIds)s.Ta.has(l)&&(await s.remoteSyncer.rejectListen(l,a),s.Ta.delete(l),s.Ra.removeTarget(l))})(e,t)}catch(r){H(Zn,"Failed to remove targets %s: %s ",t.targetIds.join(","),r),await so(e,r)}else if(t instanceof xi?e.Ra.Ye(t):t instanceof Jd?e.Ra.it(t):e.Ra.et(t),!n.isEqual(rt.min()))try{const r=await up(e.localStore);n.compareTo(r)>=0&&await(function(i,a){const l=i.Ra.Pt(a);return l.targetChanges.forEach(((c,f)=>{if(c.resumeToken.approximateByteSize()>0){const d=i.Ta.get(f);d&&i.Ta.set(f,d.withResumeToken(c.resumeToken,a))}})),l.targetMismatches.forEach(((c,f)=>{const d=i.Ta.get(c);if(!d)return;i.Ta.set(c,d.withResumeToken(Zt.EMPTY_BYTE_STRING,d.snapshotVersion)),dp(i,c);const p=new mn(d.target,c,f,d.sequenceNumber);kl(i,p)})),i.remoteSyncer.applyRemoteEvent(l)})(e,n)}catch(r){H(Zn,"Failed to raise snapshot:",r),await so(e,r)}}async function so(e,t,n){if(!jr(t))throw t;e.Ia.add(1),await Gs(e),e.Aa.set("Offline"),n||(n=()=>up(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{H(Zn,"Retrying IndexedDB access"),await n(),e.Ia.delete(1),await Po(e)}))}function mp(e,t){return t().catch((n=>so(e,n,t)))}async function Vo(e){const t=st(e),n=Dn(t);let r=t.Pa.length>0?t.Pa[t.Pa.length-1].batchId:El;for(;eI(t);)try{const s=await MT(t.localStore,r);if(s===null){t.Pa.length===0&&n.B_();break}r=s.batchId,nI(t,s)}catch(s){await so(t,s)}gp(t)&&_p(t)}function eI(e){return ir(e)&&e.Pa.length<10}function nI(e,t){e.Pa.push(t);const n=Dn(e);n.x_()&&n.Z_&&n.X_(t.mutations)}function gp(e){return ir(e)&&!Dn(e).M_()&&e.Pa.length>0}function _p(e){Dn(e).start()}async function rI(e){Dn(e).na()}async function sI(e){const t=Dn(e);for(const n of e.Pa)t.X_(n.mutations)}async function iI(e,t,n){const r=e.Pa.shift(),s=Rl.from(r,t,n);await mp(e,(()=>e.remoteSyncer.applySuccessfulWrite(s))),await Vo(e)}async function oI(e,t){t&&Dn(e).Z_&&await(async function(r,s){if((function(a){return $E(a)&&a!==D.ABORTED})(s.code)){const i=r.Pa.shift();Dn(r).N_(),await mp(r,(()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s))),await Vo(r)}})(e,t),gp(e)&&_p(e)}async function Eh(e,t){const n=st(e);n.asyncQueue.verifyOperationInProgress(),H(Zn,"RemoteStore received new credentials");const r=ir(n);n.Ia.add(3),await Gs(n),r&&n.Aa.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ia.delete(3),await Po(n)}async function aI(e,t){const n=st(e);t?(n.Ia.delete(2),await Po(n)):t||(n.Ia.add(2),await Gs(n),n.Aa.set("Unknown"))}function $r(e){return e.Va||(e.Va=(function(n,r,s){const i=st(n);return i.ia(),new zT(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)})(e.datastore,e.asyncQueue,{Zo:JT.bind(null,e),e_:YT.bind(null,e),n_:ZT.bind(null,e),J_:tI.bind(null,e)}),e.da.push((async t=>{t?(e.Va.N_(),Fl(e)?Ml(e):e.Aa.set("Unknown")):(await e.Va.stop(),pp(e))}))),e.Va}function Dn(e){return e.ma||(e.ma=(function(n,r,s){const i=st(n);return i.ia(),new KT(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)})(e.datastore,e.asyncQueue,{Zo:()=>Promise.resolve(),e_:rI.bind(null,e),n_:oI.bind(null,e),ea:sI.bind(null,e),ta:iI.bind(null,e)}),e.da.push((async t=>{t?(e.ma.N_(),await Vo(e)):(await e.ma.stop(),e.Pa.length>0&&(H(Zn,`Stopping write stream with ${e.Pa.length} pending writes`),e.Pa=[]))}))),e.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ll{constructor(t,n,r,s,i){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Tn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((a=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,n,r,s,i){const a=Date.now()+r,l=new Ll(t,n,a,s,i);return l.start(r),l}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new K(D.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ul(e,t){if(rn("AsyncQueue",`${t}: ${e}`),jr(e))return new K(D.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vr{static emptySet(t){return new Vr(t.comparator)}constructor(t){this.comparator=t?(n,r)=>t(n,r)||J.comparator(n.key,r.key):(n,r)=>J.comparator(n.key,r.key),this.keyedMap=cs(),this.sortedSet=new xt(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((n,r)=>(t(n),!1)))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof Vr)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const t=[];return this.forEach((n=>{t.push(n.toString())})),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const r=new Vr;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Th{constructor(){this.fa=new xt(J.comparator)}track(t){const n=t.doc.key,r=this.fa.get(n);r?t.type!==0&&r.type===3?this.fa=this.fa.insert(n,t):t.type===3&&r.type!==1?this.fa=this.fa.insert(n,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.fa=this.fa.insert(n,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.fa=this.fa.insert(n,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.fa=this.fa.remove(n):t.type===1&&r.type===2?this.fa=this.fa.insert(n,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.fa=this.fa.insert(n,{type:2,doc:t.doc}):tt(63341,{At:t,ga:r}):this.fa=this.fa.insert(n,t)}pa(){const t=[];return this.fa.inorderTraversal(((n,r)=>{t.push(r)})),t}}class Mr{constructor(t,n,r,s,i,a,l,c,f){this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=f}static fromInitialDocuments(t,n,r,s,i){const a=[];return n.forEach((l=>{a.push({type:0,doc:l})})),new Mr(t,n,Vr.emptySet(n),a,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&wo(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,r=t.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lI{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some((t=>t.ba()))}}class uI{constructor(){this.queries=Ih(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(n,r){const s=st(n),i=s.queries;s.queries=Ih(),i.forEach(((a,l)=>{for(const c of l.wa)c.onError(r)}))})(this,new K(D.ABORTED,"Firestore shutting down"))}}function Ih(){return new rr((e=>Fd(e)),wo)}async function yp(e,t){const n=st(e);let r=3;const s=t.query;let i=n.queries.get(s);i?!i.Sa()&&t.ba()&&(r=2):(i=new lI,r=t.ba()?0:1);try{switch(r){case 0:i.ya=await n.onListen(s,!0);break;case 1:i.ya=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(a){const l=Ul(a,`Initialization of query '${Tr(t.query)}' failed`);return void t.onError(l)}n.queries.set(s,i),i.wa.push(t),t.va(n.onlineState),i.ya&&t.Ca(i.ya)&&Bl(n)}async function vp(e,t){const n=st(e),r=t.query;let s=3;const i=n.queries.get(r);if(i){const a=i.wa.indexOf(t);a>=0&&(i.wa.splice(a,1),i.wa.length===0?s=t.ba()?0:1:!i.Sa()&&t.ba()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function cI(e,t){const n=st(e);let r=!1;for(const s of t){const i=s.query,a=n.queries.get(i);if(a){for(const l of a.wa)l.Ca(s)&&(r=!0);a.ya=s}}r&&Bl(n)}function hI(e,t,n){const r=st(e),s=r.queries.get(t);if(s)for(const i of s.wa)i.onError(n);r.queries.delete(t)}function Bl(e){e.Da.forEach((t=>{t.next()}))}var Ha,wh;(wh=Ha||(Ha={})).Fa="default",wh.Cache="cache";class Ep{constructor(t,n,r){this.query=t,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(t){if(!this.options.includeMetadataChanges){const r=[];for(const s of t.docChanges)s.type!==3&&r.push(s);t=new Mr(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.xa?this.Na(t)&&(this.Ma.next(t),n=!0):this.Ba(t,this.onlineState)&&(this.La(t),n=!0),this.Oa=t,n}onError(t){this.Ma.error(t)}va(t){this.onlineState=t;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,t)&&(this.La(this.Oa),n=!0),n}Ba(t,n){if(!t.fromCache||!this.ba())return!0;const r=n!=="Offline";return(!this.options.ka||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}Na(t){if(t.docChanges.length>0)return!0;const n=this.Oa&&this.Oa.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}La(t){t=Mr.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.xa=!0,this.Ma.next(t)}ba(){return this.options.source!==Ha.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tp{constructor(t){this.key=t}}class Ip{constructor(t){this.key=t}}class fI{constructor(t,n){this.query=t,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=ct(),this.mutatedKeys=ct(),this.Xa=Ld(t),this.eu=new Vr(this.Xa)}get tu(){return this.Ha}nu(t,n){const r=n?n.ru:new Th,s=n?n.eu:this.eu;let i=n?n.mutatedKeys:this.mutatedKeys,a=s,l=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,f=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(t.inorderTraversal(((d,p)=>{const _=s.get(d),b=Ao(this.query,p)?p:null,V=!!_&&this.mutatedKeys.has(_.key),M=!!b&&(b.hasLocalMutations||this.mutatedKeys.has(b.key)&&b.hasCommittedMutations);let L=!1;_&&b?_.data.isEqual(b.data)?V!==M&&(r.track({type:3,doc:b}),L=!0):this.iu(_,b)||(r.track({type:2,doc:b}),L=!0,(c&&this.Xa(b,c)>0||f&&this.Xa(b,f)<0)&&(l=!0)):!_&&b?(r.track({type:0,doc:b}),L=!0):_&&!b&&(r.track({type:1,doc:_}),L=!0,(c||f)&&(l=!0)),L&&(b?(a=a.add(b),i=M?i.add(d):i.delete(d)):(a=a.delete(d),i=i.delete(d)))})),this.query.limit!==null)for(;a.size>this.query.limit;){const d=this.query.limitType==="F"?a.last():a.first();a=a.delete(d.key),i=i.delete(d.key),r.track({type:1,doc:d})}return{eu:a,ru:r,Ds:l,mutatedKeys:i}}iu(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,r,s){const i=this.eu;this.eu=t.eu,this.mutatedKeys=t.mutatedKeys;const a=t.ru.pa();a.sort(((d,p)=>(function(b,V){const M=L=>{switch(L){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return tt(20277,{At:L})}};return M(b)-M(V)})(d.type,p.type)||this.Xa(d.doc,p.doc))),this.su(r),s=s!=null&&s;const l=n&&!s?this.ou():[],c=this.Za.size===0&&this.current&&!s?1:0,f=c!==this.Ya;return this.Ya=c,a.length!==0||f?{snapshot:new Mr(this.query,t.eu,i,a,t.mutatedKeys,c===0,f,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:l}:{_u:l}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new Th,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(t){return!this.Ha.has(t)&&!!this.eu.has(t)&&!this.eu.get(t).hasLocalMutations}su(t){t&&(t.addedDocuments.forEach((n=>this.Ha=this.Ha.add(n))),t.modifiedDocuments.forEach((n=>{})),t.removedDocuments.forEach((n=>this.Ha=this.Ha.delete(n))),this.current=t.current)}ou(){if(!this.current)return[];const t=this.Za;this.Za=ct(),this.eu.forEach((r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))}));const n=[];return t.forEach((r=>{this.Za.has(r)||n.push(new Ip(r))})),this.Za.forEach((r=>{t.has(r)||n.push(new Tp(r))})),n}uu(t){this.Ha=t.qs,this.Za=ct();const n=this.nu(t.documents);return this.applyChanges(n,!0)}cu(){return Mr.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const jl="SyncEngine";class dI{constructor(t,n,r){this.query=t,this.targetId=n,this.view=r}}class pI{constructor(t){this.key=t,this.lu=!1}}class mI{constructor(t,n,r,s,i,a){this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.hu={},this.Pu=new rr((l=>Fd(l)),wo),this.Tu=new Map,this.Iu=new Set,this.du=new xt(J.comparator),this.Eu=new Map,this.Au=new Vl,this.Ru={},this.Vu=new Map,this.mu=kr.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function gI(e,t,n=!0){const r=Cp(e);let s;const i=r.Pu.get(t);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.cu()):s=await wp(r,t,n,!0),s}async function _I(e,t){const n=Cp(e);await wp(n,t,!0,!1)}async function wp(e,t,n,r){const s=await FT(e.localStore,Le(t)),i=s.targetId,a=e.sharedClientState.addLocalQueryTarget(i,n);let l;return r&&(l=await yI(e,t,i,a==="current",s.resumeToken)),e.isPrimaryClient&&n&&fp(e.remoteStore,s),l}async function yI(e,t,n,r,s){e.gu=(p,_,b)=>(async function(M,L,W,G){let Q=L.view.nu(W);Q.Ds&&(Q=await mh(M.localStore,L.query,!1).then((({documents:I})=>L.view.nu(I,Q))));const z=G&&G.targetChanges.get(L.targetId),lt=G&&G.targetMismatches.get(L.targetId)!=null,It=L.view.applyChanges(Q,M.isPrimaryClient,z,lt);return bh(M,L.targetId,It._u),It.snapshot})(e,p,_,b);const i=await mh(e.localStore,t,!0),a=new fI(t,i.qs),l=a.nu(i.documents),c=Ws.createSynthesizedTargetChangeForCurrentChange(n,r&&e.onlineState!=="Offline",s),f=a.applyChanges(l,e.isPrimaryClient,c);bh(e,n,f._u);const d=new dI(t,n,a);return e.Pu.set(t,d),e.Tu.has(n)?e.Tu.get(n).push(t):e.Tu.set(n,[t]),f.snapshot}async function vI(e,t,n){const r=st(e),s=r.Pu.get(t),i=r.Tu.get(s.targetId);if(i.length>1)return r.Tu.set(s.targetId,i.filter((a=>!wo(a,t)))),void r.Pu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await $a(r.localStore,s.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Ol(r.remoteStore,s.targetId),za(r,s.targetId)})).catch(Br)):(za(r,s.targetId),await $a(r.localStore,s.targetId,!0))}async function EI(e,t){const n=st(e),r=n.Pu.get(t),s=n.Tu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Ol(n.remoteStore,r.targetId))}async function TI(e,t,n){const r=CI(e);try{const s=await(function(a,l){const c=st(a),f=Pt.now(),d=l.reduce(((b,V)=>b.add(V.key)),ct());let p,_;return c.persistence.runTransaction("Locally write mutations","readwrite",(b=>{let V=sn(),M=ct();return c.Os.getEntries(b,d).next((L=>{V=L,V.forEach(((W,G)=>{G.isValidDocument()||(M=M.add(W))}))})).next((()=>c.localDocuments.getOverlayedDocuments(b,V))).next((L=>{p=L;const W=[];for(const G of l){const Q=FE(G,p.get(G.key).overlayedDocument);Q!=null&&W.push(new sr(G.key,Q,Pd(Q.value.mapValue),Ye.exists(!0)))}return c.mutationQueue.addMutationBatch(b,f,W,l)})).next((L=>{_=L;const W=L.applyToLocalDocumentSet(p,M);return c.documentOverlayCache.saveOverlays(b,L.batchId,W)}))})).then((()=>({batchId:_.batchId,changes:Bd(p)})))})(r.localStore,t);r.sharedClientState.addPendingMutation(s.batchId),(function(a,l,c){let f=a.Ru[a.currentUser.toKey()];f||(f=new xt(ut)),f=f.insert(l,c),a.Ru[a.currentUser.toKey()]=f})(r,s.batchId,n),await Qs(r,s.changes),await Vo(r.remoteStore)}catch(s){const i=Ul(s,"Failed to persist write");n.reject(i)}}async function Ap(e,t){const n=st(e);try{const r=await OT(n.localStore,t);t.targetChanges.forEach(((s,i)=>{const a=n.Eu.get(i);a&&(Et(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?a.lu=!0:s.modifiedDocuments.size>0?Et(a.lu,14607):s.removedDocuments.size>0&&(Et(a.lu,42227),a.lu=!1))})),await Qs(n,r,t)}catch(r){await Br(r)}}function Ah(e,t,n){const r=st(e);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Pu.forEach(((i,a)=>{const l=a.view.va(t);l.snapshot&&s.push(l.snapshot)})),(function(a,l){const c=st(a);c.onlineState=l;let f=!1;c.queries.forEach(((d,p)=>{for(const _ of p.wa)_.va(l)&&(f=!0)})),f&&Bl(c)})(r.eventManager,t),s.length&&r.hu.J_(s),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function II(e,t,n){const r=st(e);r.sharedClientState.updateQueryState(t,"rejected",n);const s=r.Eu.get(t),i=s&&s.key;if(i){let a=new xt(J.comparator);a=a.insert(i,ae.newNoDocument(i,rt.min()));const l=ct().add(i),c=new Ro(rt.min(),new Map,new xt(ut),a,l);await Ap(r,c),r.du=r.du.remove(i),r.Eu.delete(t),$l(r)}else await $a(r.localStore,t,!1).then((()=>za(r,t,n))).catch(Br)}async function wI(e,t){const n=st(e),r=t.batch.batchId;try{const s=await NT(n.localStore,t);Sp(n,r,null),bp(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Qs(n,s)}catch(s){await Br(s)}}async function AI(e,t,n){const r=st(e);try{const s=await(function(a,l){const c=st(a);return c.persistence.runTransaction("Reject batch","readwrite-primary",(f=>{let d;return c.mutationQueue.lookupMutationBatch(f,l).next((p=>(Et(p!==null,37113),d=p.keys(),c.mutationQueue.removeMutationBatch(f,p)))).next((()=>c.mutationQueue.performConsistencyCheck(f))).next((()=>c.documentOverlayCache.removeOverlaysForBatchId(f,d,l))).next((()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,d))).next((()=>c.localDocuments.getDocuments(f,d)))}))})(r.localStore,t);Sp(r,t,n),bp(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await Qs(r,s)}catch(s){await Br(s)}}function bp(e,t){(e.Vu.get(t)||[]).forEach((n=>{n.resolve()})),e.Vu.delete(t)}function Sp(e,t,n){const r=st(e);let s=r.Ru[r.currentUser.toKey()];if(s){const i=s.get(t);i&&(n?i.reject(n):i.resolve(),s=s.remove(t)),r.Ru[r.currentUser.toKey()]=s}}function za(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Tu.get(t))e.Pu.delete(r),n&&e.hu.pu(r,n);e.Tu.delete(t),e.isPrimaryClient&&e.Au.zr(t).forEach((r=>{e.Au.containsKey(r)||Rp(e,r)}))}function Rp(e,t){e.Iu.delete(t.path.canonicalString());const n=e.du.get(t);n!==null&&(Ol(e.remoteStore,n),e.du=e.du.remove(t),e.Eu.delete(n),$l(e))}function bh(e,t,n){for(const r of n)r instanceof Tp?(e.Au.addReference(r.key,t),bI(e,r)):r instanceof Ip?(H(jl,"Document no longer in limbo: "+r.key),e.Au.removeReference(r.key,t),e.Au.containsKey(r.key)||Rp(e,r.key)):tt(19791,{yu:r})}function bI(e,t){const n=t.key,r=n.path.canonicalString();e.du.get(n)||e.Iu.has(r)||(H(jl,"New document in limbo: "+n),e.Iu.add(r),$l(e))}function $l(e){for(;e.Iu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){const t=e.Iu.values().next().value;e.Iu.delete(t);const n=new J(St.fromString(t)),r=e.mu.next();e.Eu.set(r,new pI(n)),e.du=e.du.insert(n,r),fp(e.remoteStore,new mn(Le(bl(n.path)),r,"TargetPurposeLimboResolution",Eo.ue))}}async function Qs(e,t,n){const r=st(e),s=[],i=[],a=[];r.Pu.isEmpty()||(r.Pu.forEach(((l,c)=>{a.push(r.gu(c,t,n).then((f=>{var d;if((f||n)&&r.isPrimaryClient){const p=f?!f.fromCache:(d=n==null?void 0:n.targetChanges.get(c.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(c.targetId,p?"current":"not-current")}if(f){s.push(f);const p=xl.Es(c.targetId,f);i.push(p)}})))})),await Promise.all(a),r.hu.J_(s),await(async function(c,f){const d=st(c);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",(p=>x.forEach(f,(_=>x.forEach(_.Is,(b=>d.persistence.referenceDelegate.addReference(p,_.targetId,b))).next((()=>x.forEach(_.ds,(b=>d.persistence.referenceDelegate.removeReference(p,_.targetId,b)))))))))}catch(p){if(!jr(p))throw p;H(Nl,"Failed to update sequence numbers: "+p)}for(const p of f){const _=p.targetId;if(!p.fromCache){const b=d.Fs.get(_),V=b.snapshotVersion,M=b.withLastLimboFreeSnapshotVersion(V);d.Fs=d.Fs.insert(_,M)}}})(r.localStore,i))}async function SI(e,t){const n=st(e);if(!n.currentUser.isEqual(t)){H(jl,"User change. New user:",t.toKey());const r=await lp(n.localStore,t);n.currentUser=t,(function(i,a){i.Vu.forEach((l=>{l.forEach((c=>{c.reject(new K(D.CANCELLED,a))}))})),i.Vu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await Qs(n,r.Bs)}}function RI(e,t){const n=st(e),r=n.Eu.get(t);if(r&&r.lu)return ct().add(r.key);{let s=ct();const i=n.Tu.get(t);if(!i)return s;for(const a of i){const l=n.Pu.get(a);s=s.unionWith(l.view.tu)}return s}}function Cp(e){const t=st(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Ap.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=RI.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=II.bind(null,t),t.hu.J_=cI.bind(null,t.eventManager),t.hu.pu=hI.bind(null,t.eventManager),t}function CI(e){const t=st(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=wI.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=AI.bind(null,t),t}class io{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Co(t.databaseInfo.databaseId),this.sharedClientState=this.bu(t),this.persistence=this.Du(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Cu(t,this.localStore),this.indexBackfillerScheduler=this.Fu(t,this.localStore)}Cu(t,n){return null}Fu(t,n){return null}vu(t){return xT(this.persistence,new PT,t.initialUser,this.serializer)}Du(t){return new ap(Dl.Vi,this.serializer)}bu(t){return new UT}async terminate(){var t,n;(t=this.gcScheduler)===null||t===void 0||t.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}io.provider={build:()=>new io};class PI extends io{constructor(t){super(),this.cacheSizeBytes=t}Cu(t,n){Et(this.persistence.referenceDelegate instanceof ro,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new pT(r,t.asyncQueue,n)}Du(t){const n=this.cacheSizeBytes!==void 0?me.withCacheSize(this.cacheSizeBytes):me.DEFAULT;return new ap((r=>ro.Vi(r,n)),this.serializer)}}class Ka{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Ah(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=SI.bind(null,this.syncEngine),await aI(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new uI})()}createDatastore(t){const n=Co(t.databaseInfo.databaseId),r=(function(i){return new HT(i)})(t.databaseInfo);return(function(i,a,l,c){return new GT(i,a,l,c)})(t.authCredentials,t.appCheckCredentials,r,n)}createRemoteStore(t){return(function(r,s,i,a,l){return new XT(r,s,i,a,l)})(this.localStore,this.datastore,t.asyncQueue,(n=>Ah(this.syncEngine,n,0)),(function(){return yh.C()?new yh:new BT})())}createSyncEngine(t,n){return(function(s,i,a,l,c,f,d){const p=new mI(s,i,a,l,c,f);return d&&(p.fu=!0),p})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t,n;await(async function(s){const i=st(s);H(Zn,"RemoteStore shutting down."),i.Ia.add(5),await Gs(i),i.Ea.shutdown(),i.Aa.set("Unknown")})(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Ka.provider={build:()=>new Ka};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pp{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.xu(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.xu(this.observer.error,t):rn("Uncaught Error in snapshot listener:",t.toString()))}Ou(){this.muted=!0}xu(t,n){setTimeout((()=>{this.muted||t(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xn="FirestoreClient";class VI{constructor(t,n,r,s,i){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=ie.UNAUTHENTICATED,this.clientId=vl.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,(async a=>{H(xn,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a})),this.appCheckCredentials.start(r,(a=>(H(xn,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Tn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const r=Ul(n,"Failed to shutdown persistence");t.reject(r)}})),t.promise}}async function fa(e,t){e.asyncQueue.verifyOperationInProgress(),H(xn,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async s=>{r.isEqual(s)||(await lp(t.localStore,s),r=s)})),t.persistence.setDatabaseDeletedListener((()=>{Sn("Terminating Firestore due to IndexedDb database deletion"),e.terminate().then((()=>{H("Terminating Firestore due to IndexedDb database deletion completed successfully")})).catch((s=>{Sn("Terminating Firestore due to IndexedDb database deletion failed",s)}))})),e._offlineComponents=t}async function Sh(e,t){e.asyncQueue.verifyOperationInProgress();const n=await DI(e);H(xn,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener((r=>Eh(t.remoteStore,r))),e.setAppCheckTokenChangeListener(((r,s)=>Eh(t.remoteStore,s))),e._onlineComponents=t}async function DI(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){H(xn,"Using user provided OfflineComponentProvider");try{await fa(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!(function(s){return s.name==="FirebaseError"?s.code===D.FAILED_PRECONDITION||s.code===D.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(n))throw n;Sn("Error using user provided cache. Falling back to memory cache: "+n),await fa(e,new io)}}else H(xn,"Using default OfflineComponentProvider"),await fa(e,new PI(void 0));return e._offlineComponents}async function Vp(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(H(xn,"Using user provided OnlineComponentProvider"),await Sh(e,e._uninitializedComponentsProvider._online)):(H(xn,"Using default OnlineComponentProvider"),await Sh(e,new Ka))),e._onlineComponents}function xI(e){return Vp(e).then((t=>t.syncEngine))}async function Wa(e){const t=await Vp(e),n=t.eventManager;return n.onListen=gI.bind(null,t.syncEngine),n.onUnlisten=vI.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=_I.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=EI.bind(null,t.syncEngine),n}function NI(e,t,n={}){const r=new Tn;return e.asyncQueue.enqueueAndForget((async()=>(function(i,a,l,c,f){const d=new Pp({next:_=>{d.Ou(),a.enqueueAndForget((()=>vp(i,p))),_.fromCache&&c.source==="server"?f.reject(new K(D.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(_)},error:_=>f.reject(_)}),p=new Ep(l,d,{includeMetadataChanges:!0,ka:!0});return yp(i,p)})(await Wa(e),e.asyncQueue,t,n,r))),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dp(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rh=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xp="firestore.googleapis.com",Ch=!0;class Ph{constructor(t){var n,r;if(t.host===void 0){if(t.ssl!==void 0)throw new K(D.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=xp,this.ssl=Ch}else this.host=t.host,this.ssl=(n=t.ssl)!==null&&n!==void 0?n:Ch;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=op;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<fT)throw new K(D.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}Jv("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Dp((r=t.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new K(D.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new K(D.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new K(D.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&(function(r,s){return r.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Do{constructor(t,n,r,s){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ph({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new K(D.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new K(D.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ph(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new $v;switch(r.type){case"firstParty":return new Kv(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new K(D.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=Rh.get(n);r&&(H("ComponentProvider","Removing Datastore"),Rh.delete(n),r.terminate())})(this),Promise.resolve()}}function OI(e,t,n,r={}){var s;e=In(e,Do);const i=gl(t),a=e._getSettings(),l=Object.assign(Object.assign({},a),{emulatorOptions:e._getEmulatorOptions()}),c=`${t}:${n}`;i&&(_y(`https://${c}`),Ty("Firestore",!0)),a.host!==xp&&a.host!==c&&Sn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const f=Object.assign(Object.assign({},a),{host:c,ssl:i,emulatorOptions:r});if(!Ki(f,l)&&(e._setSettings(f),r.mockUserToken)){let d,p;if(typeof r.mockUserToken=="string")d=r.mockUserToken,p=ie.MOCK_USER;else{d=yy(r.mockUserToken,(s=e._app)===null||s===void 0?void 0:s.options.projectId);const _=r.mockUserToken.sub||r.mockUserToken.user_id;if(!_)throw new K(D.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new ie(_)}e._authCredentials=new qv(new gd(d,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or{constructor(t,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new or(this.firestore,t,this._query)}}class Bt{constructor(t,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new wn(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Bt(this.firestore,t,this._key)}toJSON(){return{type:Bt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,n,r){if(Hs(n,Bt._jsonSchema))return new Bt(t,r||null,new J(St.fromString(n.referencePath)))}}Bt._jsonSchemaVersion="firestore/documentReference/1.0",Bt._jsonSchema={type:Ut("string",Bt._jsonSchemaVersion),referencePath:Ut("string")};class wn extends or{constructor(t,n,r){super(t,n,bl(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Bt(this.firestore,null,new J(t))}withConverter(t){return new wn(this.firestore,t,this._path)}}function mr(e,t,...n){if(e=Jn(e),yd("collection","path",t),e instanceof Do){const r=St.fromString(t,...n);return $c(r),new wn(e,null,r)}{if(!(e instanceof Bt||e instanceof wn))throw new K(D.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(St.fromString(t,...n));return $c(r),new wn(e.firestore,null,r)}}function kI(e,t,...n){if(e=Jn(e),arguments.length===1&&(t=vl.newId()),yd("doc","path",t),e instanceof Do){const r=St.fromString(t,...n);return jc(r),new Bt(e,null,new J(r))}{if(!(e instanceof Bt||e instanceof wn))throw new K(D.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(St.fromString(t,...n));return jc(r),new Bt(e.firestore,e instanceof wn?e.converter:null,new J(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vh="AsyncQueue";class Dh{constructor(t=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new cp(this,"async_queue_retry"),this.oc=()=>{const r=ha();r&&H(Vh,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=t;const n=ha();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.ac(),this.uc(t)}enterRestrictedMode(t){if(!this.Xu){this.Xu=!0,this.rc=t||!1;const n=ha();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(t){if(this.ac(),this.Xu)return new Promise((()=>{}));const n=new Tn;return this.uc((()=>this.Xu&&this.rc?Promise.resolve():(t().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Zu.push(t),this.cc())))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(t){if(!jr(t))throw t;H(Vh,"Operation failed with retryable error: "+t)}this.Zu.length>0&&this.F_.g_((()=>this.cc()))}}uc(t){const n=this._c.then((()=>(this.nc=!0,t().catch((r=>{throw this.tc=r,this.nc=!1,rn("INTERNAL UNHANDLED ERROR: ",xh(r)),r})).then((r=>(this.nc=!1,r))))));return this._c=n,n}enqueueAfterDelay(t,n,r){this.ac(),this.sc.indexOf(t)>-1&&(n=0);const s=Ll.createAndSchedule(this,t,n,r,(i=>this.lc(i)));return this.ec.push(s),s}ac(){this.tc&&tt(47125,{hc:xh(this.tc)})}verifyOperationInProgress(){}async Pc(){let t;do t=this._c,await t;while(t!==this._c)}Tc(t){for(const n of this.ec)if(n.timerId===t)return!0;return!1}Ic(t){return this.Pc().then((()=>{this.ec.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.ec)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.Pc()}))}dc(t){this.sc.push(t)}lc(t){const n=this.ec.indexOf(t);this.ec.splice(n,1)}}function xh(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+`
`+e.stack),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nh(e){return(function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1})(e,["next","error","complete"])}class Us extends Do{constructor(t,n,r,s){super(t,n,r,s),this.type="firestore",this._queue=new Dh,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new Dh(t),this._firestoreClient=void 0,await t}}}function MI(e,t){const n=typeof e=="object"?e:Dv(),r=typeof e=="string"?e:Xi,s=Sv(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=my("firestore");i&&OI(s,...i)}return s}function ql(e){if(e._terminated)throw new K(D.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||FI(e),e._firestoreClient}function FI(e){var t,n,r;const s=e._freezeSettings(),i=(function(l,c,f,d){return new lE(l,c,f,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,Dp(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)})(e._databaseId,((t=e._app)===null||t===void 0?void 0:t.options.appId)||"",e._persistenceKey,s);e._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(e._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),e._firestoreClient=new VI(e._authCredentials,e._appCheckCredentials,e._queue,i,e._componentsProvider&&(function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}})(e._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class we{constructor(t){this._byteString=t}static fromBase64String(t){try{return new we(Zt.fromBase64String(t))}catch(n){throw new K(D.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new we(Zt.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:we._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(Hs(t,we._jsonSchema))return we.fromBase64String(t.bytes)}}we._jsonSchemaVersion="firestore/bytes/1.0",we._jsonSchema={type:Ut("string",we._jsonSchemaVersion),bytes:Ut("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hl{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new K(D.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Yt(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Np{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Be{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new K(D.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new K(D.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return ut(this._lat,t._lat)||ut(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Be._jsonSchemaVersion}}static fromJSON(t){if(Hs(t,Be._jsonSchema))return new Be(t.latitude,t.longitude)}}Be._jsonSchemaVersion="firestore/geoPoint/1.0",Be._jsonSchema={type:Ut("string",Be._jsonSchemaVersion),latitude:Ut("number"),longitude:Ut("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class je{constructor(t){this._values=(t||[]).map((n=>n))}toArray(){return this._values.map((t=>t))}isEqual(t){return(function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0})(this._values,t._values)}toJSON(){return{type:je._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(Hs(t,je._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every((n=>typeof n=="number")))return new je(t.vectorValues);throw new K(D.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}je._jsonSchemaVersion="firestore/vectorValue/1.0",je._jsonSchema={type:Ut("string",je._jsonSchemaVersion),vectorValues:Ut("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LI=/^__.*__$/;class UI{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return this.fieldMask!==null?new sr(t,this.data,this.fieldMask,n,this.fieldTransforms):new Ks(t,this.data,n,this.fieldTransforms)}}function Op(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw tt(40011,{Ec:e})}}class zl{constructor(t,n,r,s,i,a){this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Ac(),this.fieldTransforms=i||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(t){return new zl(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),s=this.Rc({path:r,mc:!1});return s.fc(t),s}gc(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),s=this.Rc({path:r,mc:!1});return s.Ac(),s}yc(t){return this.Rc({path:void 0,mc:!0})}wc(t){return oo(t,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(t){return this.fieldMask.find((n=>t.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>t.isPrefixOf(n.field)))!==void 0}Ac(){if(this.path)for(let t=0;t<this.path.length;t++)this.fc(this.path.get(t))}fc(t){if(t.length===0)throw this.wc("Document fields must not be empty");if(Op(this.Ec)&&LI.test(t))throw this.wc('Document fields cannot begin and end with "__"')}}class BI{constructor(t,n,r){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||Co(t)}Dc(t,n,r,s=!1){return new zl({Ec:t,methodName:n,bc:r,path:Yt.emptyPath(),mc:!1,Sc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function kp(e){const t=e._freezeSettings(),n=Co(e._databaseId);return new BI(e._databaseId,!!t.ignoreUndefinedProperties,n)}function jI(e,t,n,r,s,i={}){const a=e.Dc(i.merge||i.mergeFields?2:0,t,n,s);Lp("Data must be an object, but it was:",a,r);const l=Mp(r,a);let c,f;if(i.merge)c=new Re(a.fieldMask),f=a.fieldTransforms;else if(i.mergeFields){const d=[];for(const p of i.mergeFields){const _=qI(t,p,n);if(!a.contains(_))throw new K(D.INVALID_ARGUMENT,`Field '${_}' is specified in your field mask but missing from your input data.`);zI(d,_)||d.push(_)}c=new Re(d),f=a.fieldTransforms.filter((p=>c.covers(p.field)))}else c=null,f=a.fieldTransforms;return new UI(new Ie(l),c,f)}function $I(e,t,n,r=!1){return Kl(n,e.Dc(r?4:3,t))}function Kl(e,t){if(Fp(e=Jn(e)))return Lp("Unsupported field value:",t,e),Mp(e,t);if(e instanceof Np)return(function(r,s){if(!Op(s.Ec))throw s.wc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.wc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)})(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.mc&&t.Ec!==4)throw t.wc("Nested arrays are not supported");return(function(r,s){const i=[];let a=0;for(const l of r){let c=Kl(l,s.yc(a));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),a++}return{arrayValue:{values:i}}})(e,t)}return(function(r,s){if((r=Jn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return DE(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Pt.fromDate(r);return{timestampValue:no(s.serializer,i)}}if(r instanceof Pt){const i=new Pt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:no(s.serializer,i)}}if(r instanceof Be)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof we)return{bytesValue:Zd(s.serializer,r._byteString)};if(r instanceof Bt){const i=s.databaseId,a=r.firestore._databaseId;if(!a.isEqual(i))throw s.wc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Pl(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof je)return(function(a,l){return{mapValue:{fields:{[Rd]:{stringValue:Cd},[Ji]:{arrayValue:{values:a.toArray().map((f=>{if(typeof f!="number")throw l.wc("VectorValues must only contain numeric values.");return Sl(l.serializer,f)}))}}}}}})(r,s);throw s.wc(`Unsupported field value: ${vo(r)}`)})(e,t)}function Mp(e,t){const n={};return Td(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):nr(e,((r,s)=>{const i=Kl(s,t.Vc(r));i!=null&&(n[r]=i)})),{mapValue:{fields:n}}}function Fp(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof Pt||e instanceof Be||e instanceof we||e instanceof Bt||e instanceof Np||e instanceof je)}function Lp(e,t,n){if(!Fp(n)||!vd(n)){const r=vo(n);throw r==="an object"?t.wc(e+" a custom object"):t.wc(e+" "+r)}}function qI(e,t,n){if((t=Jn(t))instanceof Hl)return t._internalPath;if(typeof t=="string")return Up(e,t);throw oo("Field path arguments must be of type string or ",e,!1,void 0,n)}const HI=new RegExp("[~\\*/\\[\\]]");function Up(e,t,n){if(t.search(HI)>=0)throw oo(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new Hl(...t.split("."))._internalPath}catch{throw oo(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function oo(e,t,n,r,s){const i=r&&!r.isEmpty(),a=s!==void 0;let l=`Function ${t}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(i||a)&&(c+=" (found",i&&(c+=` in field ${r}`),a&&(c+=` in document ${s}`),c+=")"),new K(D.INVALID_ARGUMENT,l+e+c)}function zI(e,t){return e.some((n=>n.isEqual(t)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bp{constructor(t,n,r,s,i){this._firestore=t,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Bt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new KI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(Wl("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class KI extends Bp{data(){return super.data()}}function Wl(e,t){return typeof t=="string"?Up(e,t):t instanceof Hl?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jp(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new K(D.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Gl{}class WI extends Gl{}function GI(e,t,...n){let r=[];t instanceof Gl&&r.push(t),r=r.concat(n),(function(i){const a=i.filter((c=>c instanceof Ql)).length,l=i.filter((c=>c instanceof xo)).length;if(a>1||a>0&&l>0)throw new K(D.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const s of r)e=s._apply(e);return e}class xo extends WI{constructor(t,n,r){super(),this._field=t,this._op=n,this._value=r,this.type="where"}static _create(t,n,r){return new xo(t,n,r)}_apply(t){const n=this._parse(t);return $p(t._query,n),new or(t.firestore,t.converter,Ma(t._query,n))}_parse(t){const n=kp(t.firestore);return(function(i,a,l,c,f,d,p){let _;if(f.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new K(D.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){kh(p,d);const V=[];for(const M of p)V.push(Oh(c,i,M));_={arrayValue:{values:V}}}else _=Oh(c,i,p)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||kh(p,d),_=$I(l,a,p,d==="in"||d==="not-in");return Lt.create(f,d,_)})(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}}function QI(e,t,n){const r=t,s=Wl("where",e);return xo._create(s,r,n)}class Ql extends Gl{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new Ql(t,n)}_parse(t){const n=this._queryConstraints.map((r=>r._parse(t))).filter((r=>r.getFilters().length>0));return n.length===1?n[0]:Ve.create(n,this._getOperator())}_apply(t){const n=this._parse(t);return n.getFilters().length===0?t:((function(s,i){let a=s;const l=i.getFlattenedFilters();for(const c of l)$p(a,c),a=Ma(a,c)})(t._query,n),new or(t.firestore,t.converter,Ma(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function Oh(e,t,n){if(typeof(n=Jn(n))=="string"){if(n==="")throw new K(D.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Md(t)&&n.indexOf("/")!==-1)throw new K(D.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(St.fromString(n));if(!J.isDocumentKey(r))throw new K(D.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Xc(e,new J(r))}if(n instanceof Bt)return Xc(e,n._key);throw new K(D.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${vo(n)}.`)}function kh(e,t){if(!Array.isArray(e)||e.length===0)throw new K(D.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function $p(e,t){const n=(function(s,i){for(const a of s)for(const l of a.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null})(e.filters,(function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(t.op));if(n!==null)throw n===t.op?new K(D.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new K(D.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class XI{convertValue(t,n="none"){switch(Vn(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Ot(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(Pn(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 11:return this.convertObject(t.mapValue,n);case 10:return this.convertVectorValue(t.mapValue);default:throw tt(62114,{value:t})}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const r={};return nr(t,((s,i)=>{r[s]=this.convertValue(i,n)})),r}convertVectorValue(t){var n,r,s;const i=(s=(r=(n=t.fields)===null||n===void 0?void 0:n[Ji].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map((a=>Ot(a.doubleValue)));return new je(i)}convertGeoPoint(t){return new Be(Ot(t.latitude),Ot(t.longitude))}convertArray(t,n){return(t.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(t,n){switch(n){case"previous":const r=Io(t);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Os(t));default:return null}}convertTimestamp(t){const n=Cn(t);return new Pt(n.seconds,n.nanos)}convertDocumentKey(t,n){const r=St.fromString(t);Et(ip(r),9688,{name:t});const s=new ks(r.get(1),r.get(3)),i=new J(r.popFirst(5));return s.isEqual(n)||rn(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JI(e,t,n){let r;return r=e?e.toFirestore(t):t,r}class fs{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Qn extends Bp{constructor(t,n,r,s,i,a){super(t,n,r,s,a),this._firestore=t,this._firestoreImpl=t,this.metadata=i}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new Ni(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const r=this._document.data.field(Wl("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new K(D.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,n={};return n.type=Qn._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Qn._jsonSchemaVersion="firestore/documentSnapshot/1.0",Qn._jsonSchema={type:Ut("string",Qn._jsonSchemaVersion),bundleSource:Ut("string","DocumentSnapshot"),bundleName:Ut("string"),bundle:Ut("string")};class Ni extends Qn{data(t={}){return super.data(t)}}class Xn{constructor(t,n,r,s){this._firestore=t,this._userDataWriter=n,this._snapshot=s,this.metadata=new fs(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const t=[];return this.forEach((n=>t.push(n))),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach((r=>{t.call(n,new Ni(this._firestore,this._userDataWriter,r.key,r,new fs(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new K(D.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(s,i){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map((l=>{const c=new Ni(s._firestore,s._userDataWriter,l.doc.key,l.doc,new fs(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:a++}}))}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((l=>i||l.type!==3)).map((l=>{const c=new Ni(s._firestore,s._userDataWriter,l.doc.key,l.doc,new fs(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let f=-1,d=-1;return l.type!==0&&(f=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),d=a.indexOf(l.doc.key)),{type:YI(l.type),doc:c,oldIndex:f,newIndex:d}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new K(D.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=Xn._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=vl.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach((i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))})),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function YI(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return tt(61501,{type:e})}}Xn._jsonSchemaVersion="firestore/querySnapshot/1.0",Xn._jsonSchema={type:Ut("string",Xn._jsonSchemaVersion),bundleSource:Ut("string","QuerySnapshot"),bundleName:Ut("string"),bundle:Ut("string")};class Xl extends XI{constructor(t){super(),this.firestore=t}convertBytes(t){return new we(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new Bt(this.firestore,null,n)}}function Ii(e){e=In(e,or);const t=In(e.firestore,Us),n=ql(t),r=new Xl(t);return jp(e._query),NI(n,e._query).then((s=>new Xn(t,r,e,s)))}function ZI(e,t,n){e=In(e,Bt);const r=In(e.firestore,Us),s=JI(e.converter,t);return ew(r,[jI(kp(r),"setDoc",e._key,s,e.converter!==null,n).toMutation(e._key,Ye.none())])}function tw(e,...t){var n,r,s;e=Jn(e);let i={includeMetadataChanges:!1,source:"default"},a=0;typeof t[a]!="object"||Nh(t[a])||(i=t[a++]);const l={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(Nh(t[a])){const p=t[a];t[a]=(n=p.next)===null||n===void 0?void 0:n.bind(p),t[a+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),t[a+2]=(s=p.complete)===null||s===void 0?void 0:s.bind(p)}let c,f,d;if(e instanceof Bt)f=In(e.firestore,Us),d=bl(e._key.path),c={next:p=>{t[a]&&t[a](nw(f,e,p))},error:t[a+1],complete:t[a+2]};else{const p=In(e,or);f=In(p.firestore,Us),d=p._query;const _=new Xl(f);c={next:b=>{t[a]&&t[a](new Xn(f,_,p,b))},error:t[a+1],complete:t[a+2]},jp(e._query)}return(function(_,b,V,M){const L=new Pp(M),W=new Ep(b,L,V);return _.asyncQueue.enqueueAndForget((async()=>yp(await Wa(_),W))),()=>{L.Ou(),_.asyncQueue.enqueueAndForget((async()=>vp(await Wa(_),W)))}})(ql(f),d,l,c)}function ew(e,t){return(function(r,s){const i=new Tn;return r.asyncQueue.enqueueAndForget((async()=>TI(await xI(r),s,i))),i.promise})(ql(e),t)}function nw(e,t,n){const r=n.docs.get(t._key),s=new Xl(e);return new Qn(e,s,t._key,r,new fs(n.hasPendingWrites,n.fromCache),t.converter)}(function(t,n=!0){(function(s){Ur=s})(Vv),Gi(new Ds("firestore",((r,{instanceIdentifier:s,options:i})=>{const a=r.getProvider("app").getImmediate(),l=new Us(new Hv(r.getProvider("auth-internal")),new Wv(a,r.getProvider("app-check-internal")),(function(f,d){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new K(D.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ks(f.options.projectId,d)})(a,s),a);return i=Object.assign({useFetchStreams:n},i),l._setSettings(i),l}),"PUBLIC").setMultipleInstances(!0)),Pr(Mc,Fc,t),Pr(Mc,Fc,"esm2017")})();var rw="firebase",sw="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Pr(rw,sw,"app");const iw={apiKey:"AIzaSyDtS7-vuJ5TDEBaKqLXkvEYRjXYhu1XSY8",authDomain:"cis371-e15a4.firebaseapp.com",projectId:"cis371-e15a4",storageBucket:"cis371-e15a4.firebasestorage.app",messagingSenderId:"698632450490",appId:"1:698632450490:web:5bd30d0bfb263bc65fed83"},ow=od(iw),gr=MI(ow),Xs=z_("BeverageStore",{state:()=>({temps:wc,currentTemp:wc[0],bases:[],currentBase:null,syrups:[],currentSyrup:null,creamers:[],currentCreamer:null,beverages:[],currentBeverage:null,currentName:"",savedBeverages:[]}),actions:{async init(){const e=mr(gr,"bases"),t=mr(gr,"syrups"),n=mr(gr,"creamers"),r=await Ii(e),s=await Ii(t),i=await Ii(n);this.bases=r.docs.map(a=>({id:a.id,...a.data()})),console.log(this.bases),this.syrups=s.docs.map(a=>({id:a.id,...a.data()})),console.log(this.syrups),this.creamers=i.docs.map(a=>({id:a.id,...a.data()})),console.log(this.creamers),this.currentBase=this.bases[0]||null,this.currentSyrup=this.syrups[0]||null,this.currentCreamer=this.creamers[0]||null,tw(mr(gr,"beverages"),a=>{this.savedBeverages=a.docs.map(l=>({id:l.id,...l.data()}))})},async makeBeverage(e){if(!this.currentBase||!this.currentCreamer||!this.currentSyrup)return;const t={name:e,base:this.currentBase,creamer:this.currentCreamer,syrup:this.currentSyrup,temp:this.currentTemp},n=kI(mr(gr,"beverages"));await ZI(n,t),console.log("Beverage saved:",t)},async showBeverage(e){if(!e)return;const t=mr(gr,"beverages"),n=GI(t,QI("name","==",e)),r=await Ii(n);if(r.empty){console.log("No beverage found with name:",e);return}const i=r.docs[0].data();this.currentName=e,this.currentBase=i.base,this.currentCreamer=i.creamer,this.currentSyrup=i.syrup,this.currentTemp=i.temp,console.log("Beverage loaded:",i)},clearBeverages(){this.savedBeverages=[]}}}),aw=$s({__name:"Syrup",setup(e){const t=Xs();return(n,r)=>{var s;return yt(),Dt("div",{class:"syrup",style:Fr({"--texture-color":(s=Tt(t).currentSyrup)==null?void 0:s.color})},null,4)}}}),lw=er(aw,[["__scopeId","data-v-969d30c3"]]),uw=$s({__name:"Base",setup(e){const t=Xs();return(n,r)=>{var s;return yt(),Dt("div",{class:"baseBeverage",style:Fr({backgroundColor:(s=Tt(t).currentBase)==null?void 0:s.color})},null,4)}}}),cw=er(uw,[["__scopeId","data-v-f853ce7d"]]),hw={class:"froth"},fw=$s({__name:"Creamer",setup(e){const t=Xs();return(n,r)=>(yt(),Dt("div",hw,[(yt(),Dt(kt,null,pn(5,()=>{var s;return _t("div",{class:"foam",style:Fr({backgroundColor:(s=Tt(t).currentCreamer)==null?void 0:s.color})},null,4)}),64))]))}}),dw=er(fw,[["__scopeId","data-v-416a324e"]]),pw={},mw={id:"steam"},gw={class:"stream"};function _w(e,t){return yt(),Dt("div",mw,[(yt(),Dt(kt,null,pn(3,()=>_t("div",gw)),64))])}const yw=er(pw,[["render",_w]]),vw={},Ew={id:"condensation"},Tw={class:"flake"};function Iw(e,t){return yt(),Dt("div",Ew,[(yt(),Dt(kt,null,pn(3,()=>_t("div",Tw)),64))])}const ww=er(vw,[["render",Iw]]),Aw=$s({__name:"Beverage",props:{isIced:{type:Boolean},base:{},creamer:{},syrup:{},baseColor:{},creamerColor:{},syrupColor:{}},setup(e){return(t,n)=>(yt(),Gn(sy,null,{default:as(()=>[e.isIced?(yt(),Gn(ww,{key:0})):(yt(),Gn(yw,{key:1})),ge(ty,null,{top:as(()=>[ge(dw,{color:e.creamerColor},null,8,["color"])]),mid:as(()=>[ge(lw,{color:e.syrupColor},null,8,["color"])]),bottom:as(()=>[ge(cw,{color:e.baseColor},null,8,["color"])]),_:1})]),_:1}))}}),bw=["id","value"],Sw=["id","value"],Rw=["id","value"],Cw=["id","value"],Pw={id:"beverage-container",style:{"margin-top":"20px"}},Vw={key:0},Dw=["value"],xw={key:1},Nw=$s({__name:"App",setup(e){const t=Xs(),n=Fi(""),r=Fi("");function s(){t.makeBeverage(n.value),n.value=""}function i(){t.clearBeverages(),r.value=""}return(a,l)=>{var c,f,d;return yt(),Dt(kt,null,[_t("div",null,[Tt(t).currentBase&&Tt(t).currentCreamer&&Tt(t).currentSyrup?(yt(),Gn(Aw,{key:0,isIced:Tt(t).currentTemp==="Cold",base:Tt(t).currentBase.name,creamer:Tt(t).currentCreamer.name,syrup:Tt(t).currentSyrup.name,baseColor:(c=Tt(t).currentBase)==null?void 0:c.color,creamerColor:(f=Tt(t).currentCreamer)==null?void 0:f.color,syrupColor:(d=Tt(t).currentSyrup)==null?void 0:d.color},null,8,["isIced","base","creamer","syrup","baseColor","creamerColor","syrupColor"])):e_("",!0),_t("ul",null,[_t("li",null,[(yt(!0),Dt(kt,null,pn(Tt(t).temps,p=>(yt(),Dt("label",{key:p},[dr(_t("input",{type:"radio",name:"temperature",id:`r${p}`,value:p,"onUpdate:modelValue":l[0]||(l[0]=_=>Tt(t).currentTemp=_)},null,8,bw),[[os,Tt(t).currentTemp]]),vr(" "+_r(p),1)]))),128))])]),_t("div",null,[_t("ul",null,[_t("li",null,[(yt(!0),Dt(kt,null,pn(Tt(t).bases,p=>(yt(),Dt("label",{key:p.id},[dr(_t("input",{type:"radio",name:"base",id:`b${p.id}`,value:p,"onUpdate:modelValue":l[1]||(l[1]=_=>Tt(t).currentBase=_)},null,8,Sw),[[os,Tt(t).currentBase]]),vr(" "+_r(p.name),1)]))),128))])])]),_t("div",null,[_t("ul",null,[_t("li",null,[(yt(!0),Dt(kt,null,pn(Tt(t).creamers,p=>(yt(),Dt("label",{key:p.id},[dr(_t("input",{type:"radio",name:"creamer",id:`c${p.id}`,value:p,"onUpdate:modelValue":l[2]||(l[2]=_=>Tt(t).currentCreamer=_)},null,8,Rw),[[os,Tt(t).currentCreamer]]),vr(" "+_r(p.name),1)]))),128))])])]),_t("div",null,[_t("ul",null,[_t("li",null,[(yt(!0),Dt(kt,null,pn(Tt(t).syrups,p=>(yt(),Dt("label",{key:p.id},[dr(_t("input",{type:"radio",name:"syrup",id:`s${p.id}`,value:p,"onUpdate:modelValue":l[3]||(l[3]=_=>Tt(t).currentSyrup=_)},null,8,Cw),[[os,Tt(t).currentSyrup]]),vr(" "+_r(p.name),1)]))),128))])])]),dr(_t("input",{type:"text","onUpdate:modelValue":l[4]||(l[4]=p=>n.value=p),placeholder:"Beverage Name"},null,512),[[x_,n.value]]),_t("button",{onClick:s}," Make Beverage")]),_t("div",Pw,[_t("button",{onClick:i}," Clear Beverages"),Tt(t).savedBeverages.length>0?(yt(),Dt("div",Vw,[l[7]||(l[7]=_t("h3",null,"Saved Beverages",-1)),_t("ul",null,[_t("li",null,[(yt(!0),Dt(kt,null,pn(Tt(t).savedBeverages,p=>(yt(),Dt("label",{key:p.name},[dr(_t("input",{type:"radio",name:"savedBeverage",value:p.name,"onUpdate:modelValue":l[5]||(l[5]=_=>r.value=_),onChange:l[6]||(l[6]=_=>Tt(t).showBeverage(r.value))},null,40,Dw),[[os,r.value]]),vr(" "+_r(p.name),1)]))),128))])])])):(yt(),Dt("div",xw,[...l[8]||(l[8]=[_t("h3",null,"No Saved Beverages",-1)])]))])],64)}}}),qp=M_(Nw),Hp=U_();Hp.use(X_);qp.use(Hp);const Ow=Xs();Ow.init().then(()=>{qp.mount("#app")});
